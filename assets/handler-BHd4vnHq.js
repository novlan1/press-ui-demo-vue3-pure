import{t as c}from"./index-Fgh2JTYb.js";import{a as T}from"./handler-helper-BKr0zvNe.js";import{s as P,a as C}from"./index-CtSWKnZF.js";import{n as v}from"./adapter-_Qol4RNt.js";import{i as N}from"./h5-handler-CAytnr_I.js";import{P as A}from"./press-popup-plus-vBZ-M3Er.js";import{P as D}from"./press-button-aOpBGG58.js";import{b as I}from"./button-ge1sxQBA.js";import{R as M,G}from"./color-DciZLlTH.js";import{t as z}from"./function-C6V8280e.js";import{a as F,d as L}from"./press-component-D9D_j5DA.js";import{u as U}from"./utils-C2tViYFs.js";import{g as E}from"./dialog-mixin-B7zHnNet.js";import{_ as V,r as S,o,c as l,f as j,l as p,n as B,i as k,F as R,A as f,t as u,d as r,a as q,b}from"./index-BrqLSZap.js";const w={show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},theme:{type:String,default:"default"},useSlot:Boolean,className:{type:String,default:""},customStyle:{type:String,default:""},asyncClose:Boolean,messageAlign:{type:String,default:""},beforeClose:{type:[null,Function],default:null},overlayStyle:{type:String,default:""},useTitleSlot:Boolean,showCancelButton:Boolean,closeOnClickOverlay:Boolean,confirmButtonOpenType:{type:String,default:""},width:{type:[String,Number],default:""},zIndex:{type:Number,default:2e3},confirmButtonText:{type:String,default:c("confirm")},cancelButtonText:{type:String,default:c("cancel")},confirmButtonColor:{type:String,default:M},cancelButtonColor:{type:String,default:G},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},transition:{type:String,default:"scale"},...F},H={name:"PressDialogPlus",options:{...L,styleIsolation:"shared"},components:{PressPopup:A,PressButton:D},mixins:[I,E(w)],props:w,emits:["close","confirm","cancel"],data(){return{utils:U,loading:{confirm:!1,cancel:!1},callback:()=>{}}},watch:{dataShow:{handler(e){e||this.stopLoading()}}},methods:{onConfirm(){this.handleAction("confirm")},onCancel(){this.handleAction("cancel")},onClickOverlay(){this.close("overlay")},close(e){this.dataShow=!1,v(()=>{this.$emit("close",e);const{callback:s}=this;s&&s(e,this)})},stopLoading(){this.loading.confirm=!1,this.loading.cancel=!1},handleAction(e){this.$emit(e,{dialog:this});const{dataAsyncClose:s,dataBeforeClose:a}=this;if(!s&&!a){this.close(e);return}this.loading[e]=!0,a&&z(a(e)).then(i=>{i?this.close(e):this.stopLoading()})}}},Q={class:"press-dialog-index"},W={class:"press-dialog__message-text"},Y={key:3,class:"press-hairline--top press-dialog__footer"};function Z(e,s,a,i,t,n){const d=S("press-button"),m=S("press-popup");return o(),l("div",Q,[j(m,{show:e.dataShow,"z-index":e.dataZIndex,overlay:e.dataOverlay,transition:e.dataTransition,"custom-class":"press-dialog press-dialog--"+e.dataTheme+" "+e.dataClassName,"custom-style":"width: "+t.utils.addUnit(e.dataWidth)+";"+e.dataCustomStyle,"overlay-style":e.dataOverlayStyle,"close-on-click-overlay":e.dataCloseOnClickOverlay,onClose:n.onClickOverlay},{default:p(()=>[e.dataTitle||e.dataUseTitleSlot?(o(),l("div",{key:0,class:B(t.utils.bem2("dialog__header",{isolated:!(e.dataMessage||e.dataUseSlot)}))},[e.dataUseTitleSlot?k(e.$slots,"title",{key:0},void 0,!0):e.dataTitle?(o(),l(R,{key:1},[f(u(e.dataTitle),1)],64)):r("",!0)],2)):r("",!0),e.dataUseSlot?k(e.$slots,"default",{key:1},void 0,!0):e.dataMessage?(o(),l("div",{key:2,class:B(t.utils.bem2("dialog__message",[e.dataTheme,e.dataMessageAlign,{hasTitle:e.dataTitle}]))},[q("span",W,u(e.dataMessage),1)],2)):r("",!0),(o(),l("div",Y,[e.dataShowCancelButton?(o(),b(d,{key:0,size:"large",loading:t.loading.cancel,class:"press-dialog__button press-hairline--right","custom-class":"press-dialog__cancel","custom-style":"color: "+e.dataCancelButtonColor,onClick:n.onCancel},{default:p(()=>[f(u(e.dataCancelButtonText),1)]),_:1},8,["loading","custom-style","onClick"])):r("",!0),e.dataShowConfirmButton?(o(),b(d,{key:1,size:"large",class:"press-dialog__button",loading:t.loading.confirm,"custom-class":"press-dialog__confirm","custom-style":"color: "+e.dataConfirmButtonColor,"open-type":e.dataConfirmButtonOpenType,lang:e.lang,"business-id":e.businessId,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"show-message-card":e.showMessageCard,"app-parameter":e.appParameter,onClick:n.onConfirm,onGetuserinfo:e.onGetUserInfo,onContact:e.onContact,onGetphonenumber:e.onGetPhoneNumber,onError:e.onError,onLaunchapp:e.onLaunchApp,onOpensetting:e.onOpenSetting},{default:p(()=>[f(u(e.dataConfirmButtonText),1)]),_:1},8,["loading","custom-style","open-type","lang","business-id","session-from","send-message-title","send-message-path","send-message-img","show-message-card","app-parameter","onClick","onGetuserinfo","onContact","onGetphonenumber","onError","onLaunchapp","onOpensetting"])):r("",!0)]))]),_:3},8,["show","z-index","overlay","transition","custom-class","custom-style","overlay-style","close-on-click-overlay","onClose"])])}const $=V(H,[["render",Z],["__scopeId","data-v-5242f5aa"]]);let g=[];const O={show:!1,title:"",width:null,theme:"default",message:"",zIndex:100,overlay:!0,selector:"#press-dialog",className:"",asyncClose:!1,beforeClose:null,transition:"scale",customStyle:"",messageAlign:"",overlayStyle:"",confirmButtonText:c("confirm"),cancelButtonText:c("cancel"),showConfirmButton:!0,showCancelButton:!1,closeOnClickOverlay:!1,confirmButtonOpenType:""};let h=Object.assign({},O);function J(){const e=getCurrentPages();return e[e.length-1]}const K=e=>(e=Object.assign(Object.assign({},h),e),new Promise((s,a)=>{const i=e.context||J();let t=P(i,e.selector);if(delete e.context,delete e.selector,t||(t=N($,"press-dialog")),t){const n=(m,y)=>{m==="confirm"?s(y):a(y)},d={...e};C(t,d),t.callback=n,v(()=>{C(t,{show:!0})}),g.push(t)}else console.warn("The press-dialog node is not found, please confirm whether the selector and context are correct")}));function X(e){g=e}function _(e){h=e}T({Dialog:K,queue:g,currentOptions:h,defaultOptions:O,updateQueue:X,updateCurrentOptions:_});export{K as D,$ as P};
