import{P as v}from"./press-code-input-2SCEdFef.js";import{P as V}from"./press-field-Br4lW3xA.js";import{_ as B,c as m,o as c,b as f,R as _,k as P,ag as M,l as D,G as g,r as b,d as K,h,n as k,a as w,t as C,F as S,j as I,w as T,e as s}from"./index-Q-rLfHSZ.js";import{P as A}from"./press-popup-B-8tWq_S.js";import"./test-CXO-MJ-T.js";import"./parent-CQhE6Wqc.js";const x={name:"PressIconPlusDelete"},N={class:"press-number-keyboard__delete-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 22"};function L(t,e,l,u,n,o){return c(),m("svg",N,e[0]||(e[0]=[f("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null,-1)]))}const z=B(x,[["render",L],["__scopeId","data-v-78e4df1e"]]),F={name:"PressNumberKeyboard",options:{...D,styleIsolation:"shared"},components:{PressPopup:A,PressIconPlusDelete:z},mixins:[M],props:{...P,mode:{type:String,default:"number"},show:{type:Boolean,default:!1},toolbar:{type:Boolean,default:!1},cancelButtonText:{type:String,default:""},confirmButtonText:{type:String,default:_("confirm")},title:{type:String,default:""},decimalMark:{type:String,default:"."},random:{type:Boolean,default:!1},maxLength:{type:Number,default:-1},zIndex:{type:Number,default:100},round:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0}},emits:["change","backspace","close","cancel","confirm","update:modelValue"],data(){return{timer:null,refreshKeyOrder:1}},computed:{roundComputed(){return this.round||this.toolbar},keys(){let t;switch(this.mode){case"number":t=[1,2,3,4,5,6,7,8,9,0];break;case"accounting":t=[1,2,3,4,5,6,7,8,9,0,this.decimalMark];break;case"card":t=[1,2,3,4,5,6,7,8,9,"X",0];break;default:t=[]}return this.refreshKeyOrder,this.random&&(t=this.shuffleArray(t)),t},wrapClass(){return g.bem2("number-keyboard",{safe:this.safeAreaInsetBottom})},padClass(){return g.bem2("number-keyboard__pad",this.mode)}},watch:{show(t){this.random&&t&&(this.refreshKeyOrder=this.refreshKeyOrder===1?2:1)}},mounted(){},beforeDestroy(){},methods:{shuffleArray(t){const e=t;for(let l=e.length-1;l>0;l--){const u=Math.floor(Math.random()*(l+1)),n=e[l];e[l]=e[u],e[u]=n}return e},getButtonClass(t,e){const l=[t];switch(this.mode){case"number":e===this.keys.length-1&&l.push("wide");break;case"accounting":["backspace","confirm"].includes(t)?l.push("place-right"):e===this.keys.length-2&&l.push("wide");break}return g.bem2("number-keyboard__button",l)},onKeyboardClick(t){this.maxLength>=0&&this.realModelValue.length>=this.maxLength||(this.emitModelValue(this.realModelValue+t),this.$emit("change",t))},onBackspaceStart(){this.onBackspaceEnd(),this.onBackspaceClick(),this.timer=setInterval(()=>{this.onBackspaceClick()},250)},onBackspaceEnd(){clearInterval(this.timer),this.timer=null},onBackspaceClick(){this.$emit("backspace"),this.emitModelValue(this.realModelValue.slice(0,this.realModelValue.length-1))},onClose(){this.$emit("close")},onActionClick(t){const{action:e}=t.currentTarget.dataset;this.$emit(e)}}},U={key:0,class:"press-number-keyboard__toolbar"},E={class:"press-number-keyboard__title"},O=["onClick"];function G(t,e,l,u,n,o){const r=b("PressIconPlusDelete"),d=b("PressPopup");return c(),K(d,{show:l.show,"z-index":l.zIndex,position:"bottom",round:o.roundComputed,"overlay-style":"background-color: transparent;","safe-area-inset-bottom":!1,onClose:o.onClose},{default:h(()=>[f("div",{class:k(o.wrapClass)},[l.toolbar?(c(),m("div",U,[l.cancelButtonText?(c(),m("button",{key:0,class:"press-number-keyboard__cancel","hover-class":"press-number-keyboard__cancel--hover","data-action":"cancel",onClick:e[0]||(e[0]=(...a)=>o.onActionClick&&o.onActionClick(...a))},C(l.cancelButtonText),1)):w("",!0),f("div",E,C(l.title),1),l.confirmButtonText?(c(),m("button",{key:1,class:"press-number-keyboard__confirm","hover-class":"press-number-keyboard__confirm--hover","data-action":"confirm",onClick:e[1]||(e[1]=(...a)=>o.onActionClick&&o.onActionClick(...a))},C(l.confirmButtonText),1)):w("",!0)])):w("",!0),f("div",{class:k(o.padClass)},[(c(!0),m(S,null,I(o.keys,(a,p)=>(c(),m("button",{key:a,class:k(o.getButtonClass(a,p)),"hover-class":"press-number-keyboard__button--hover",onClick:y=>o.onKeyboardClick(a)},C(a),11,O))),128)),f("button",{class:k(o.getButtonClass("backspace")),"hover-class":"press-number-keyboard__button--hover",onTouchstart:e[2]||(e[2]=T((...a)=>o.onBackspaceStart&&o.onBackspaceStart(...a),["stop"])),onTouchend:e[3]||(e[3]=(...a)=>o.onBackspaceEnd&&o.onBackspaceEnd(...a))},[s(r,{class:"press-number-keyboard__delete-icon"})],34),l.mode==="accounting"?(c(),m("button",{key:0,class:k(o.getButtonClass("confirm")),"hover-class":"press-number-keyboard__button--confirm-hover","data-action":"confirm",onClick:e[4]||(e[4]=(...a)=>o.onActionClick&&o.onActionClick(...a))},C(l.confirmButtonText),3)):w("",!0)],2)],2)]),_:1},8,["show","z-index","round","onClose"])}const H=B(F,[["render",G],["__scopeId","data-v-016262a8"]]),j={i18n:{"zh-CN":{number:"数字键盘",accounting:"带小数点的数字键盘",card:"身份证键盘",custom:"自定义",withToolbar:"展示顶部栏",withTitle:"展示标题",decimalMark:"自定义小数点",random:"打乱顺序",bindValue:"配合输入框使用",bindLabel:"双向绑定",input:"点此输入",codeValue:"配合验证码输入使用"},"en-US":{number:"Number Keyboard",accounting:"Number Keyboard with Decimal Mark",card:"Identity Number Keyboard",custom:"Custom",withToolbar:"Show Toolbar",withTitle:"Show Title",decimalMark:"Custom Separator Mark",random:"Randomized",bindValue:"Use with Field",bindLabel:"Bind Value",input:"Click to Input",codeValue:"Use with CodeInput"}},components:{PressField:V,PressCodeInput:v,PressNumberKeyboard:H},data(){return{mode:"number",show:!1,showBindDemo:!1,showCodeDemo:!1,toolbar:!1,title:"",decimalMark:".",random:!1,bindValue:"",codeValue:""}},methods:{onShowKeyboard(t){let e="number",l=!0,u=!1,n=!1,o=!1,r="",d=".",a=!1;switch(t){case"number":break;case"accounting":e="accounting";break;case"card":e="card";break;case"toolbar":o=!0;break;case"title":o=!0,r="数字键盘";break;case"decimalMark":e="accounting",d=",";break;case"random":a=!0;break;case"bindValue":l=!1,u=!0;break;case"codeValue":l=!1,n=!0;break}this.mode=e,this.show=l,this.showBindDemo=u,this.showCodeDemo=n,this.toolbar=o,this.title=r,this.decimalMark=d,this.random=a},onChange(t){console.log(`[onChange] ${t}`),this.onGTip(`${t}`)},onBackspace(){console.log("[onBackspace]"),this.onGTip("backspace")},onClose(){console.log("[onClose]"),this.show=!1},onCancel(){console.log("[onCancel]"),this.show=!1},onConfirm(){console.log("[onConfirm]"),this.show=!1},onCloseBindDemo(){this.showBindDemo=!1},onCloseCodeDemo(){this.showCodeDemo=!1},onChangeCode(t){console.log("[onChange] value: ",t)}}},R={class:"demo-wrap"};function X(t,e,l,u,n,o){const r=b("press-cell"),d=b("demo-block"),a=b("PressField"),p=b("PressCodeInput"),y=b("PressNumberKeyboard");return c(),m("div",R,[s(d,{title:t.t("basicUsage")},{default:h(()=>[s(r,{title:t.t("number"),"is-link":"",onClick:e[0]||(e[0]=i=>o.onShowKeyboard("number"))},null,8,["title"]),s(r,{title:t.t("accounting"),"is-link":"",onClick:e[1]||(e[1]=i=>o.onShowKeyboard("accounting"))},null,8,["title"]),s(r,{title:t.t("card"),"is-link":"",onClick:e[2]||(e[2]=i=>o.onShowKeyboard("card"))},null,8,["title"])]),_:1},8,["title"]),s(d,{title:t.t("custom")},{default:h(()=>[s(r,{title:t.t("withToolbar"),"is-link":"",onClick:e[3]||(e[3]=i=>o.onShowKeyboard("toolbar"))},null,8,["title"]),s(r,{title:t.t("withTitle"),"is-link":"",onClick:e[4]||(e[4]=i=>o.onShowKeyboard("title"))},null,8,["title"]),s(r,{title:t.t("decimalMark"),"is-link":"",onClick:e[5]||(e[5]=i=>o.onShowKeyboard("decimalMark"))},null,8,["title"]),s(r,{title:t.t("random"),"is-link":"",onClick:e[6]||(e[6]=i=>o.onShowKeyboard("random"))},null,8,["title"])]),_:1},8,["title"]),s(d,{title:t.t("bindValue")},{default:h(()=>[s(a,{label:t.t("bindLabel"),value:n.bindValue,"model-value":n.bindValue,readonly:"",clickable:!0,placeholder:t.t("input"),"always-embed":!0,onClick:e[7]||(e[7]=i=>o.onShowKeyboard("bindValue")),onClickInput:e[8]||(e[8]=i=>o.onShowKeyboard("bindValue"))},null,8,["label","value","model-value","placeholder"])]),_:1},8,["title"]),s(d,{title:t.t("codeValue")},{default:h(()=>[s(r,{onClick:e[9]||(e[9]=i=>o.onShowKeyboard("codeValue"))},{default:h(()=>[s(p,{"max-length":6,value:n.codeValue,"disabled-keyboard":!0},null,8,["value"])]),_:1})]),_:1},8,["title"]),s(y,{mode:n.mode,show:n.show,toolbar:n.toolbar,title:n.title,"decimal-mark":n.decimalMark,random:n.random,onChange:o.onChange,onBackspace:o.onBackspace,onCancel:o.onCancel,onConfirm:o.onConfirm,onClose:o.onClose},null,8,["mode","show","toolbar","title","decimal-mark","random","onChange","onBackspace","onCancel","onConfirm","onClose"]),s(y,{modelValue:n.bindValue,"onUpdate:modelValue":e[10]||(e[10]=i=>n.bindValue=i),mode:n.mode,show:n.showBindDemo,toolbar:n.toolbar,title:n.title,"decimal-mark":n.decimalMark,random:n.random,"max-length":6,onCancel:o.onCloseBindDemo,onConfirm:o.onCloseBindDemo,onClose:o.onCloseBindDemo},null,8,["modelValue","mode","show","toolbar","title","decimal-mark","random","onCancel","onConfirm","onClose"]),s(y,{modelValue:n.codeValue,"onUpdate:modelValue":e[11]||(e[11]=i=>n.codeValue=i),mode:n.mode,show:n.showCodeDemo,toolbar:n.toolbar,title:n.title,"decimal-mark":n.decimalMark,random:n.random,"max-length":6,onCancel:o.onCloseCodeDemo,onConfirm:o.onCloseCodeDemo,onClose:o.onCloseCodeDemo,onChange:o.onChangeCode},null,8,["modelValue","mode","show","toolbar","title","decimal-mark","random","onCancel","onConfirm","onClose","onChange"])])}const $=B(j,[["render",X],["__scopeId","data-v-9efdbebd"]]);export{$ as default};
