import{P as N}from"./press-popup-plus-DuNtFC2D.js";import{P as U}from"./press-button-D_1IeF99.js";import{b as G}from"./button-BaKXjqxg.js";import{R as z,G as M}from"./color-DciZLlTH.js";import{t as F}from"./function-fz9MreJ2.js";import{a as $,d as L,n as E}from"./press-component-DoZYj-_b.js";import{u as V}from"./utils-Do31p4kb.js";import{t as h}from"./index-8MGmyJdE.js";import{g as j}from"./dialog-mixin-MGzCWDer.js";import{_ as T,r as p,o as d,c as m,f as a,n as u,x as S,y as k,F as R,u as y,t as g,d as c,a as O,b as B}from"./index-BXJiSO9X.js";import{a as _}from"./handler-helper-BKr0zvNe.js";import{s as q,a as b}from"./index-D-cODh84.js";import{i as H}from"./h5-handler-DwuTonfh.js";import{P as Q}from"./press-cell-CXncsEZw.js";import"./press-icon-plus-BVVeYod4.js";import"./add-unit-Df5pRFBE.js";import"./press-info-CaSyg39j.js";import"./press-overlay-CF5R9TPs.js";import"./press-transition-Bv_UwlUL.js";import"./system-BAdrsxg_.js";import"./press-loading-plus-DAf2CFYh.js";import"./press-loading-CjS78Ikv.js";import"./component-handler-mBExnP7R.js";import"./link-Ds6ljOst.js";import"./event-_7uzVFJT.js";import"./support-passive-CNRHRm4O.js";const v={show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},theme:{type:String,default:"default"},useSlot:Boolean,className:{type:String,default:""},customStyle:{type:String,default:""},asyncClose:Boolean,messageAlign:{type:String,default:""},beforeClose:{type:[null,Function],default:null},overlayStyle:{type:String,default:""},useTitleSlot:Boolean,showCancelButton:Boolean,closeOnClickOverlay:Boolean,confirmButtonOpenType:{type:String,default:""},width:{type:[String,Number],default:""},zIndex:{type:Number,default:2e3},confirmButtonText:{type:String,default:h("confirm")},cancelButtonText:{type:String,default:h("cancel")},confirmButtonColor:{type:String,default:z},cancelButtonColor:{type:String,default:M},showConfirmButton:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},transition:{type:String,default:"scale"},...$},W={name:"PressDialogPlus",options:{...L,styleIsolation:"shared"},components:{PressPopup:N,PressButton:U},mixins:[G,j(v)],props:v,emits:["close","confirm","cancel"],data(){return{utils:V,loading:{confirm:!1,cancel:!1},callback:()=>{}}},watch:{dataShow:{handler(e){e||this.stopLoading()}}},methods:{onConfirm(){this.handleAction("confirm")},onCancel(){this.handleAction("cancel")},onClickOverlay(){this.close("overlay")},close(e){this.dataShow=!1,this.$nextTick(()=>{this.$emit("close",e);const{callback:t}=this;t&&t(e,this)})},stopLoading(){this.loading.confirm=!1,this.loading.cancel=!1},handleAction(e){this.$emit(e,{dialog:this});const{dataAsyncClose:t,dataBeforeClose:n}=this;if(!t&&!n){this.close(e);return}this.loading[e]=!0,n&&F(n(e)).then(i=>{i?this.close(e):this.stopLoading()})}}},Y={class:"press-dialog-index"},Z={class:"press-dialog__message-text"},J={key:3,class:"press-hairline--top press-dialog__footer"};function K(e,t,n,i,o,s){const l=p("press-button"),r=p("press-popup");return d(),m("div",Y,[a(r,{show:e.dataShow,"z-index":e.dataZIndex,overlay:e.dataOverlay,transition:e.dataTransition,"custom-class":"press-dialog press-dialog--"+e.dataTheme+" "+e.dataClassName,"custom-style":"width: "+o.utils.addUnit(e.dataWidth)+";"+e.dataCustomStyle,"overlay-style":e.dataOverlayStyle,"close-on-click-overlay":e.dataCloseOnClickOverlay,onClose:s.onClickOverlay},{default:u(()=>[e.dataTitle||e.dataUseTitleSlot?(d(),m("div",{key:0,class:S(o.utils.bem2("dialog__header",{isolated:!(e.dataMessage||e.dataUseSlot)}))},[e.dataUseTitleSlot?k(e.$slots,"title",{key:0},void 0,!0):e.dataTitle?(d(),m(R,{key:1},[y(g(e.dataTitle),1)],64)):c("",!0)],2)):c("",!0),e.dataUseSlot?k(e.$slots,"default",{key:1},void 0,!0):e.dataMessage?(d(),m("div",{key:2,class:S(o.utils.bem2("dialog__message",[e.dataTheme,e.dataMessageAlign,{hasTitle:e.dataTitle}]))},[O("span",Z,g(e.dataMessage),1)],2)):c("",!0),(d(),m("div",J,[e.dataShowCancelButton?(d(),B(l,{key:0,size:"large",loading:o.loading.cancel,class:"press-dialog__button press-hairline--right","custom-class":"press-dialog__cancel","custom-style":"color: "+e.dataCancelButtonColor,onClick:s.onCancel},{default:u(()=>[y(g(e.dataCancelButtonText),1)]),_:1},8,["loading","custom-style","onClick"])):c("",!0),e.dataShowConfirmButton?(d(),B(l,{key:1,size:"large",class:"press-dialog__button",loading:o.loading.confirm,"custom-class":"press-dialog__confirm","custom-style":"color: "+e.dataConfirmButtonColor,"open-type":e.dataConfirmButtonOpenType,lang:e.lang,"business-id":e.businessId,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"show-message-card":e.showMessageCard,"app-parameter":e.appParameter,onClick:s.onConfirm,onGetuserinfo:e.onGetUserInfo,onContact:e.onContact,onGetphonenumber:e.onGetPhoneNumber,onError:e.onError,onLaunchapp:e.onLaunchApp,onOpensetting:e.onOpenSetting},{default:u(()=>[y(g(e.dataConfirmButtonText),1)]),_:1},8,["loading","custom-style","open-type","lang","business-id","session-from","send-message-title","send-message-path","send-message-img","show-message-card","app-parameter","onClick","onGetuserinfo","onContact","onGetphonenumber","onError","onLaunchapp","onOpensetting"])):c("",!0)]))]),_:3},8,["show","z-index","overlay","transition","custom-class","custom-style","overlay-style","close-on-click-overlay","onClose"])])}const P=T(W,[["render",K],["__scopeId","data-v-918dc117"]]);let C=[];const D={show:!1,title:"",width:null,theme:"default",message:"",zIndex:100,overlay:!0,selector:"#press-dialog",className:"",asyncClose:!1,beforeClose:null,transition:"scale",customStyle:"",messageAlign:"",overlayStyle:"",confirmButtonText:h("confirm"),cancelButtonText:h("cancel"),showConfirmButton:!0,showCancelButton:!1,closeOnClickOverlay:!1,confirmButtonOpenType:""};let w=Object.assign({},D);function X(){const e=getCurrentPages();return e[e.length-1]}const I=e=>(e=Object.assign(Object.assign({},w),e),new Promise((t,n)=>{const i=e.context||X();let o=q(i,e.selector);if(delete e.context,delete e.selector,o||(o=H(P,"press-dialog")),o){const s={callback:(l,r)=>{l==="confirm"?t(r):n(r)},...e};b(o,s),E(()=>{b(o,{show:!0})}),C.push(o)}else console.warn("The press-dialog node is not found, please confirm whether the selector and context are correct")}));function x(e){C=e}function ee(e){w=e}_({Dialog:I,queue:C,currentOptions:w,defaultOptions:D,updateQueue:x,updateCurrentOptions:ee});const te=e=>new Promise(t=>{e==="confirm"?setTimeout(()=>{t(!0)},1e3):t(!0)}),oe={i18n:{"zh-CN":{alert1:"提示弹窗",alert2:"提示弹窗（无标题）",confirm:"确认弹窗",asyncClose:"异步关闭",roundButton:"圆角按钮样式",componentCall:"组件调用",content:"代码是写出来给人看的，附带能在机器上运行"},"en-US":{alert1:"Alert",alert2:"Alert without title",confirm:"Confirm dialog",asyncClose:"Async Close",roundButton:"Round Button Style",componentCall:"Component Call"}},components:{PressDialogPlus:P,PressCell:Q},data(){return{show:!1}},methods:{onShowDialog(e){if(e==="component"){this.show=!0;return}let t=this.t("title"),n=!1,i=null;e==="noTitle"?t="":e==="cancel"?n=!0:e==="async"&&(n=!0,i=te),I.alert({context:this,title:t,showCancelButton:n,message:this.t("content"),beforeClose:i}).then(()=>{})},getUserInfo(e){console.log("getUserInfo.res",e)},onClose(){this.show=!1}}},se={class:"demo-wrap"},ne=O("img",{src:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/5/own_mike_260c4142c7225b5f73.jpeg",style:{width:"100%","margin-top":"16px"},mode:"aspectFit"},null,-1);function le(e,t,n,i,o,s){const l=p("press-cell"),r=p("demo-block"),A=p("press-dialog-plus");return d(),m("div",se,[a(r,{title:e.t("basicUsage")},{default:u(()=>[a(l,{title:e.t("alert1"),"is-link":"",onClick:t[0]||(t[0]=f=>s.onShowDialog("normal"))},null,8,["title"]),a(l,{title:e.t("alert2"),"is-link":"",onClick:t[1]||(t[1]=f=>s.onShowDialog("noTitle"))},null,8,["title"]),a(l,{title:e.t("confirm"),"is-link":"",onClick:t[2]||(t[2]=f=>s.onShowDialog("cancel"))},null,8,["title"])]),_:1},8,["title"]),a(r,{title:e.t("asyncClose")},{default:u(()=>[a(l,{title:e.t("asyncClose"),"is-link":"",onClick:t[3]||(t[3]=f=>s.onShowDialog("async"))},null,8,["title"])]),_:1},8,["title"]),a(r,{title:e.t("componentCall")},{default:u(()=>[a(l,{title:e.t("componentCall"),"is-link":"",onClick:t[4]||(t[4]=f=>s.onShowDialog("component"))},null,8,["title"])]),_:1},8,["title"]),a(A,{"use-slot":"",title:e.t("title"),show:o.show,"show-cancel-button":"","confirm-button-open-type":"getUserInfo",onClose:s.onClose,onGetuserinfo:s.getUserInfo},{default:u(()=>[ne]),_:1},8,["title","show","onClose","onGetuserinfo"])])}const Ue=T(oe,[["render",le]]);export{Ue as default};
