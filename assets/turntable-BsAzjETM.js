import{_ as g,o,c as i,a as r,v as u,w as f,u as m,t as p,F as b,i as y,x as h,d as _,f as z,r as S}from"./index-C4ERlhP1.js";function T({prizeIndex:s,prizeTotal:t=6,innerStartAngle:e=0,laps:c=3}){const l=360/t;return e+c*360+l*s-e%360}const A={name:"PressTurntable",props:{list:{type:Array,default:()=>[]},number:{type:Number,default:1},disabled:{type:Boolean,default:!1},prizeIndex:{type:Number,default:0},startAngle:{type:Number,default:0},laps:{type:Number,default:3},duration:{type:Number,default:3e3},customStyle:{type:String,default:""},customClass:{type:String,default:""}},emits:["start","end"],data(){return{innerStartAngle:this.startAngle,rotateTransition:"",isLocking:!1}},computed:{prizeTotal(){return this.list.length},rotateAngle(){return`rotate(${this.innerStartAngle}deg)`},rotateStyle(){const{rotateTransition:s,rotateAngle:t}=this;return`transition: ${s};transform: ${t};`}},watch:{startAngle:{handler(s){this.innerStartAngle=s}}},mounted(){},methods:{startRotation(){if(!this.canBeRotated())return!1;this.isLocking=!0,this.rotate(this.prizeIndex),this.$emit("start")},endRotation(){this.isLocking=!1},canBeRotated(){return!(this.disabled||this.isLocking)},rotate(s){const{duration:t}=this,e=T({prizeIndex:s,prizeTotal:this.prizeTotal,innerStartAngle:this.innerStartAngle});this.innerStartAngle=e,this.rotateTransition=`transform ${t/1e3}s cubic-bezier(0.250, 0.460, 0.455, 0.995)`,setTimeout(()=>{this.rotateTransition="transform 0s cubic-bezier(0.250, 0.460, 0.455, 0.995)",this.endRotation(),this.$emit("end")},t)}}},x={class:"press-turntable__center"},I={class:"press-turntable__tip"},k={class:"press-turntable__list"},N=["src"],R={key:1,class:"press-turntable__prize__name"};function v(s,t,e,c,l,n){return o(),i("div",{class:h(["press-turntable",e.customClass]),style:u(e.customStyle)},[r("div",x,[r("p",{class:"press-turntable__arrow",style:u(n.rotateStyle)},null,4),r("p",{class:"press-turntable__button",onClick:t[0]||(t[0]=f((...a)=>n.startRotation&&n.startRotation(...a),["stop"]))}," 抽奖 "),r("p",I,[m(" 剩余"),r("span",null,p(e.number),1),m("次 ")])]),r("ul",k,[(o(!0),i(b,null,y(e.list,(a,d)=>(o(),i("li",{key:d,class:h(["press-turntable__prize",[`press-turntable__prize-num${d+1}`]])},[a.img?(o(),i("img",{key:0,src:a.img,class:"press-turntable__prize__img"},null,8,N)):_("",!0),a.name?(o(),i("p",R,p(a.name),1)):_("",!0)],2))),128))])],6)}const $=g(A,[["render",v],["__scopeId","data-v-5feaf2ff"]]),q=[{img:"https://igame-10037599.cos.ap-shanghai.myqcloud.com/22587980-4eec-3b79-b0df-78a211583fd5",name:"1元"},{img:"https://igame-10037599.cos.ap-shanghai.myqcloud.com/22587980-4eec-3b79-b0df-78a211583fd5",name:"5元"},{img:"https://igame-10037599.cos.ap-shanghai.myqcloud.com/22587980-4eec-3b79-b0df-78a211583fd5",name:"10元"},{img:"https://igame-10037599.cos.ap-shanghai.myqcloud.com/22587980-4eec-3b79-b0df-78a211583fd5",name:"50元"},{img:"https://igame-10037599.cos.ap-shanghai.myqcloud.com/22587980-4eec-3b79-b0df-78a211583fd5",name:"100元"},{img:"https://igame-10037599.cos.ap-shanghai.myqcloud.com/22587980-4eec-3b79-b0df-78a211583fd5",name:"500元"}],B={components:{PressTurnTable:$},data(){return{prizeIndex:1,list:q}},methods:{onStart(){console.log("start")},onEnd(){this.prizeIndex=Math.floor(Math.random()*this.list.length),console.log("end",this.prizeIndex)}}},C={class:"demo-wrap"};function E(s,t,e,c,l,n){const a=S("PressTurnTable");return o(),i("div",C,[z(a,{list:l.list,"prize-index":l.prizeIndex,number:3,onStart:n.onStart,onEnd:n.onEnd},null,8,["list","prize-index","onStart","onEnd"])])}const w=g(B,[["render",E],["__scopeId","data-v-6601bde0"]]);export{w as default};
