import{Q as m,x as P,v as D,N,a0 as A,E as G,R as O,aj as I,_ as M,r as B,o as a,c as i,e as z,k as f,n as S,h as k,F as L,G as g,t as c,d as r,a as E,b as w}from"./index-kFNFdPJ4.js";import{a as F}from"./handler-helper-BKr0zvNe.js";import{s as U,a as v}from"./index-K60Wbt7k.js";import{i as V}from"./h5-handler-amkORNHk.js";import{P as j}from"./press-popup-plus-BG_ZPnNG.js";import{R,G as $}from"./color-DciZLlTH.js";import{g as Q}from"./dialog-mixin-B9ttOf1G.js";const b={show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},useSlot:Boolean,useTitleSlot:Boolean,className:{type:String,default:""},customStyle:{type:String,default:""},asyncClose:Boolean,beforeClose:{type:[null,Function],default:null},theme:{type:String,default:"default"},messageAlign:{type:String,default:""},width:{type:[String,Number],default:""},zIndex:{type:Number,default:2e3},overlay:{type:Boolean,default:!0},overlayStyle:{type:String,default:""},transition:{type:String,default:"scale"},showConfirmButton:{type:Boolean,default:!0},showCancelButton:Boolean,confirmButtonText:{type:String,default:m("confirm")},cancelButtonText:{type:String,default:m("cancel")},confirmButtonColor:{type:String,default:R},cancelButtonColor:{type:String,default:$},closeOnClickOverlay:Boolean,confirmButtonOpenType:{type:String,default:""},...P},q={name:"PressDialogPlus",options:{...D,styleIsolation:"shared"},components:{PressPopup:j,PressButton:N},mixins:[A,Q(b)],props:b,emits:["close","confirm","cancel"],data(){return{utils:G,loading:{confirm:!1,cancel:!1},callback:()=>{}}},watch:{dataShow:{handler(e){e||this.stopLoading()}}},methods:{onConfirm(){this.handleAction("confirm")},onCancel(){this.handleAction("cancel")},onClickOverlay(){this.close("overlay")},close(e){this.dataShow=!1,O(()=>{this.$emit("close",e);const{callback:t}=this;t&&t(e,this)})},stopLoading(){this.loading.confirm=!1,this.loading.cancel=!1},handleAction(e){this.$emit(e,{dialog:this});const{dataAsyncClose:t,dataBeforeClose:n}=this;if(!t&&!n){this.close(e);return}this.loading[e]=!0,n&&I(n(e)).then(d=>{d?this.close(e):this.stopLoading()})}}},H={class:"press-dialog-index"},W={class:"press-dialog__message-text"},Y={key:3,class:"press-hairline--top press-dialog__footer"};function Z(e,t,n,d,s,l){const u=B("PressButton"),p=B("PressPopup");return a(),i("div",H,[z(p,{show:e.dataShow,"z-index":e.dataZIndex,overlay:e.dataOverlay,transition:e.dataTransition,"custom-class":"press-dialog press-dialog--"+e.dataTheme+" "+e.dataClassName,"custom-style":"width: "+s.utils.addUnit(e.dataWidth)+";"+e.dataCustomStyle,"overlay-style":e.dataOverlayStyle,"close-on-click-overlay":e.dataCloseOnClickOverlay,onClose:l.onClickOverlay},{default:f(()=>[e.dataTitle||e.dataUseTitleSlot?(a(),i("div",{key:0,class:S(s.utils.bem2("dialog__header",{isolated:!(e.dataMessage||e.dataUseSlot)}))},[e.dataUseTitleSlot?k(e.$slots,"title",{key:0},void 0,!0):e.dataTitle?(a(),i(L,{key:1},[g(c(e.dataTitle),1)],64)):r("",!0)],2)):r("",!0),e.dataUseSlot?k(e.$slots,"default",{key:1},void 0,!0):e.dataMessage?(a(),i("div",{key:2,class:S(s.utils.bem2("dialog__message",[e.dataTheme,e.dataMessageAlign,{hasTitle:e.dataTitle}]))},[E("span",W,c(e.dataMessage),1)],2)):r("",!0),(a(),i("div",Y,[e.dataShowCancelButton?(a(),w(u,{key:0,size:"large",loading:s.loading.cancel,class:"press-dialog__button press-hairline--right","custom-class":"press-dialog__cancel","custom-style":"color: "+e.dataCancelButtonColor,onClick:l.onCancel},{default:f(()=>[g(c(e.dataCancelButtonText),1)]),_:1},8,["loading","custom-style","onClick"])):r("",!0),e.dataShowConfirmButton?(a(),w(u,{key:1,size:"large",class:"press-dialog__button",loading:s.loading.confirm,"custom-class":"press-dialog__confirm","custom-style":"color: "+e.dataConfirmButtonColor,"open-type":e.dataConfirmButtonOpenType,lang:e.lang,"business-id":e.businessId,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"show-message-card":e.showMessageCard,"app-parameter":e.appParameter,onClick:l.onConfirm,onGetuserinfo:e.onGetUserInfo,onContact:e.onContact,onGetphonenumber:e.onGetPhoneNumber,onError:e.onError,onLaunchapp:e.onLaunchApp,onOpensetting:e.onOpenSetting},{default:f(()=>[g(c(e.dataConfirmButtonText),1)]),_:1},8,["loading","custom-style","open-type","lang","business-id","session-from","send-message-title","send-message-path","send-message-img","show-message-card","app-parameter","onClick","onGetuserinfo","onContact","onGetphonenumber","onError","onLaunchapp","onOpensetting"])):r("",!0)]))]),_:3},8,["show","z-index","overlay","transition","custom-class","custom-style","overlay-style","close-on-click-overlay","onClose"])])}const J=M(q,[["render",Z],["__scopeId","data-v-b8f4a57b"]]);let h=[];const T={selector:"#press-dialog",show:!1,title:"",message:"",className:"",customStyle:"",asyncClose:!1,beforeClose:null,theme:"default",messageAlign:"",width:null,zIndex:100,overlay:!0,overlayStyle:"",transition:"scale",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:m("confirm"),cancelButtonText:m("cancel"),closeOnClickOverlay:!1,confirmButtonOpenType:""};let y=Object.assign({},T);function K(){const e=getCurrentPages();return e[e.length-1]}const o=e=>(e=Object.assign(Object.assign({},y),e),new Promise((t,n)=>{const d=e.context||K();let s=U(d,e.selector);if(delete e.context,delete e.selector,s||(s=V(J,"press-dialog")),s){const l=(p,C)=>{p==="confirm"?t(C):n(C)},u={...e};v(s,u),s.callback=l,s.$vm&&(s.$vm.callback=l),O(()=>{v(s,{show:!0})}),h.push(s)}else console.warn("The press-dialog node is not found, please confirm whether the selector and context are correct")}));function X(e){h=e}function _(e){y=e}F({Dialog:o,queue:h,currentOptions:y,defaultOptions:T,updateQueue:X,updateCurrentOptions:_});const le=o.alert,ie=o.confirm;o.close;o.setDefaultOptions;o.resetDefaultOptions;o.stopLoading;export{o as D,J as P,ie as a,le as s};
