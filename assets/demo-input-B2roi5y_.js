import{K as T,M as B,_ as j,g as H,k as M,P as D,Z as L,h as K,u as N,$ as u,a0 as V,Q as y,a1 as E,r as p,o as r,c,f as S,l as f,i as h,n as a,t as C,d as b,a as d,m as I,b as k,C as w,a2 as A}from"./index-VLx2MJJu.js";const O={placeholder:{type:String,default:""},placeholderStyle:{type:String,default:""},placeholderClass:{type:String,default:""},disabled:Boolean,maxlength:{type:Number,default:-1},cursorSpacing:{type:Number,default:50},autoFocus:Boolean,focus:Boolean,cursor:{type:Number,default:-1},selectionStart:{type:Number,default:-1},selectionEnd:{type:Number,default:-1},adjustPosition:{type:Boolean,default:!0},holdKeyboard:Boolean},q={type:{type:String,default:"text"},password:Boolean,confirmType:{type:String,default:""},confirmHold:Boolean,alwaysEmbed:Boolean},W={autoHeight:Boolean,fixed:Boolean,showConfirmBar:{type:Boolean,default:!0},disableDefaultPadding:{type:Boolean,default:!0}};function U(e){return e&&e.constructor==="Object"?T({"min-height":B(e.minHeight),"max-height":B(e.maxHeight)}):""}const R={inputStyle:U};function v(e,l){"scrollTop"in e?e.scrollTop=l:e.scrollTo(e.scrollX,l)}function Q(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function X(e){v(window,e),v(document.body,e)}function z(e=void 0){let l=this.$parent;for(;l;)if(l.$options&&l.$options.name!==e)l=l.$parent;else return l;return!1}function P(e,l){const t=z.call(e,"PressFormItem"),s=z.call(e,"PressForm");t&&s&&s.validateField(t.prop,()=>{},l)}const Y={name:"PressField",options:{...H,styleIsolation:"shared"},field:!0,components:{PressCell:M,PressIconPlus:D},mixins:[L],props:{...O,...q,...W,size:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},error:Boolean,center:Boolean,isLink:Boolean,leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},autosize:{type:[Boolean,Object],default:!1},required:Boolean,iconClass:{type:String,default:""},clickable:Boolean,inputAlign:{type:String,default:""},customStyle:{type:String,default:""},wrapperStyle:{type:String,default:""},errorMessage:{type:String,default:""},arrowDirection:{type:String,default:""},showWordLimit:Boolean,errorMessageAlign:{type:String,default:""},useLabelSlot:Boolean,readonly:{type:Boolean,observer:"setShowClear"},clearable:{type:Boolean,observer:"setShowClear"},clearTrigger:{type:String,default:"focus"},border:{type:Boolean,default:!0},titleWidth:{type:String,default:"6.2em"},clearIcon:{type:String,default:"clear"},inputClass:{type:String,default:""},rightIconClass:{type:String,default:""},labelClass:{type:String,default:""},...K},emits:["focus","blur","click-icon","click-input","clear","confirm","linechange","keyboardheightchange","input","change","update:modelValue"],data(){return{focused:!1,innerValue:"",showClear:!1,utils:N,computed:R}},watch:{realModelValue:{handler(e){this.innerValue=e,u(this.adjustSize)}}},created(){this.innerValue=this.realModelValue},mounted(){u(this.adjustSize)},methods:{onInput(e){const l=V(e);this.innerValue=l,this.setShowClear(),this.emitChange(),u(this.adjustSize)},onFocus(e){this.focused=!0,this.setShowClear(),this.$emit("focus",y(e)),u(this.adjustSize)},onBlur(e){this.focused=!1,this.$emit("blur",y(e)),P(this,"blur"),u(this.adjustSize),setTimeout(()=>{this.setShowClear()},200)},onClickIcon(){this.$emit("click-icon")},onClickInput(e){this.$emit("click-input",y(e))},onClear(){this.innerValue="",this.setShowClear(),u(()=>{this.emitChange(),this.$emit("clear","")})},onConfirm(e){const l=V(e);this.innerValue=l,this.setShowClear(),this.$emit("confirm",l)},setValue(e){this.innerValue=e,this.setShowClear(),e===""&&(this.innerValue=""),this.emitChange()},onLineChange(e){this.$emit("linechange",y(e))},onKeyboardHeightChange(e){this.$emit("keyboardheightchange",y(e))},emitChange(){u(()=>{this.emitModelValue(this.innerValue),this.$emit("change",this.innerValue),P(this,"change")})},setShowClear(){const{clearable:e,readonly:l,clearTrigger:t}=this,{focused:s,innerValue:i}=this;let n=!1;e&&!l&&(n=!!i&&(t==="always"||t==="focus"&&s)),this.showClear=n},adjustSize(){let{input:e}=this.$refs;if(!(this.type==="textarea"&&this.autosize)||!e||(e.style||(e=e.$el),!e||!e.style))return;const l=Q();e.style.height="auto";let t=e.scrollHeight;if(E(this.autosize)){const{maxHeight:s,minHeight:i}=this.autosize;s&&(t=Math.min(t,s)),i&&(t=Math.max(t,i))}t&&(e.style.height=`${t}px`,X(l))},noop(){}}},Z=["fixed","focus","cursor","value","auto-focus","disabled","maxlength","placeholder","placeholder-style","placeholder-class","auto-height","cursor-spacing","adjust-position","show-confirm-bar","hold-keyboard","selection-end","selection-start","disable-default-padding"],G=["type","focus","cursor","value","auto-focus","disabled","maxlength","placeholder","placeholder-style","placeholder-class","confirm-type","confirm-hold","hold-keyboard","cursor-spacing","adjust-position","selection-end","selection-start","always-embed","password"],J={class:"press-field__button"},_={key:0,class:"press-field__word-limit"};function x(e,l,t,s,i,n){const m=p("press-icon-plus"),g=p("press-cell");return r(),c("div",{class:a(["press-field-index",e.customClass]),style:I(t.wrapperStyle)},[S(g,{size:t.size,icon:t.leftIcon,center:t.center,border:t.border,"is-link":t.isLink,required:t.required,clickable:t.clickable,"title-width":t.titleWidth,"title-style":t.label||t.useLabelSlot?"margin-right: 12px;":"display: none;","use-title-slot":!!(t.useLabelSlot||t.label),"custom-style":t.customStyle,"arrow-direction":t.arrowDirection,"custom-class":"press-field"},{icon:f(()=>[h(e.$slots,"left-icon",{},void 0,!0)]),title:f(()=>[t.label?(r(),c("div",{key:0,class:a(t.labelClass+" "+i.utils.bem2("field__label",{disabled:e.disabled}))},C(t.label),3)):t.useLabelSlot?h(e.$slots,"label",{key:1},void 0,!0):b("",!0)]),default:f(()=>[d("div",{class:a([i.utils.bem2("field__body",[e.type])])},[d("div",{class:a([i.utils.bem2("field__control",[t.inputAlign,"custom"])]),onClick:l[0]||(l[0]=(...o)=>n.onClickInput&&n.onClickInput(...o))},[h(e.$slots,"input",{},void 0,!0)],2),e.type==="textarea"?(r(),c("textarea",{key:0,ref:"input",class:a([i.utils.bem2("field__control",[t.inputAlign,e.type,{disabled:e.disabled,error:t.error}]),t.inputClass]),fixed:e.fixed,focus:e.focus,cursor:e.cursor,value:i.innerValue,"auto-focus":e.autoFocus,disabled:e.disabled||t.readonly,maxlength:e.maxlength,placeholder:e.placeholder,"placeholder-style":e.placeholderStyle,"placeholder-class":""+i.utils.bem2("field__placeholder",{error:t.error,disabled:e.disabled}),"auto-height":!!t.autosize,style:I(""+i.computed.inputStyle(t.autosize)),"cursor-spacing":e.cursorSpacing,"adjust-position":e.adjustPosition,"show-confirm-bar":e.showConfirmBar,"hold-keyboard":e.holdKeyboard,"selection-end":e.selectionEnd,"selection-start":e.selectionStart,"disable-default-padding":e.disableDefaultPadding,onInput:l[1]||(l[1]=(...o)=>n.onInput&&n.onInput(...o)),onClick:l[2]||(l[2]=(...o)=>n.onClickInput&&n.onClickInput(...o)),onBlur:l[3]||(l[3]=(...o)=>n.onBlur&&n.onBlur(...o)),onFocus:l[4]||(l[4]=(...o)=>n.onFocus&&n.onFocus(...o)),onConfirm:l[5]||(l[5]=(...o)=>n.onConfirm&&n.onConfirm(...o)),onLinechange:l[6]||(l[6]=(...o)=>n.onLineChange&&n.onLineChange(...o)),onKeyboardheightchange:l[7]||(l[7]=(...o)=>n.onKeyboardHeightChange&&n.onKeyboardHeightChange(...o))},null,46,Z)):(r(),c("input",{key:1,ref:"input",class:a([i.utils.bem2("field__control",[t.inputAlign,{disabled:e.disabled,error:t.error}]),t.inputClass]),type:e.type,focus:e.focus,cursor:e.cursor,value:i.innerValue,"auto-focus":e.autoFocus,disabled:e.disabled||t.readonly,maxlength:e.maxlength,placeholder:e.placeholder,"placeholder-style":e.placeholderStyle,"placeholder-class":""+i.utils.bem2("field__placeholder",{error:t.error}),"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"hold-keyboard":e.holdKeyboard,"cursor-spacing":e.cursorSpacing,"adjust-position":e.adjustPosition,"selection-end":e.selectionEnd,"selection-start":e.selectionStart,"always-embed":e.alwaysEmbed,password:e.password||e.type==="password",onInput:l[8]||(l[8]=(...o)=>n.onInput&&n.onInput(...o)),onClick:l[9]||(l[9]=(...o)=>n.onClickInput&&n.onClickInput(...o)),onBlur:l[10]||(l[10]=(...o)=>n.onBlur&&n.onBlur(...o)),onFocus:l[11]||(l[11]=(...o)=>n.onFocus&&n.onFocus(...o)),onConfirm:l[12]||(l[12]=(...o)=>n.onConfirm&&n.onConfirm(...o)),onKeyboardheightchange:l[13]||(l[13]=(...o)=>n.onKeyboardHeightChange&&n.onKeyboardHeightChange(...o))},null,42,G)),i.showClear?(r(),k(m,{key:2,name:t.clearIcon,class:"press-field__clear-root press-field__icon-root",onClick:n.onClear},null,8,["name","onClick"])):b("",!0),d("div",{class:"press-field__icon-container",onClick:l[14]||(l[14]=(...o)=>n.onClickIcon&&n.onClickIcon(...o))},[t.rightIcon||t.icon?(r(),k(m,{key:0,name:t.rightIcon||t.icon,class:a("press-field__icon-root "+t.iconClass),"custom-class":t.rightIconClass},null,8,["name","class","custom-class"])):b("",!0),h(e.$slots,"right-icon",{},void 0,!0),h(e.$slots,"icon",{},void 0,!0)]),d("div",J,[h(e.$slots,"button",{},void 0,!0)])],2),t.showWordLimit&&e.maxlength?(r(),c("div",_,[d("div",{class:a([i.utils.bem2("field__word-num",{full:i.innerValue.length>=e.maxlength})])},C(i.innerValue.length>=e.maxlength?e.maxlength:i.innerValue.length),3),w("/"+C(e.maxlength),1)])):b("",!0),t.errorMessage?(r(),c("div",{key:1,class:a([i.utils.bem2("field__error-message",[t.errorMessageAlign,{disabled:e.disabled,error:t.error}])])},C(t.errorMessage),3)):b("",!0)]),_:3},8,["size","icon","center","border","is-link","required","clickable","title-width","title-style","use-title-slot","custom-style","arrow-direction"])],6)}const $=j(Y,[["render",x],["__scopeId","data-v-d40adaf3"]]),ee={i18n:{"zh-CN":{custom:"自定义",mockData:"自定义数据"},"en-US":{custom:"Custom",mockData:"Custom Data"}},components:{PressField:$,PressButton:A},props:{value:{type:String,default:""},sectionStyle:{type:String,default:"margin: 0;background: #f7f8fa;"},headerStyle:{type:String,default:"background: #f7f8fa;"},autosize:{type:[Boolean,Object],default:()=>({maxHeight:600,minHeight:50})}},data(){return{inputValue:this.value}},watch:{value:{handler(e){this.inputValue=e}}},mounted(){},methods:{onClearInput(){this.inputValue=""},onConfirmInput(){this.$emit("confirm",this.inputValue)}}},te={class:"input__wrap"},le={class:"input__buttons"};function ne(e,l,t,s,i,n){const m=p("PressField"),g=p("PressButton"),o=p("demo-block");return r(),k(o,{title:e.t("mockData"),"section-style":t.sectionStyle,"header-style":t.headerStyle},{default:f(()=>[d("div",te,[S(m,{modelValue:i.inputValue,"onUpdate:modelValue":l[0]||(l[0]=F=>i.inputValue=F),type:"textarea",autosize:t.autosize,placeholder:"请输入数据"},null,8,["modelValue","autosize"]),d("div",le,[S(g,{size:"small","custom-style":"margin-left: 0; margin-right: 8px",onClick:n.onClearInput},{default:f(()=>[w(" 清空 ")]),_:1},8,["onClick"]),S(g,{type:"primary","custom-style":"margin: 0;",size:"small",onClick:n.onConfirmInput},{default:f(()=>[w(" 确定 ")]),_:1},8,["onClick"])])])]),_:1},8,["title","section-style","header-style"])}const ie=j(ee,[["render",ne],["__scopeId","data-v-7b74f988"]]);export{ie as D};
