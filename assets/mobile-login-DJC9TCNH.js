import{g as D}from"./act-bem-hi9TDZSH.js";import{_ as w,o as n,c as g,x as s,a as l,t as d,d as r,A as h,ac as m,f as u,n as Q,r as p}from"./index-BZexHo5h.js";import{l as y}from"./loader-unity-DucQBRcu.js";import"./tslib.es6-bc7be52f-C33s8C00.js";import"./little-loader-BcSYYlxs.js";import"./loader-DBQ4z0vx.js";const _={dialog:"tip-toc-dialog-wrap",main:"tip-toc-bottomdialog",close:"tip-toc-dialog-close",title:"tip-toc-dialog-title",login:"tip-toc-login",text:"public-text",role:"tip-toc-dialog-role",back:"tip-toc-dialog-return","wx-login":"tip-toc-wechat-login","wx-login-img":"tip-toc-wechat-login-img","wx-login-tip":"tip-toc-wechat-login-tips",save:"tip-toc-press-save","qq-login-img":"tip-toc-qq-login-img"};function L(t,o){return D(t,_,o)}const A={WX_IMAGE:"https://image-1251917893.file.myqcloud.com/igame/common/image/wx.png",QQ_IMAGE:"https://image-1251917893.file.myqcloud.com/igame/common/image/qq.png",WX_TEXT:"微信区登录",QQ_TEXT:"QQ区登录"},v={name:"PressMobileLogin",props:{showQQ:{type:Boolean,default:!0},showWX:{type:Boolean,default:!0},currentUrl:{type:String,default:""},loader:{type:Function,default:null},showChooseDialog:{type:Boolean,default:!1},showScanDialog:{type:Boolean,default:!1},showTipDialog:{type:Boolean,default:!1},destroyedWhenClosed:{type:Boolean,default:!1},scanCodeType:{type:String,default:"WX"},tipTitle:{type:String,default:"微信中不支持QQ区账号登录"},tipImage:{type:String,default:"https://image-1251917893.file.myqcloud.com/tipcomm/public_dialog-img/wx-zy.jpg"},useTipClass:{type:Boolean,default:!1},watchCurrentUrl:{type:Boolean,default:!0}},emits:["dialogVisibleEvent","jumpToLoginQQ","jumpToLoginWX","update:showChooseDialog","update:showScanDialog","update:showTipDialog"],data(){return{qrcodeSrc:"",hideCanvas:!1,LOGIN_CONFIG:A}},watch:{currentUrl:{handler(){if(!this.watchCurrentUrl)return;const t=document.getElementById("qrcodeid");t&&(t.innerHTML=""),this.init()}}},mounted(){this.init()},methods:{init(){this.loader("https://image-1251917893.file.myqcloud.com/commjs/qrcode.min.js",()=>{new QRCode("qrcodeid",{text:this.currentUrl,width:180,height:180,correctLevel:QRCode.CorrectLevel.M});const t=window.document.getElementById("qrcodeid");if(t){console.log("qrcode",t);const o=t.getElementsByTagName("canvas");o&&o.length>0&&o[0]&&(this.qrcodeSrc=o[0].toDataURL("image/png"),this.hideCanvas=!0)}})},closeDialog(){if(this.$emit("dialogVisibleEvent",!1),this.$emit("update:showChooseDialog",!1),this.$emit("update:showScanDialog",!1),this.$emit("update:showTipDialog",!1),this.destroyedWhenClosed){const o=document.getElementById("tip-dialog-login");o&&o.parentNode.removeChild(o)}},jumpToLoginQQ(){this.$emit("jumpToLoginQQ")},jumpToLoginWX(){this.$emit("jumpToLoginWX")},closeScanDialog(){this.$emit("update:showScanDialog",!1),this.$emit("update:showChooseDialog",!0)},closeTipDialog(){this.$emit("update:showTipDialog",!1),this.$emit("update:showChooseDialog",!0)},getActClass(...t){return L(this.useTipClass,t)}}},q={id:"tip-dialog-login"},x=["src"],I=["src"],S=["src"],X=["src"];function k(t,o,c,C,i,e){return n(),g("div",q,[c.showChooseDialog?(n(),g("div",{key:0,class:s([e.getActClass("dialog")])},[l("div",{class:s([e.getActClass("main")])},[l("a",{class:s([e.getActClass("close")]),onClick:o[0]||(o[0]=(...a)=>e.closeDialog&&e.closeDialog(...a))},null,2),l("h4",{class:s([e.getActClass("title")])}," 登录游戏账号 ",2),l("div",{class:s([e.getActClass("login")])},[c.showQQ?(n(),g("a",{key:0,onClick:o[1]||(o[1]=(...a)=>e.jumpToLoginQQ&&e.jumpToLoginQQ(...a))},[l("img",{src:i.LOGIN_CONFIG.QQ_IMAGE},null,8,x),l("span",{class:s([e.getActClass("text")])},d(i.LOGIN_CONFIG.QQ_TEXT),3)])):r("",!0),c.showWX?(n(),g("a",{key:1,onClick:o[2]||(o[2]=(...a)=>e.jumpToLoginWX&&e.jumpToLoginWX(...a))},[l("img",{src:i.LOGIN_CONFIG.WX_IMAGE},null,8,I),l("span",{class:s([e.getActClass("text")])},d(i.LOGIN_CONFIG.WX_TEXT),3)])):r("",!0)],2)],2)],2)):r("",!0),h(l("div",{class:s([e.getActClass("dialog")])},[l("div",{class:s([e.getActClass("role")])},[l("a",{class:s([e.getActClass("back")]),onClick:o[3]||(o[3]=(...a)=>e.closeScanDialog&&e.closeScanDialog(...a))},"返回",2),l("h3",{class:s([e.getActClass("title")])}," 请使用"+d(c.scanCodeType=="QQ"?"QQ":"微信")+"扫码打开页面 ",3),l("a",{class:s([e.getActClass("close")]),onClick:o[4]||(o[4]=(...a)=>e.closeScanDialog&&e.closeScanDialog(...a))},null,2),l("div",{class:s([e.getActClass("wx-login")])},[h(l("div",{id:"qrcodeid",class:s([e.getActClass("wx-login-img")])},null,2),[[m,!i.hideCanvas]]),i.qrcodeSrc?(n(),g("img",{key:0,src:i.qrcodeSrc,class:s([e.getActClass("wx-login-img")]),style:{display:"inline-block"}},null,10,S)):r("",!0),l("div",{class:s([e.getActClass("wx-login-tip")])},[l("p",{class:s([e.getActClass("save")])}," 截图或长按保存图片 ",2),l("span",null,"使用"+d(c.scanCodeType=="QQ"?"QQ":"微信")+"扫码打开访问页面",1)],2)],2)],2)],2),[[m,c.showScanDialog]]),h(l("div",{class:s([e.getActClass("dialog")])},[l("div",{class:s([e.getActClass("role")])},[l("a",{class:s([e.getActClass("back")]),onClick:o[5]||(o[5]=(...a)=>e.closeTipDialog&&e.closeTipDialog(...a))},"返回",2),l("h3",{class:s([e.getActClass("title")])},d(c.tipTitle),3),l("a",{class:s([e.getActClass("close")]),onClick:o[6]||(o[6]=(...a)=>e.closeTipDialog&&e.closeTipDialog(...a))},null,2),l("div",{class:s([e.getActClass("wx-login")])},[l("img",{src:c.tipImage,mode:"widthFix",class:s([e.getActClass("qq-login-img")])},null,10,X)],2)],2)],2),[[m,c.showTipDialog]])])}const W=w(v,[["render",k],["__scopeId","data-v-cd5f9461"]]),b={components:{PressMobileLogin:W},data(){let t="https://baidu.com",o=!1;return t=document.location.href,t.indexOf("http://localhost")>-1&&(t="https://novlan1.github.io/press-ui-demo-vue2/"),o=!0,{loaderUnity:y,showChooseDialog:o,showScanDialog:!1,showTipDialog:!1,currentUrl:t,scanCodeType:"WX",showQQ:!0,showWX:!0}},mounted(){setTimeout(()=>{this.currentUrl="https://www.qq.com"},2e3)},methods:{jumpToLoginWX(){this.onTip("[jumpToLoginWX]"),this.showChooseDialog=!1,this.showScanDialog=!0},jumpToLoginQQ(){this.onTip("[jumpToLoginQQ]"),this.showChooseDialog=!1,this.showTipDialog=!0},closeDialog(){this.onTip("[closeDialog]")},showDialog(){this.showChooseDialog=!0},onTip(t){this.$toast({message:t,zIndex:1e4})}}},j={class:"demo-wrap"};function B(t,o,c,C,i,e){const a=p("press-cell"),f=p("demo-block"),T=p("PressMobileLogin");return n(),g("div",j,[u(f,{title:t.t("basicUsage")},{default:Q(()=>[u(a,{title:"展示","is-link":"",onClick:e.showDialog},null,8,["onClick"])]),_:1},8,["title"]),u(T,{loader:i.loaderUnity,"show-choose-dialog":i.showChooseDialog,"show-scan-dialog":i.showScanDialog,"show-tip-dialog":i.showTipDialog,"current-url":i.currentUrl,"show-q-q":i.showQQ,"show-w-x":i.showWX,"scan-code-type":i.scanCodeType,onJumpToLoginWX:e.jumpToLoginWX,onJumpToLoginQQ:e.jumpToLoginQQ,onCloseDialog:e.closeDialog},null,8,["loader","show-choose-dialog","show-scan-dialog","show-tip-dialog","current-url","show-q-q","show-w-x","scan-code-type","onJumpToLoginWX","onJumpToLoginQQ","onCloseDialog"])])}const F=w(b,[["render",B]]);export{F as default};
