import{m as _,_ as f,k as y,P as v,l as C,G as m,y as x,r as k,c as g,o as S,e as P,b as h,h as u,A as d,B as p,n as c}from"./index-LX1opRXz.js";import{C as E,P as i,a as B}from"./relation-dUVV9Di7.js";import{g as I}from"./rect-CKdGhnaB.js";function r({height:e,duration:s}){return[`height: ${e};`,`transition: height ${s}ms ease-in-out 0ms, top ${s}ms ease-in-out 0ms, -webkit-transform ${s}ms ease-in-out 0ms, transform ${s}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function A(e,s,t,a){if(s){if(a===0)e.animationStyle=r({height:"auto",duration:0});else{const l=t?300:1;e.animationStyle=r({height:`${a}px`,duration:l}),setTimeout(()=>{e.animationStyle=r({height:"auto",duration:0})},l)}return}const n=1;e.animationStyle=r({height:`${a}px`,duration:n}),_(()=>{e.animationStyle=r({height:0,duration:300})})}function w(e,s,t){I(e,".press-collapse-item__content").then(a=>a.height).then(a=>{A(e,s,t,a)})}const $={name:"PressCollapseItem",options:{...C,styleIsolation:"shared"},components:{PressCell:v},mixins:[E(i)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},titleStyle:{type:[String,Object],default:""},contentStyle:{type:[String,Object],default:""},contentClass:{type:String,default:""},...y},emits:[],data(){const{defaultExpandAll:e}=this[i]||{};return{expanded:!!e,animation:{},mounted:!1,animationStyle:e?"height: auto;":"height: 0;"}},computed:{collapseItemClass(){const{disabled:e,expanded:s}=this;return m.bem2("collapse-item__title",{disabled:e,expanded:s})},collapseItemCustomClass(){let e="";return e=this.collapseItemClass,e},collapseItemContentStyle(){return x(this.contentStyle)},wrapperClass(){return m.bem2("collapse-item__wrapper")}},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[i])return;const{value:e,accordion:s}=this[i],{children:t=[]}=this[i],{name:a}=this,n=t.indexOf(this),l=a??n,o=s?e===l:(e||[]).some(b=>b===l);o!==this.expanded&&w(this,o,this.mounted),this.expanded=o},onClick(){if(this.disabled)return;const{name:e,expanded:s}=this,t=this[i].children.indexOf(this),a=e??t;this[i].switch(a,!s)}}};function z(e,s,t,a,n,l){const o=k("PressCell");return S(),g("div",{class:c(e.customClass+" press-collapse-item "+(e.index!==0?"press-hairline--top":""))},[P(o,{size:t.size,title:t.title,"title-class":t.titleClass,icon:t.icon,value:t.value,label:t.label,"is-link":t.isLink,clickable:t.clickable,border:t.border&&n.expanded,"custom-class":l.collapseItemCustomClass,"custom-style":t.titleStyle,"hover-class":"press-cell--hover",center:"",onClick:l.onClick},{title:u(()=>[d(e.$slots,"title",{},void 0,!0)]),"right-icon":u(()=>[d(e.$slots,"right-icon",{},void 0,!0)]),default:u(()=>[d(e.$slots,"value",{},void 0,!0)]),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","custom-style","onClick"]),h("div",{class:c(l.wrapperClass),style:p(n.animationStyle)},[h("div",{class:c(["press-collapse-item__content",t.contentClass]),style:p(l.collapseItemContentStyle)},[d(e.$slots,"default",{},void 0,!0)],6)],6)],2)}const R=f($,[["render",z],["__scopeId","data-v-8da49fa6"]]),O={name:"PressCollapse",options:{...C},mixins:[B(i)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...y},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach(e=>{e.updateExpanded()})},switch(e,s){const{accordion:t,value:a}=this,n=e;t?e=s?e:"":e=s?(a||[]).concat(e):(a||[]).filter(l=>l!==e),s?this.$emit("open",n):this.$emit("close",n),this.$emit("change",e),this.$emit("input",e)}}};function N(e,s,t,a,n,l){return S(),g("div",{class:c(e.customClass+" press-collapse "+(t.border?"press-hairline--top-bottom":""))},[d(e.$slots,"default")],2)}const T=f(O,[["render",N]]);export{R as P,T as a};
