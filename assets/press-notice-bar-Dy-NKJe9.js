import{C as k,_ as b,v as p,A as _,x as I,O as w,G as S,y as m,r as B,o as a,c as i,n as o,l as h,b as u,h as d,a as f,H as N,t as P,d as y,F as v,e as x}from"./index-BIszYdsF.js";import{g as C}from"./rect-B0viD194.js";import{g as D}from"./event-BQiVdx1g.js";function T(t){return k({color:t.color,"background-color":t.backgroundColor,background:t.background})}const W={rootStyle:T},X={name:"PressNoticeBar",options:{...p,styleIsolation:"shared"},components:{PressIconPlus:_},props:{text:{type:String,default:""},mode:{type:String,default:""},url:{type:String,default:""},openType:{type:String,default:"navigate"},delay:{type:Number,default:1},speed:{type:Number,default:60},scrollable:{type:Boolean,default:!1},leftIcon:{type:String,default:""},color:{type:String,default:""},backgroundColor:{type:String,default:""},background:{type:String,default:""},wrapable:Boolean,...I},emits:["close","click"],data(){return{show:!0,duration:0,animationDuration:0,contentWidth:0,translateX:0,isNotInUni:w()}},computed:{noticeBarClass(){const{mode:t,wrapable:n,customClass:e}=this;return`${e} ${S.bem2("notice-bar",{withicon:t,wrapable:n})}`},noticeBarStyle(){const{color:t,backgroundColor:n,background:e}=this;return W.rootStyle({color:t,backgroundColor:n,background:e})},animationStyle(){const{animationDuration:t,delay:n,translateX:e}=this;return[`transform: translateX(${e}px);`,`transition: -webkit-transform ${t}ms linear ${n}ms, transform ${t}ms linear ${n}ms;`,"transform-origin: 50% 50% 0px;"].join(" ")},leftIconClass(){return"press-notice-bar__left-icon"},leftIconCustomClass(){return""},rightIconClass(){return"press-notice-bar__right-icon"},rightIconCustomClass(){return""}},watch:{text:{handler(){this.init()}},speed:{handler(){this.init()}}},created(){},mounted(){this.init()},destroyed(){this.onDestroyed()},unmounted(){this.onDestroyed()},methods:{onDestroyed(){this.timer&&clearTimeout(this.timer)},init(){m(()=>{Promise.all([C(this,".press-notice-bar__content"),C(this,".press-notice-bar__wrap")]).then(t=>{const[n,e]=t,{speed:c,scrollable:r}=this;if(!(n==null||e==null||!n.width||!e.width||r===!1)&&(r||e.width<n.width)){const s=(e.width+n.width)/c*1e3;this.wrapWidth=e.width,this.contentWidth=n.width,this.duration=s,this.scroll(!0)}})})},scroll(t=!1){this.timer&&clearTimeout(this.timer),this.timer=null,this.translateX=t?0:this.wrapWidth,this.animationDuration=0,m(()=>{this.translateX=-this.contentWidth,this.animationDuration=this.duration}),this.timer=setTimeout(()=>{this.scroll()},this.duration)},onClickIcon(t){this.mode==="closeable"&&(this.timer&&clearTimeout(this.timer),this.timer=null,this.show=!1,this.$emit("close",D(t)))},onClick(t){this.$emit("click",t)}}},V={class:"press-notice-bar-index"},F={class:"press-notice-bar__wrap"},R=["url","open-type"];function U(t,n,e,c,r,s){const l=B("PressIconPlus");return a(),i("div",V,[r.show?(a(),i("div",{key:0,class:o(s.noticeBarClass),style:h(s.noticeBarStyle),onClick:n[0]||(n[0]=(...g)=>s.onClick&&s.onClick(...g))},[e.leftIcon?(a(),u(l,{key:0,name:e.leftIcon,class:o([s.leftIconClass]),"custom-class":s.leftIconCustomClass},null,8,["name","class","custom-class"])):d(t.$slots,"left-icon",{key:1},void 0,!0),f("div",F,[f("div",{class:o("press-notice-bar__content "+(e.scrollable===!1&&!e.wrapable?"press-ellipsis":"")),style:h(s.animationStyle)},[N(P(e.text)+" ",1),e.text?y("",!0):d(t.$slots,"default",{key:0},void 0,!0)],6)]),e.mode==="closeable"?(a(),u(l,{key:2,class:o([s.rightIconClass]),"custom-class":s.rightIconCustomClass,name:"cross",onClick:s.onClickIcon},null,8,["class","custom-class","onClick"])):e.mode==="link"?(a(),i(v,{key:3},[r.isNotInUni?(a(),u(l,{key:0,class:o([s.rightIconClass]),"custom-class":s.rightIconCustomClass,name:"arrow"},null,8,["class","custom-class"])):(a(),i("navigator",{key:1,url:e.url,"open-type":e.openType},[x(l,{class:o([s.rightIconClass]),"custom-class":s.rightIconCustomClass,name:"arrow"},null,8,["class","custom-class"])],8,R))],64)):d(t.$slots,"right-icon",{key:4},void 0,!0)],6)):y("",!0)])}const O=b(X,[["render",U],["__scopeId","data-v-c9005027"]]);export{O as P};
