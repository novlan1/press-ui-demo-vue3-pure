function r(t,e={}){const o=e.indexKey||"index";return{inject:{[t]:{default:null}},computed:{[o](){const i=this;return i.bindRelation(),i[t]?i[t].children.indexOf(this):null}},watch:{disableBindRelation(i){i||this.bindRelation()}},created(){},mounted(){this.bindRelation()},beforeUnmount(){this.onBeforeMount()},methods:{bindRelation(){if(!this[t]||this[t].children.indexOf(this)!==-1)return;const i=[...this[t].children,this];try{this[t]}catch(n){console.log("err",n)}this[t].children=i},onBeforeMount(){var n;const i=this;i[t]&&(i[t].children=i[t].children.filter(h=>h!==i),(n=i==null?void 0:i.destroyCallback)==null||n.call(i))}}}}function d(t){return{provide(){return{[t]:this}},data(){return{}}}}export{r as C,d as P};
