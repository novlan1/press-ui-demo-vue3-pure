import{P as E}from"./press-popup-CuLGm3NI.js";import{P as w}from"./press-switch-DCabucxz.js";import{P as T}from"./computed-D1yQT3cc.js";import{f as B}from"./functional-DR0jSVbU.js";import{_ as D,r as y,o as n,b,n as S,c as p,F as h,i as f,x as C,w as d,t as a,a as P,d as L,u as I,p as x,e as A}from"./index-C4ERlhP1.js";const O={SWITCH:"switch",CHECKBOX:"checkbox",BUTTON:"button",TAB:"tab",CELL:"cell"},U={...T,tip:{type:String,default:""},cellList:{type:Array,default:()=>[]}};let _;const M={name:"PressPopupCell",options:{virtualHost:!0},components:{PressPopup:E,PressSwitch:w},mixins:[B(U)],props:{},emits:["click","cancel","confirm"],data(){return _=this,{POPUP_CELL_TPE_MAP:O,checkedIndexList:[]}},computed:{computedCellList(){return(this.getPropOrData("cellList")||[]).map((t,o)=>typeof t.description=="string"?{...t,description:[{light:!1,content:t.description,uniqueKey:`${o}-desc-0`}]}:{...t,tabList:(t.tabList||[]).map((l,c)=>({...l,uniqueKey:`${o}-tab-${c}`})),description:(t.description||[]).map((l,c)=>({...l,uniqueKey:`${o}-desc-${c}`}))})}},watch:{cellList:{handler(){this.getCheckedList()},immediate:!0,deep:!0},functionModeData:{handler(){this.getCheckedList()},immediate:!0,deep:!0}},methods:{getCheckedList(){_=this;const t=(this.getPropOrData("cellList")||[]).map((o,l)=>({...o,index:l})).filter(o=>o.checked).map(o=>o.index);this.checkedIndexList=t},emitClick({shouldEmitClick:e=!0,item:t,index:o,options:l={}}){const{click:c}=t,i={item:t,index:o,context:this,...l};typeof c=="function"&&c(i),e&&this.$emit("click",i)},onTabChange(e,t,o,l){this.emitClick({item:e,index:t,options:{tabItem:o,tabIndex:l}})},onClickDescription(e,t){this.emitClick({shouldEmitClick:!1,item:e,index:t,options:{}})},onCheckboxChange(e,t){const o=this.checkedIndexList.indexOf(t)>-1;this.emitClick({item:e,index:t,options:{value:!o}})},onSwitchChange(e,t){this.emitClick({item:this.computedCellList[t],index:t,options:{value:e}})},onClickCell(e,t){const{click:o}=e,{checkedIndexList:l}=this,c={item:e,index:t,context:this};if(e.type===O.CHECKBOX){const i=l.indexOf(t)>-1;c.value=i,i?this.checkedIndexList=l.filter(k=>k!==t):this.checkedIndexList=l.concat([t]).sort()}typeof o=="function"&&o(c),this.$emit("click",c)},onClickBottomButton(){this.$emit("cancel",{context:this}),this.promiseCallback("cancel")},confirm(){this.$emit("confirm",{context:this}),this.promiseCallback("confirm",{checkedIndexList:this.checkedIndexList})},cancel(){this.$emit("cancel",{context:this}),this.promiseCallback("cancel",{checkedIndexList:this.checkedIndexList})},onAsyncConfirm(){const e=_.getPropOrData("asyncConfirm");return e?e({checkedIndexList:_.checkedIndexList,context:_}):!0}}},K=e=>(x("data-v-22a084f6"),e=e(),A(),e),H=["onClick"],N={key:0},q={class:"press-popup-cell__label"},z={class:"press-popup-cell__title"},X={key:0,class:"press-popup-cell__description-wrap"},V=["onClick"],W={class:"press-popup-cell__value"},F={key:1,class:"press-popup-cell__tabs"},R=["onClick"],j=["onClick"],G=K(()=>P("div",{class:"iconfont icon-back"},null,-1)),J={key:0,class:"press-popup-cell__tip"};function Q(e,t,o,l,c,i){const k=y("PressSwitch"),g=y("PressPopup");return n(),b(g,{"is-show":e.innerShow,"show-title":e.getPropOrData("showTitle"),"close-icon":e.getPropOrData("closeIcon"),"arrow-icon":e.getPropOrData("arrowIcon"),title:e.getPropOrData("title"),button:e.getPropOrData("button"),"border-button":e.getPropOrData("borderButton"),"z-index":e.getPropOrData("zIndex"),"popup-class":e.getPropOrData("popupClass"),"close-on-click-overlay":e.getPropOrData("closeOnClickOverlay"),"custom-style":e.getPropOrData("customStyle"),"async-confirm":i.onAsyncConfirm,onConfirm:i.confirm,onCancel:i.cancel},{default:S(()=>[(n(!0),p(h,null,f(i.computedCellList,(s,u)=>(n(),p("div",{key:u,class:C(["press-popup-cell__item",{"press-popup-cell__item--switch":s.type===c.POPUP_CELL_TPE_MAP.SWITCH,"press-popup-cell__item--checkbox":s.type===c.POPUP_CELL_TPE_MAP.CHECKBOX,"press-popup-cell__item--button":s.type===c.POPUP_CELL_TPE_MAP.BUTTON}]),onClick:d(r=>i.onClickCell(s,u),["stop"])},[s.type===c.POPUP_CELL_TPE_MAP.BUTTON?(n(),p("div",N,a(s.label),1)):(n(),p(h,{key:1},[P("div",q,[P("div",z,a(s.label),1),s.description&&s.description.length?(n(),p("div",X,[(n(!0),p(h,null,f(s.description,(r,m)=>(n(),p("span",{key:r.uniqueKey},[P("span",{class:C({"press-popup-cell__description":!0,"press-popup-cell__description--light":r.light}),onClick:d(v=>i.onClickDescription(r,m,s),["stop"])},a(r.content),11,V)]))),128))])):L("",!0)]),P("div",W,[s.type===c.POPUP_CELL_TPE_MAP.SWITCH?(n(),b(k,{key:0,"custom-class":"press-switch--e-sport",open:s.open,disabled:s.disabled||!1,onChange:r=>i.onSwitchChange(r,u)},null,8,["open","disabled","onChange"])):s.type===c.POPUP_CELL_TPE_MAP.TAB?(n(),p("div",F,[(n(!0),p(h,null,f(s.tabList,(r,m)=>(n(),p("div",{key:r.uniqueKey,class:C(["press-popup-cell__tab",{"press-popup-cell__tab--active":s.active===r.value}]),onClick:d(v=>i.onTabChange(s,u,r,m),["stop"])},a(r.label),11,R))),128))])):s.type===c.POPUP_CELL_TPE_MAP.CHECKBOX?(n(),p("div",{key:2,class:C(["press-popup-cell__checkbox",{"press-popup-cell__checkbox--checked":c.checkedIndexList.indexOf(u)>-1}]),onClick:d(r=>i.onCheckboxChange(s,u),["stop"])},null,10,j)):(n(),p(h,{key:3},[I(a(s.value)+" ",1),G],64))])],64))],10,H))),128)),e.getPropOrData("tip")?(n(),p("div",J,a(e.getPropOrData("tip")),1)):L("",!0),e.getPropOrData("bottomButton")?(n(),p("div",{key:1,class:"press-popup-cell__bottom-button",onClick:t[0]||(t[0]=d((...s)=>i.onClickBottomButton&&i.onClickBottomButton(...s),["stop"]))},a(e.getPropOrData("bottomButton")),1)):L("",!0)]),_:1},8,["is-show","show-title","close-icon","arrow-icon","title","button","border-button","z-index","popup-class","close-on-click-overlay","custom-style","async-confirm","onConfirm","onCancel"])}const se=D(M,[["render",Q],["__scopeId","data-v-22a084f6"]]);export{se as P};
