import{P as Te}from"./press-loading-plus-Df-tLDhD.js";import{t as p}from"./index-DfrNFuIM.js";import{_ as ce,z as re,o as i,c as o,a as f,x as g,A as V,d as m,t as y,w as I,p as le,e as ne,r as N,v as b,F as M,i as D,b as H,n as X,f as j,y as U,u as pe}from"./index-BZexHo5h.js";import{g as ge}from"./scroll-DZ_Dh06R.js";import{u as ye}from"./utils-Do31p4kb.js";import{t as Se}from"./time-DadpJyRx.js";import{i as _e,g as ve,b as Le,P as K,S as Z,a as ke,c as Ie,d as be}from"./status-helper-D2zksTPb.js";const we={name:"PressScheduleTeam",props:{scheGroupInfo:{type:Object,default:()=>({})},selectedSchId:{type:String,default:""},isAdmin:{type:Boolean,default:!1},isPreview:{type:Number,default:0},myTeamId:{type:String,default:""},selectedTeamId:{type:String,default:""}},emits:["clickSche","clickVideoIcon"],data(){return{i18nMap:{pending:p("scheduleTree.pending"),emptyTeam:p("scheduleTree.emptyTeam"),quitScore:p("scheduleTree.quitScore")}}},computed:{upTeamInfo(){return this.scheGroupInfo.upTeamInfo||{}},bottomTeamInfo(){return this.scheGroupInfo.downTeamInfo||{}},abnormalTip(){const{abnormalErr:e=!1}=this.scheGroupInfo;return e}},mounted(){},methods:{onClickSche(){this.$emit("clickSche",this.scheGroupInfo.schid,this.scheGroupInfo)},onWatchBattle(){this.$emit("clickVideoIcon",this.scheGroupInfo.schid,this.scheGroupInfo)}}},Ce=e=>(le("data-v-e276a91a"),e=e(),ne(),e),Ee={class:"press-schedule-team"},Re={key:0,class:"press-schedule-team-avatar-preview"},Ae={key:1,class:"press-schedule-team-avatar"},Ne={key:2,class:"press-schedule-team-name-preview"},Me={key:3,class:"press-schedule-team-name"},De={key:4,class:"press-schedule-team-score"},Pe={key:0,class:"press-schedule-team-avatar-preview"},Be={key:1,class:"press-schedule-team-avatar"},Ve={key:2,class:"press-schedule-team-name-preview"},We={key:3,class:"press-schedule-team-name"},Fe={key:4,class:"press-schedule-team-score"},Ge={key:0,class:"press-schedule-team--err-tip"},Oe=Ce(()=>f("div",{class:"press-schedule-team__err-icon"},null,-1)),qe=[Oe],Ye={class:"press-schedule-team-tips"},ze={key:0,class:"press-schedule-team-tip press-schedule-team-tip--bg"},He={key:1,class:"press-schedule-team-tip"},Xe={key:4,class:"press-schedule-team-tip-icon iconfont icon-video-number"};function je(e,a,s,r,c,t){const l=re("lazy");return i(),o("div",Ee,[f("div",{class:g({"press-schedule-team-main":!0,"press-schedule-team-main--selected":s.selectedSchId&&s.selectedSchId==s.scheGroupInfo.schid}),onClick:a[0]||(a[0]=I((...u)=>t.onClickSche&&t.onClickSche(...u),["stop"]))},[f("div",{class:g([{"press-schedule-team-one--lose":[c.i18nMap.emptyTeam,c.i18nMap.pending].includes(t.upTeamInfo.teamname)||t.bottomTeamInfo.isWinner==1||t.upTeamInfo.scoreDesc===c.i18nMap.quitScore,"press-schedule-team-one--active":s.selectedTeamId&&s.selectedTeamId==t.upTeamInfo.teamid||t.upTeamInfo.teamid==s.myTeamId},"press-schedule-team-one--up press-schedule-team-one"])},[t.upTeamInfo.teamAvatarSkeleton?(i(),o("div",Re)):t.upTeamInfo.teamAvatar?V((i(),o("img",Ae,null,512)),[[l,t.upTeamInfo.teamAvatar]]):m("",!0),t.upTeamInfo.teamNameSkeleton?(i(),o("div",Ne)):t.upTeamInfo.teamNameDesc?(i(),o("div",Me,y(t.upTeamInfo.teamNameDesc),1)):m("",!0),t.upTeamInfo.scoreDesc?(i(),o("p",De,y(t.upTeamInfo.scoreDesc),1)):m("",!0)],2),f("div",{class:g([{"press-schedule-team-one--lose":[c.i18nMap.emptyTeam,c.i18nMap.pending].includes(t.bottomTeamInfo.teamname)||t.upTeamInfo.isWinner==1||t.bottomTeamInfo.scoreDesc===c.i18nMap.quitScore,"press-schedule-team-one--active":s.selectedTeamId&&s.selectedTeamId==t.bottomTeamInfo.teamid||t.bottomTeamInfo.teamid==s.myTeamId},"press-schedule-team-one--down press-schedule-team-one"])},[t.bottomTeamInfo.teamAvatarSkeleton?(i(),o("div",Pe)):t.bottomTeamInfo.teamAvatar?V((i(),o("img",Be,null,512)),[[l,t.bottomTeamInfo.teamAvatar]]):m("",!0),t.bottomTeamInfo.teamNameSkeleton?(i(),o("div",Ve)):t.bottomTeamInfo.teamNameDesc?(i(),o("div",We,y(t.bottomTeamInfo.teamNameDesc),1)):m("",!0),t.bottomTeamInfo.scoreDesc?(i(),o("p",Fe,y(t.bottomTeamInfo.scoreDesc),1)):m("",!0)],2),t.abnormalTip?(i(),o("div",Ge,qe)):m("",!0)],2),f("div",Ye,[s.scheGroupInfo.bracketIdDesc?(i(),o("p",ze,y(s.scheGroupInfo.bracketIdDesc),1)):m("",!0),s.scheGroupInfo.timeDesc?(i(),o("p",He,y(s.scheGroupInfo.timeDesc),1)):m("",!0),s.scheGroupInfo.statusDesc?(i(),o("p",{key:2,class:g(["press-schedule-team-tip",{"press-schedule-team-tip--light":s.scheGroupInfo.isStatusHighList}])},y(s.scheGroupInfo.statusDesc),3)):m("",!0),s.scheGroupInfo.showLiveIcon?(i(),o("div",{key:3,class:"press-schedule-team-tip-icon press-schedule-team-tip-icon--green iconfont icon-live",onClick:a[1]||(a[1]=I((...u)=>t.onWatchBattle&&t.onWatchBattle(...u),["stop"]))})):m("",!0),s.scheGroupInfo.showChannelsIcon?(i(),o("div",Xe)):m("",!0)])])}const Ue=ce(we,[["render",je],["__scopeId","data-v-e276a91a"]]),ie={TREE_REF:"scheduleTree",TREE_ID:"scheduleTreeId"},F=ge(ie.TREE_ID),Q=60,Ke=500;function P(e,a=!1){if(!a)return;const s=Array.isArray(e)?e:[e];console.log(s.join(" "))}function Ze({endX:e,context:a,scrollTime:s=0,column:r=1,autoBackToTop:c=!0,setScrollParams:t,needLog:l=!1}){if(e<-Q&&s<r-1)return P("左滑",l),c&&A(),t(s+1),!0;if(e>Q&&s!=0)return P("右滑",l),c&&A(),t(s-1),!0;P("just to touch",l)}function A(e){oe(0,{animation:!0})}function oe(e=0,{animation:a=!0}){const s=Date.now(),r=document==null?void 0:document.querySelector(F);if(!r)return;const c=r.scrollTop;if(c===e)return;if(!a){r.scrollTop=e;return}const t=e-c,l=window.requestAnimationFrame||(d=>setTimeout(d,16)),u=()=>{const d=(Date.now()-s)/Ke;d<1?(r.scrollTop=c+t*d,l(u)):r.scrollTop=e};l(u)}let R=0,C;const J=300,x=2e5;let W=0,$=0,ue=0;function me(){var e;R=((e=document==null?void 0:document.querySelector(F))==null?void 0:e.scrollTop)||0}function de(e,a){const s=document==null?void 0:document.querySelector(F);if(s){if(a){const r=-e,c=Date.now();cancelAnimationFrame(C),C=window.requestAnimationFrame||(l=>setTimeout(l,16));const t=()=>{const l=(Date.now()-c)/300;l<1?(s.scrollTop=R+r*l,C(t)):s.scrollTop=R-e};C(t);return}s.scrollTop=R+e}}function Qe(e){const a=new Date().getTime();ue=(e.endY-$)/(a-W),$=e.endY,W=a}function Je(){let e=0;new Date().getTime()-W<J&&(e=ue*J/2,e=Math.min(x,e),e=Math.max(-x,e),me(),de(e,!0))}const ee="press-schedule-tree-pair--mine",B={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},xe={PENDING:"https://image-1251917893.file.myqcloud.com/Esports/new/user/dd.png",BYE:"https://image-1251917893.file.myqcloud.com/Esports/new/user/team-logo.png",QUIT:"https://image-1251917893.file.myqcloud.com/Esports/new/user/team-logo.png"};let w="",E=!1;const v={endX:0,endY:0};function te(e){return(e==null?void 0:e.schId)||e.schid}function $e(e,a){if(typeof e=="string"){if(e==="left")return 0;if(e==="right")return a-1<0?0:a-1}return e||0}const et={name:"PressScheduleTree",components:{TwoTeamWrap:Ue,PressLoadingPlus:Te},props:{mapClass:{type:String,default:""},customClass:{type:String,default:""},scheList:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isPreview:{type:Number,default:0},myTeamId:{type:String,default:""},selectedSchId:{type:String,default:""},shadow:{type:Boolean,default:!1},autoBackToTop:{type:Boolean,default:!0},resumePosition:{type:[String,Number],default:"right"},showRoundTab:{type:Boolean,default:!0},maxColumns:{type:Number,default:3},tabScrollWidth:{type:String,default:"164"},scheduleScrollWidth:{type:String,default:"164"},showChampion:{type:Boolean,default:!0},championRoundName:{type:String,default:""},championName:{type:String,default:""},championTag:{type:String,default:""},canClickFinalSche:{type:Boolean,default:!1},specialAvatarMap:{type:Object,default:()=>xe},loading:{type:Boolean,default:!1},loadingSize:{type:String,default:"20px"},loadingText:{type:String,default:"加载中..."},finished:{type:Boolean,default:!1},finishedText:{type:String,default:""},winnerName:{type:String,default:p("scheduleTree.champion")},page:{type:Number,default:0},totalPage:{type:Number,default:0},automaticGrouping:{type:Boolean,default:!1}},emits:["clickFinalSche","clickRoundTab","scheduleOnClick","scroll","scrollToLower","clickSche","clickVideoIcon"],data(){return{startX:0,scrollTime:0,touchStartTime:0,pageWidth:"",tabScrollNum:"0",scheduleScrollNum:"0",selectedTeamId:"",scheItemStyle:{},REF_MAP:ie,MY_TEAM_SCHE_PAIR_CLASS:ee,i18nMap:{pending:p("scheduleTree.pending"),champion:p("scheduleTree.champion"),thirdPlace:p("scheduleTree.thirdPlace"),emptyTeam:p("scheduleTree.emptyTeam")}}},options:{virtualHost:!0,styleIsolation:"shared"},computed:{topRowWithErrTip(){let e=!1;const{scheList:a}=this;return e=!a.every(s=>s.every(c=>{const{upScheGroup:{abnormalErr:t}={}}=c;return!t})),e},roundList(){const{scheList:e}=this;return e.map(a=>{var s;return((s=a==null?void 0:a[0])==null?void 0:s.roundInfo)||{}})},schePairList(){var s;const{scheList:e}=this;return(s=e==null?void 0:e.map(r=>r.length))==null?void 0:s.map((r,c)=>Array.from({length:r},(t,l)=>({uniqueKey:`${c}-${l}-teamLenInnerItem`})))},scheGroupList(){const{scheList:e}=this;return e.map(s=>s.reduce((c,t)=>{var l;return c+((l=t.battleList)==null?void 0:l.length)},0))},scrollList(){const{scheGroupList:e,scrollTime:a}=this,s=[0-a];for(let r=1;r<e.length;r++){const c=s[s.length-1];let t;e[r]===e[r-1]?t=c:t=c+1,a===r&&t<0&&(t=0),s.push(t)}return s},fakeRoundList(){const{schePairList:e}=this;return Array.from({length:e.length},(s,r)=>({uniqueKey:`${r}-round`,uniqueKey2:`${r}-round-2`}))},tabWidth(){return this.screenNum*100},column(){const{schePairList:e,showChampion:a}=this;return a?e.length:e.length-1},screenNum(){return Math.ceil((this.column+1)/2)},teamTotal(){return this.scheList.length?2*this.scheList[0].reduce((a,s)=>(a+=s.battleList.length,a),0):0},champTeamInfo(){var t,l,u,d,S;const{scheList:e}=this,a=((t=e==null?void 0:e[e.length-1])==null?void 0:t[0])||{},s=(u=(l=a==null?void 0:a.battleList)==null?void 0:l[0])==null?void 0:u.realStatus,r={teamavatar:this.specialAvatarMap.PENDING,teamname:p("scheduleTree.pending"),score:0};return s==400?r:(((S=(d=a==null?void 0:a.battleList)==null?void 0:d[0])==null?void 0:S.teamList)||[]).find(h=>!!h.isWinner)||r},innerChampionRoundName(){return this.championRoundName?this.championRoundName:this.innerChampionTag},innerChampionName(){return this.championName?this.championName:this.haveNextPage?p("scheduleTree.checkFinal"):this.champTeamInfo.teamname},innerChampionTag(){return this.championTag?this.championTag:this.haveNextPage?"...":!this.automaticGrouping&&this.page!==this.totalPage-1&&this.totalPage>1?p("scheduleTree.groupedChampion",this.winnerName===this.i18nMap.champion):this.winnerName},pagination(){const{page:e,totalPage:a}=this;return{page:e,totalPage:a}},haveNextPage(){const{winnerName:e,automaticGrouping:a,page:s,totalPage:r,i18nMap:c}=this;return e!==c.thirdPlace&&a&&s!==r-1&&r>1}},watch:{column:{handler(e){const a=$e(this.resumePosition,e);this.scrollTime>e-1&&this.setScrollParams(a)}},pagination:{handler(e,a){const{page:s,totalPage:r}=e,{page:c}=a;r>1&&s!==c&&(A(),this.setScrollParams(0))},deep:!0}},created(){},mounted(){setTimeout(()=>{this.locateMyTeam()},0),window==null||window.addEventListener("mouseup",this.unwatchMouseUp)},updated(){},destroyed(){this.onDestroyed()},unmounted(){this.onDestroyed()},methods:{onDestroyed(){window==null||window.removeEventListener("mouseup",this.unwatchMouseUp)},getColumnStyle(e){const{maxColumns:a}=this;return e>a-1?{height:0,overflow:"hidden"}:e==a-1?{height:"calc(100% - 174px)",overflow:"unset"}:e==1?{height:"calc(100% - 58px)",overflow:"unset"}:e<0?{height:0,overflow:"hidden"}:{height:"auto",overflow:"unset"}},jump2Finals(){(this.canClickFinalSche||this.haveNextPage)&&this.$emit("clickFinalSche")},hasMyTeam(e,a){var c,t,l;if(e>0)return;const s=((t=(c=this.scheList)==null?void 0:c[e])==null?void 0:t[a])||{};if(((l=s==null?void 0:s.battleList)==null?void 0:l.map(u=>{var d;return(d=u==null?void 0:u.teamList)==null?void 0:d.map(S=>S.teamid)}).flat().filter(u=>!!u)).includes(this.myTeamId))return!0},clickRoundTab(e){if(!this.isAdmin)return;const a=this.roundList[e]||{};this.$emit("clickRoundTab",(a==null?void 0:a.round_type)||"",a)},locateMyTeam(){!this.myTeamId||this.teamTotal<=8||this.innerLocateOnSche(ee)},innerLocateOnSche(e){var s;const a=(s=document==null?void 0:document.querySelectorAll)==null?void 0:s.call(document,`.${e}`)[0];a&&oe(a.offsetTop,{animation:!1})},getBoType(e){var a;return`BO${((a=this.roundList[e])==null?void 0:a.bo_type)||""}`},getRoundName(e){var a;return((a=this.roundList[e])==null?void 0:a.round_name)||""},start(e){var s;E=!0,w="";const a=((s=e.touches)==null?void 0:s[0])||e;this.startX=a==null?void 0:a.clientX,this.startY=a==null?void 0:a.clientY,this.touchStartTime=Date.now(),this.$emit("scheduleOnClick"),me()},move(e){var c;if(!E)return;const a=((c=e.touches)==null?void 0:c[0])||e,s=a==null?void 0:a.clientX;v.endX=s-this.startX,v.endY=(a==null?void 0:a.clientY)-this.startY,w=B.HORIZONTAL,(Math.abs(v.endY)>Math.abs(v.endX)||Math.abs(v.endY)>120)&&(w=B.VERTICAL,Qe(v),de(-v.endY,!1))},end(){if(E=!1,w===B.VERTICAL){w="",Je();return}if(Ze({endX:v.endX,context:this,autoBackToTop:this.autoBackToTop,setScrollParams:this.setScrollParams,scrollTime:this.scrollTime,column:this.column})){v.endX=0,this.$emit("scroll",this.scrollTime,this.column+1);return}v.endX=0},onScroll(){},scrollToLower(){this.$emit("scrollToLower",this.scrollTime,this.column+1)},clickSche(e,a,s,r){var t,l;this.resetSelect();const c=((l=(t=this.scheList)==null?void 0:t[s])==null?void 0:l[r])||{};this.$emit("clickSche",e,a,c)},clickVideoIcon(e,a,s,r){var t,l;const c=((l=(t=this.scheList)==null?void 0:t[s])==null?void 0:l[r])||{};this.$emit("clickVideoIcon",e,a,c)},resetSelect(){this.selectedTeamId=""},setScrollParams(e){const{tabScrollWidth:a,scheduleScrollWidth:s}=this;this.tabScrollNum=-e*a,this.scheduleScrollNum=-e*s,this.scrollTime=e},setScrollTime(e){this.setScrollParams(e)},scrollToOneSche(e){e&&this.innerLocateOnSche(`press-schedule-tree-pair--id-${e}`)},setBackToTop(){A()},unwatchMouseUp(){E=!1},getTreePairClass(e,a){var c,t;const{scheList:s}=this,r=s[e][a];return ye.bem2("schedule-tree-pair",[{mine:this.hasMyTeam(e,a),hidden:r.hidden},`id-${te(r.battleList[0])}`,(c=r.battleList)!=null&&c[1]?`id-${te((t=r.battleList)==null?void 0:t[1])}`:""])}}},G=e=>(le("data-v-3dd48b5a"),e=e(),ne(),e),tt=G(()=>f("div",{class:"press-schedule-tree-tab-mask"},null,-1)),st=["onClick"],at=["onClick"],ct=["onClick"],rt=G(()=>f("div",{class:"press-schedule-tree-tab-icon"},null,-1)),lt={class:"press-schedule-tree-tab-title"},nt=G(()=>f("div",{class:"press-schedule-tree-tab-icon"},null,-1)),it=["id"],ot={class:"press-schedule-tree-pair"},ut={class:"press-schedule-team-name"},mt={key:1,class:"press-schedule-team-score"},dt={class:"press-schedule-tree__loading"},ht={class:"press-schedule-tree__finished"};function ft(e,a,s,r,c,t){const l=N("TwoTeamWrap"),u=N("PressLoadingPlus"),d=N("scroll-view"),S=re("lazy");return i(),o("div",{class:g(["press-schedule-tree",s.mapClass,s.customClass])},[tt,s.showRoundTab?(i(),o("div",{key:0,class:"press-schedule-tree-tabs",style:b({width:`${t.tabWidth}%`,transform:`translate3d(${c.tabScrollNum}px, 0, 0)`}),onMousedown:a[0]||(a[0]=(...h)=>t.start&&t.start(...h)),onTouchstart:a[1]||(a[1]=(...h)=>t.start&&t.start(...h)),onMousemove:a[2]||(a[2]=(...h)=>t.move&&t.move(...h)),onTouchmove:a[3]||(a[3]=(...h)=>t.move&&t.move(...h)),onMouseup:a[4]||(a[4]=(...h)=>t.end&&t.end(...h)),onTouchend:a[5]||(a[5]=(...h)=>t.end&&t.end(...h))},[(i(!0),o(M,null,D(t.fakeRoundList,(h,n)=>(i(),o("div",{key:h.uniqueKey,class:g(["press-schedule-tree-tab",[`press-schedule-tree-tab--scroll-${n-c.scrollTime}`,s.isAdmin?"press-schedule-tree-tab--clickable":""]]),style:b({width:`${s.tabScrollWidth}px`})},[f("p",{class:"press-schedule-tree-tab-title",onClick:I(k=>t.clickRoundTab(n),["stop"])},y(t.getRoundName(n)||""),9,st),f("p",{class:"press-schedule-tree-tab-desc",onClick:I(k=>t.clickRoundTab(n),["stop"])},y(t.getBoType(n)||""),9,at),s.isAdmin?(i(),o("div",{key:0,class:"press-schedule-tree-tab-desc-icon iconfont icon-back",onClick:I(k=>t.clickRoundTab(n),["stop"])},null,8,ct)):m("",!0),rt],6))),128)),s.showChampion?(i(),o("div",{key:0,class:g(["press-schedule-tree-tab",[`press-schedule-tree-tab--scroll-${t.column-c.scrollTime}`]])},[f("p",lt,y(t.innerChampionRoundName),1),nt],2)):m("",!0)],36)):m("",!0),t.fakeRoundList.length?(i(),H(d,{key:1,id:c.REF_MAP.TREE_ID,ref:c.REF_MAP.TREE_REF,"scroll-y":"true","scroll-x":"true","enable-flex":"true",enhanced:"true",class:g(["press-schedule-tree-main"]),style:b({width:`${t.tabWidth}%`,transform:`translate3d(${c.scheduleScrollNum}px,0,0)`}),onTouchstart:t.start,onMousedown:t.start,onTouchmove:t.move,onMousemove:t.move,onTouchend:t.end,onMouseup:t.end,onScroll:t.onScroll,onScrolltolower:t.scrollToLower},{default:X(()=>[f("div",{class:g(["press-schedule-tree-layout",{"press-schedule-tree-layout--shadow":s.shadow,"press-schedule-tree-layout--err-tip":t.topRowWithErrTip}])},[(i(!0),o(M,null,D(t.fakeRoundList,(h,n)=>(i(),o("div",{key:h.uniqueKey2,ref_for:!0,ref:`scheItem${n}`,style:b({height:t.getColumnStyle(t.scrollList[n]).height,overflow:t.getColumnStyle(t.scrollList[n]).overflow}),class:g(["press-schedule-tree-column",[`press-schedule-tree-column--scroll-${t.scrollList[n]}`,{"press-schedule-tree-column--shadow":s.shadow&&n%2===1}]])},[(i(!0),o(M,null,D(t.schePairList[n],(k,T)=>(i(),o("div",{id:`scheRef-${n}-${T}`,key:k.uniqueKey,ref_for:!0,ref:`scheRef-${n}-${T}`,class:g([t.getTreePairClass(n,T)])},[j(l,{"is-admin":s.isAdmin,"my-team-id":s.myTeamId,col:n,"is-preview":s.isPreview,"sche-group-info":s.scheList[n]&&s.scheList[n][T]&&s.scheList[n][T].upScheGroup,"schedule-info":s.scheList[n]&&s.scheList[n][T],"selected-team-id":c.selectedTeamId,"selected-sch-id":s.selectedSchId,onClickSche:(_,L)=>t.clickSche(_,L,n,T),onClickVideoIcon:(_,L)=>t.clickVideoIcon(_,L,n,T)},null,8,["is-admin","my-team-id","col","is-preview","sche-group-info","schedule-info","selected-team-id","selected-sch-id","onClickSche","onClickVideoIcon"]),s.scheList[n][T]&&s.scheList[n][T].battleList&&s.scheList[n][T].battleList[1]?(i(),H(l,{key:0,"is-admin":s.isAdmin,"is-preview":s.isPreview,col:n,"my-team-id":s.myTeamId,"sche-group-info":s.scheList[n]&&s.scheList[n][T]&&s.scheList[n][T].downScheGroup,"schedule-info":s.scheList[n]&&s.scheList[n][T],"is-up-two-team":!1,"selected-team-id":c.selectedTeamId,"selected-sch-id":s.selectedSchId,onClickSche:(_,L)=>t.clickSche(_,L,n,T),onClickVideoIcon:(_,L)=>t.clickVideoIcon(_,L,n,T)},null,8,["is-admin","is-preview","col","my-team-id","sche-group-info","schedule-info","selected-team-id","selected-sch-id","onClickSche","onClickVideoIcon"])):m("",!0),s.shadow?m("",!0):(i(),o("div",{key:1,class:g(["press-schedule-tree-pair-border",{"press-schedule-tree-pair-border--parallel":t.scrollList[n+1]===t.scrollList[n]}])},null,2))],10,it))),128))],6))),128)),s.showChampion?(i(),o("div",{key:0,class:g(["press-schedule-tree-column press-schedule-tree-column__champion",[`press-schedule-tree-column--scroll-${t.scrollList[t.scrollList.length-1]+1}`]]),style:b({height:t.getColumnStyle(t.scrollList[t.scrollList.length-1]+1).height,overflow:t.getColumnStyle(t.scrollList[t.scrollList.length-1]+1).overflow})},[f("div",ot,[f("div",null,[f("div",null,[f("div",{class:g(["press-schedule-team-one--up press-schedule-team-one",{"press-schedule-team-one--active":s.myTeamId==t.champTeamInfo.teamid||c.selectedTeamId&&c.selectedTeamId==t.champTeamInfo.teamid,"press-schedule-team-one--lose":[c.i18nMap.emptyTeam,c.i18nMap.pending].includes(t.champTeamInfo.teamname)}]),onClick:a[6]||(a[6]=I((...h)=>t.jump2Finals&&t.jump2Finals(...h),["stop"]))},[t.champTeamInfo.teamavatar?V((i(),o("img",{key:t.champTeamInfo.teamavatar,size:"50",class:"press-schedule-team-avatar"})),[[S,t.champTeamInfo.teamavatar]]):m("",!0),f("p",ut,y(t.innerChampionName),1),t.champTeamInfo.teamname!==c.i18nMap.pending?(i(),o("p",mt,y(t.champTeamInfo.score),1)):m("",!0),f("div",{class:g({"press-schedule-team-tag":!0,"press-schedule-team-tag--first":s.winnerName===c.i18nMap.champion,"press-schedule-team-tag--second":s.winnerName===c.i18nMap.thirdPlace})},y(t.innerChampionTag),3)],2)])])])],6)):m("",!0)],2),s.loading?U(e.$slots,"loading",{key:0},()=>[f("div",dt,[j(u,{vertical:!1,size:s.loadingSize},{default:X(()=>[pe(y(s.loadingText),1)]),_:1},8,["size"])])],!0):m("",!0),s.finishedText&&s.finished?U(e.$slots,"finished",{key:1},()=>[f("div",ht,[f("div",null,y(s.finishedText),1)])],!0):m("",!0)]),_:3},8,["id","style","onTouchstart","onMousedown","onTouchmove","onMousemove","onTouchend","onMouseup","onScroll","onScrolltolower"])):m("",!0)],2)}const kt=ce(et,[["render",ft],["__scopeId","data-v-3dd48b5a"]]);function Tt(e){var s;const a=(s=e==null?void 0:e.nodeItem)==null?void 0:s.utime;return a?Se(a,p("scheduleTree.endTimeFormat")):""}function se(e,a){const{specState:s,score:r,teamid:c,teamname:t,teamavatar:l,fromBracketDesc:u}=e;let d="",S=!1;return a==K.PREVIEW?u?d=u:c===Z.PREVIEW?S=!0:c===Z.PREVIEW_EMPTY&&(d=p("scheduleTree.emptyTeam")):d=t===p("scheduleTree.pending")&&u?u:t,{...e,scoreDesc:a?"":s===ke.QUIT_RIGHT?p("scheduleTree.quitScore"):`${r||0}`,teamNameDesc:d,teamNameSkeleton:S,teamAvatarSkeleton:a==K.PREVIEW,teamAvatar:l}}function ae({scheGroup:e={},roundInfo:a={},isPreview:s=!1,isAdmin:r=!1}){var O,q,Y,z;let c="",t="",l=!1,u=!1,d=!1;const{bracketIdDesc:S="",realStatus:h,curBo:n,boType:k}=e,T=_e(e),_=Ie(h),L=be(h,_),he=ve(a),fe=Tt(e);return T&&(t=p("scheduleTree.ended")),r&&(d=((q=(O=e.nodeItem)==null?void 0:O.sch_score)==null?void 0:q.err_flag)===9999),s?r&&(t=T?p("scheduleTree.ended"):he):T?(c=fe,t=p("scheduleTree.ended")):_?t=Le({scheGroup:e,roundInfo:a}):L&&(c=p("scheduleTree.currentBo",n,k),t=p("scheduleTree.playing"),l=!0,u=!0),{...e,bracketIdDesc:`${S}`,timeDesc:c,statusDesc:t,isStatusHighList:l,showChannelsIcon:e.isWeChatLiving,showLiveIcon:u,abnormalErr:d,upTeamInfo:se(((Y=e.teamList)==null?void 0:Y[0])||{},s),downTeamInfo:se(((z=e.teamList)==null?void 0:z[1])||{},s)}}function It({scheList:e=[],isPreview:a=!1,isAdmin:s=!1}){return e.map(r=>r.map(t=>{const{battleList:l=[],roundInfo:u={}}=t||{},d=ae({scheGroup:l[0],roundInfo:u,isPreview:a,isAdmin:s}),S=ae({scheGroup:l[1],roundInfo:u,isPreview:a,isAdmin:s});return{...t,upScheGroup:d,downScheGroup:S}}))}export{kt as S,It as f};
