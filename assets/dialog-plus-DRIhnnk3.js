import{a2 as x,R as b,_ as D,a3 as R,Q as N,x as G,a4 as z,r as f,c as r,a as m,o as s,b as v,d as C,t as p,w as S,F as _,e as w,h as k,H as L,B as U,n as Q,P as W,j as F}from"./index-Q-rLfHSZ.js";import{s as Z,a as O}from"./index-DXRlbxD2.js";import{a as q}from"./handler-helper-BKr0zvNe.js";import{S as A}from"./scroll-view-d6qms1vU.js";import{P as E}from"./press-field-Br4lW3xA.js";import"./parent-CQhE6Wqc.js";function K(){const e=getCurrentPages();return e[e.length-1]}function $({options:e,currentOptions:t,dialogComponent:c,id:u}){e=Object.assign(Object.assign({},t),e);const l=e.context||K();let o=Z(l,e.selector);if(delete e.context,delete e.selector,!o&&c&&(o=x(c,u)),o){const d={...e};return O(o,d),O(o,d,"showDialog").then(n=>Promise.resolve(n)).catch(n=>Promise.reject(n))}const a=`The ${e.selector} node is not found, please confirm whether the selector and context are correct`;return console.warn(a),Promise.reject(a)}const T={show:{type:Boolean,default:!1},src:{type:String,default:""},dialogType:{type:[Number,String],default:1},title:{type:String,default:b("dialog.title")},content:{type:String,default:""},canTouchRemove:{type:Boolean,default:!0},confirmText:{type:String,default:b("confirm")},cancelText:{type:String,default:""},onClickCancel:{type:[Function,null],default:null},onConfirmClick:{type:[Function,null],default:null},htmlContent:{type:String,default:""},zIndex:{type:[Number,String],default:"99"},useScrollView:{type:Boolean,default:!1},onClickImage:{type:[Function,null],default:null},onLongPressImage:{type:[Function,null],default:null},showField:{type:Boolean,default:!1},fieldPlaceHolder:{type:String,default:""},fieldValue:{type:String,default:""},customClass:{type:String,default:""}},J={name:"PressDialogPlus",options:{...G(!0,!1),styleIsolation:"shared"},components:{PressButton:N,PressField:E},mixins:[R(T),A],props:{...T},emits:["confirm","cancel","onLongPressImage","onClickImage"],data(){return{resolve:"",reject:"",promise:"",mShowButtonLoading:!1,inputValue:""}},watch:{dataFieldValue:{handler(e){this.inputValue=e},immediate:!0}},mounted(){},methods:{preventTouchMove(){},confirm(){if(this.dataDialogType===2){if(this.mShowButtonLoading)return;this.mShowButtonLoading=!0}typeof this.dataOnConfirmClick=="function"?z(this.dataOnConfirmClick(this)).then(e=>{e&&this.resolveConfirm()}).catch(()=>{}):this.resolveConfirm()},resolveConfirm(){this.resolve&&this.resolve("confirm"),this.$emit("confirm"),this.remove()},cancel(){typeof this.dataOnClickCancel=="function"&&this.dataOnClickCancel(this),typeof this.reject=="function"&&this.reject("cancel"),this.$emit("cancel"),this.remove()},showDialog(){return this.dataShow=!0,this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),this.promise},touchRemove(){this.dataCanTouchRemove&&this.remove(),this.$emit("cancel")},remove(){this.dataShow=!1,this.mShowButtonLoading=!1},destroy(){},handleLongPressImage(){typeof this.dataOnLongPressImage=="function"&&this.dataOnLongPressImage(),this.$emit("onLongPressImage")},handleClickImage(){typeof this.dataOnClickImage=="function"&&this.dataOnClickImage(),this.$emit("onClickImage")},onChangeField(e){this.inputValue=e}}},X={class:"press-dialog__content-wrap"},Y={class:"press-dialog__title"},ee=["innerHTML"],te={key:2,class:"press-dialog__content"},oe={key:4,class:"press-dialog__img-wrap"},ne=["src"],le={class:"press-dialog__btn--wrap"},se={class:"press-dialog__btn--spacing"};function ie(e,t,c,u,l,o){const a=f("scroll-view"),d=f("PressField"),i=f("PressButton");return e.dataShow?(s(),r("div",{key:0,class:Q(["press-dialog",e.dataCustomClass]),style:U({zIndex:`${e.dataZIndex}`}),onClick:t[2]||(t[2]=S((...n)=>o.touchRemove&&o.touchRemove(...n),["stop"])),onTouchmove:t[3]||(t[3]=S((...n)=>o.preventTouchMove&&o.preventTouchMove(...n),["stop"]))},[v("div",X,[v("p",Y,p(e.dataTitle),1),e.dataUseScrollView&&e.dataHtmlContent?(s(),C(a,{key:0,"scroll-y":"true",class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,["innerHTML"])):e.dataHtmlContent?(s(),r("p",{key:1,class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,ee)):m("",!0),e.dataHtmlContent?m("",!0):(s(),r("p",te,p(e.dataContent),1)),e.dataShowField?(s(),C(d,{key:3,"custom-class":"press-dialog__field","title-width":"0",placeholder:e.dataFieldPlaceHolder,value:e.dataFieldValue,"model-value":e.dataFieldValue,onChange:o.onChangeField},null,8,["placeholder","value","model-value","onChange"])):m("",!0),e.dataSrc?(s(),r("div",oe,[e.dataSrc?(s(),r("img",{key:0,class:"press-dialog__img","show-menu-by-longpress":!0,src:e.dataSrc,onClick:t[0]||(t[0]=S((...n)=>o.handleClickImage&&o.handleClickImage(...n),["stop"])),onLongpress:t[1]||(t[1]=(...n)=>o.handleLongPressImage&&o.handleLongPressImage(...n))},null,40,ne)):m("",!0)])):m("",!0),v("div",le,[e.dataCancelText&&e.dataCancelText.length>0?(s(),r(_,{key:0},[v("div",se,[w(i,{type:"e-sport-secondary","custom-style":"width: 100px;height: 36px;",onClick:o.cancel},{default:k(()=>[L(p(e.dataCancelText),1)]),_:1},8,["onClick"])]),w(i,{type:"e-sport-primary-bg",loading:l.mShowButtonLoading,"custom-style":"width: 100px;height: 36px;",onClick:o.confirm},{default:k(()=>[L(p(l.mShowButtonLoading?"":e.dataConfirmText),1)]),_:1},8,["loading","onClick"])],64)):e.dataConfirmText||l.mShowButtonLoading?(s(),C(i,{key:1,type:"e-sport-primary-bg",loading:l.mShowButtonLoading,"custom-style":"width: 148px;height: 36px;",onClick:o.confirm},{default:k(()=>[L(p(l.mShowButtonLoading?"":e.dataConfirmText),1)]),_:1},8,["loading","onClick"])):m("",!0)])])],38)):m("",!0)}const V=D(J,[["render",ie],["__scopeId","data-v-5c541020"]]);let H=[];const j=Object.keys(T).reduce((e,t)=>(e[t]=T[t].default,e),{selector:"#tip-match-comm-tips-dialog"});let B=Object.assign({},j);const g=e=>$({options:e,currentOptions:B,id:"tip-dialog-showCommTipsDialog",dialogComponent:V});function ae(e){H=e}function re(e){B=e}g.show=e=>g(e);q({Dialog:g,queue:H,currentOptions:B,defaultOptions:j,updateQueue:ae,updateCurrentOptions:re});const ce=g.show;g.setDefaultOptions;g.resetDefaultOptions;const M=function(){return new Promise(e=>{setTimeout(()=>{e(!0)},3e3)})},ue={i18n:{"zh-CN":{customButton:"自定义按钮",customContent:"自定义内容",noCancel:"没有取消按钮",noCancelLoading:"没有取消+加载中",image:"图片",html:"HTML内容",field:"输入框",noMask:"点击蒙层不可关闭",longText:"长文本",onlyCaption:"仅限队长报名，发给队长来报名吧！",custom:"自定义",componentCall:"组件调用",multiple:"多例",longContent:()=>["念奴娇·赤壁怀古","大江东去，浪淘尽，千古风流人物。故垒西边，人道是，三国周郎赤壁。乱石穿空，惊涛拍岸，卷起千堆雪。江山如画，一时多少豪杰。","遥想公瑾当年，小乔初嫁了，雄姿英发。羽扇纶巾，谈笑间，樯橹灰飞烟灭。故国神游，多情应笑我，早生华发。人生如梦，一尊还酹江月。","<br/>","沁园春·雪","北国风光，千里冰封，万里雪飘。望长城内外，惟余莽莽；大河上下，顿失滔滔。山舞银蛇，原驰蜡象，欲与天公试比高。须晴日，看红装素裹，分外妖娆。","江山如此多娇，引无数英雄竞折腰。惜秦皇汉武，略输文采；唐宗宋祖，稍逊风骚。一代天骄，成吉思汗，只识弯弓射大雕。俱往矣，数风流人物，还看今朝。","<br/>","沁园春·长沙","独立寒秋，湘江北去，橘子洲头。看万山红遍，层林尽染；漫江碧透，百舸争流。鹰击长空，鱼翔浅底，万类霜天竞自由。怅寥廓，问苍茫大地，谁主沉浮？","携来百侣曾游，忆往昔峥嵘岁月稠。恰同学少年，风华正茂；书生意气，挥斥方遒。指点江山，激扬文字，粪土当年万户侯。曾记否，到中流击水，浪遏飞舟？"].join("<br/>")},"en-US":{customButton:"Custom Button",customContent:"Custom Content",noCancel:"No Cancel",noCancelLoading:"No Cancel and Loading",image:"Image",html:"HTML Content",field:"Input",noMask:"No Close By Mask",longText:"Long Text",onlyCaption:"Only the captain can sign up, send it to the captain to sign up!",custom:"Custom ",componentCall:"Component Call",multiple:"Multiple",longContent:()=>["Reflections on the Ancient Red Cliff--To the tune of Niannujiao","","The Great River flows,","Eastward waves sweeping away,","For thousands of years, gallant heroes.","West of the ancient fort, they say, stands","The Red Cliff of the Three-Kingdoms' Duke Zhou.","Rocks pierce the sky, shore-tearing","Waves swirl into piles of snow.","What a glorious sweep of land,","Once a stage for so many a hero!","","My thoughts drift to those years when Zhou","Had newly married the beautiful Qiao,","Vigour and valour aglow.","A feather fan and a silken hat,","He masterminded the fire-attack on the foe--","Over a casual chat","To see their fleet perish, blow by blow.","Back from my mental vagrancy in that bygone age,","I must laugh at myself: letting sentiments grow","Into grey hairs, too soon.","But isn't life a dream, after all？","Let me pledge this cup to the River,","To the Moon."].join("<br/>")}},components:{PressDialogPlus:V,PressCell:W},data(){return{sectionStyle:"",show:!1,show2:!1,curType:"",dialogTypeList:[{title:this.t("basicUsage"),list:[{name:"normal",title:this.t("basicUsage")},{name:"noTouchMove",title:this.t("noMask")}]},{title:this.t("customContent"),list:[{name:"img",title:this.t("image")},{name:"html",title:this.t("html")},{name:"longText",title:this.t("longText")},{name:"field",title:this.t("field")}]},{title:this.t("customButton"),list:[{name:"noCancel",title:this.t("noCancel")},{name:"loading",title:this.t("loadingStatus")},{name:"noCancelLoading",title:this.t("noCancelLoading")}]},{title:this.t("componentCall"),list:[{name:"componentCall",title:this.t("componentCall")},{name:"multiple",title:this.t("multiple")}]}]}},methods:{onShowDialog(e){if(this.curType=e,e==="componentCall"){this.show=!0;return}if(e==="multiple"){this.show=!0,this.show2=!0;return}let t=this.t("cancel"),c=1,u=null,l=this.t("onlyCaption"),o="",a="",d=null,i=!0,n=!1,y=!1,h="",P="";e==="noCancel"?t="":e==="loading"?(c=2,u=M):e==="noCancelLoading"?(c=2,t="",u=M):e==="html"?(l="",o=`<div>${this.t("custom")}<span style="color: red;">${this.t("content")}</span></div>`):e==="img"?a="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/10/own_mike_19f9b1ecdd9332c7c0.jpg":e==="noTouchMove"?i=!1:e==="longText"?(l="",o=`<div style="max-height:100%;overflow:scroll;">${this.t("longContent")}</div>`,n=!0):e==="field"&&(y=!0,h="随便输点什么吧",l="",P="Press UI",i=!1,u=I=>I.inputValue?(this.onGTip(`内容: ${I.inputValue}`),!0):(this.onGTip("请输入内容"),!1)),ce({context:this,title:this.t("title"),content:l,htmlContent:o,src:a,onLongPressImage:d,confirmText:this.t("confirm"),cancelText:t,dialogType:c,onConfirmClick:u,canTouchRemove:i,useScrollView:n,showField:y,fieldPlaceHolder:h,fieldValue:P}).then(()=>{e!=="field"&&this.onGTip("confirm")}).catch(()=>{this.onGTip("cancel")})},onConfirm(e){this[e]=!1,this.curType!=="field"&&this.onGTip("confirm")},onCancel(e){this[e]=!1,this.onGTip("cancel")}}},de={class:"demo-wrap"};function me(e,t,c,u,l,o){const a=f("PressCell"),d=f("demo-block"),i=f("PressDialogPlus");return s(),r("div",de,[(s(!0),r(_,null,F(l.dialogTypeList,(n,y)=>(s(),C(d,{key:y,title:n.title,"section-style":l.sectionStyle},{default:k(()=>[(s(!0),r(_,null,F(n.list,h=>(s(),C(a,{key:h.name,title:h.title,"is-link":"",onClick:P=>o.onShowDialog(h.name)},null,8,["title","onClick"]))),128))]),_:2},1032,["title","section-style"]))),128)),w(i,{id:"tip-match-comm-tips-dialog",ref:"tip-match-comm-tips-dialog"},null,512),w(i,{title:e.t("title"),show:l.show,content:"Some fake news",onConfirm:t[0]||(t[0]=n=>o.onConfirm("show")),onCancel:t[1]||(t[1]=n=>o.onCancel("show"))},null,8,["title","show"]),w(i,{title:e.t("title"),show:l.show2,content:"Some fake news 2",onConfirm:t[2]||(t[2]=n=>o.onConfirm("show2")),onCancel:t[3]||(t[3]=n=>o.onCancel("show2"))},null,8,["title","show"])])}const ye=D(ue,[["render",me]]);export{ye as default};
