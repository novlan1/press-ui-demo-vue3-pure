import{S as q,P as J,a as S,i as O,g as X,b as Z,c as G,d as $}from"./status-helper-D2zksTPb.js";import{_ as ee,z as se,o as i,c as n,t as r,d as _,a as h,F as D,x as v,A as R,u as V,w as N,p as te,e as ae}from"./index-BZexHo5h.js";import{t as l}from"./index-DfrNFuIM.js";import{t as W}from"./time-DadpJyRx.js";const d={manage:"MANAGE",watch:"WATCH",play:"PLAY",review:"REVIEW",order:"ORDER",hasOrdered:"HAVE_ORDERED"},ce={[d.manage]:l("scheduleList.manage"),[d.watch]:l("scheduleList.spectate"),[d.play]:l("scheduleList.toPlay"),[d.review]:l("scheduleList.reCap"),[d.order]:l("scheduleList.subscribe"),[d.hasOrdered]:l("scheduleList.subscribed")},ie={name:"PressScheduleItem",options:{virtualHost:!0},props:{scheInfo:{type:Object,default:()=>({})},selected:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},isPreview:{type:Number,default:0},scheSubStatusMap:{type:Object,default:()=>({})},myTeamId:{type:String,default:""},canShowOrderButton:{type:Boolean,default:!0}},emits:["clickScheItem","clickScheItemButton"],data(){return{SPECIAL_TEAM_ID_MAP:q,PREVIEW_STATE_MAP:J}},computed:{realScheStatus(){return this.scheGroup.realStatus},scheGroup(){var e,t;return((t=(e=this.scheInfo)==null?void 0:e.battleList)==null?void 0:t[0])||{}},leftTeam(){var e,t;return((t=(e=this.scheGroup)==null?void 0:e.teamList)==null?void 0:t[0])||{}},rightTeam(){var e,t;return((t=(e=this.scheGroup)==null?void 0:e.teamList)==null?void 0:t[1])||{}}},mounted(){},methods:{clickScheItem(){const{scheInfo:e,scheGroup:t,isPreview:s}=this;s||e.isOneTeamLunKong||e.isOneTeamDaiDing||this.$emit("clickScheItem",t.schid,t,e)},onClickMiddleBtn(){const{scheGroup:e,scheInfo:t,isPreview:s}=this;s||this.$emit("clickScheItemButton",{middleButtonStatus:t.middleButtonStatus,middleButtonStatusMap:d,scheGroup:e,schePair:this.scheInfo,schId:e.schid})}}},E=e=>(te("data-v-33c205c7"),e=e(),ae(),e),ne={key:0,class:"press-schedule-item-label"},de={class:"press-schedule-item-layout"},le={key:0,class:"press-schedule-team--preview"},re=E(()=>h("div",{class:"press-schedule-team-avatar-wrap"},null,-1)),oe={key:0,class:"press-schedule-team-name press-schedule-team-name--empty"},he={key:1,class:"press-schedule-team-name"},me={class:"press-schedule-team-avatar-wrap"},ue={key:0,class:"press-schedule-team-tag-winner"},_e={key:1,class:"press-schedule-team-tag-mine"},fe={key:2,class:"press-schedule-team-avatar",size:"50"},Te={class:"press-schedule-team-name"},ye={key:0,class:"press-schedule-state"},Ie={key:0,class:"press-schedule-state-icon"},ve=E(()=>h("div",{class:"iconfont icon-live"},null,-1)),Se={key:0,class:"press-schedule-score"},Ee=E(()=>h("div",{class:"press-schedule-score-vs"}," VS ",-1)),ge=[Ee],ke={key:1,class:"press-schedule-score"},De={class:"press-schedule-score-num"},Pe={class:"press-schedule-score-num"},Le={key:0,class:"press-schedule-team--preview"},pe=E(()=>h("div",{class:"press-schedule-team-avatar-wrap"},null,-1)),be={key:0,class:"press-schedule-team-name press-schedule-team-name--empty"},Ae={key:1,class:"press-schedule-team-name"},we={class:"press-schedule-team-avatar-wrap"},Be={key:0,class:"press-schedule-team-tag-winner"},Me={key:1,class:"press-schedule-team-tag-mine"},Ce={key:2,class:"press-schedule-team-avatar",size:"50"},Oe={class:"press-schedule-team-name"},Re={key:1,class:"press-schedule-bottom"};function Ve(e,t,s,o,f,a){const T=se("lazy");return i(),n("div",{class:v(["press-schedule-item",{"press-schedule-item--selected":s.selected}]),onClick:t[1]||(t[1]=N((...c)=>a.clickScheItem&&a.clickScheItem(...c),["stop"]))},[s.scheInfo.finalsLabel?(i(),n("div",ne,r(s.scheInfo.finalsLabel||""),1)):_("",!0),h("div",de,[(i(),n(D,{key:0},[s.isPreview==f.PREVIEW_STATE_MAP.PREVIEW?(i(),n("div",le,[re,a.leftTeam.teamid===f.SPECIAL_TEAM_ID_MAP.PREVIEW_EMPTY?(i(),n("div",oe,r(s.scheInfo.emptyTeam||""),1)):(i(),n("div",he))])):(i(),n("div",{key:1,class:v({"press-schedule-team--abstain":s.scheInfo.isLeftTeamQuit})},[h("div",me,[a.leftTeam.isWinner&&s.scheInfo.finalsChampion?(i(),n("div",ue,r(s.scheInfo.finalsChampion||""),1)):_("",!0),a.leftTeam.teamid==s.myTeamId?(i(),n("div",_e,r(s.scheInfo.me||""),1)):_("",!0),a.leftTeam.teamavatar?R((i(),n("img",fe,null,512)),[[T,a.leftTeam.teamavatar]]):_("",!0)]),h("div",Te,r(a.leftTeam.teamname||""),1)],2))],64)),h("div",{class:v([s.scheInfo.finals?"press-schedule-center--finals":"","press-schedule-center"])},[s.scheInfo.scheStateDesc?(i(),n("div",ye,[V(r(s.scheInfo.scheStateDesc||"")+" ",1),s.scheInfo.playingDesc?(i(),n("div",Ie,[V(r(s.scheInfo.playingDesc||""),1),ve])):_("",!0)])):_("",!0),(i(),n(D,{key:1},[s.scheInfo.showVS?(i(),n("div",Se,ge)):(i(),n("div",ke,[h("div",De,r(a.leftTeam.score||0),1),h("div",{class:v([{"press-schedule-score-colon--shift":s.scheInfo.isScoreColonShift},"press-schedule-score-colon"])},null,2),h("div",Pe,r(a.rightTeam.score||0),1)]))],64)),s.scheInfo.middleButtonTitle?(i(),n("div",{key:2,class:v(s.scheInfo.middleButtonClass),onClick:t[0]||(t[0]=N((...c)=>a.onClickMiddleBtn&&a.onClickMiddleBtn(...c),["stop"]))},r(s.scheInfo.middleButtonTitle||""),3)):_("",!0)],2),(i(),n(D,{key:1},[s.isPreview==f.PREVIEW_STATE_MAP.PREVIEW?(i(),n("div",Le,[pe,a.rightTeam.teamid===f.SPECIAL_TEAM_ID_MAP.PREVIEW_EMPTY?(i(),n("div",be,r(s.scheInfo.emptyTeam||""),1)):(i(),n("div",Ae))])):(i(),n("div",{key:1,class:v({"press-schedule-team--abstain":s.scheInfo.isRightTeamQuit})},[h("div",we,[a.rightTeam.isWinner&&s.scheInfo.finalsChampion?(i(),n("div",Be,r(s.scheInfo.finalsChampion||""),1)):_("",!0),a.rightTeam.teamid==s.myTeamId?(i(),n("div",Me,r(s.scheInfo.me||""),1)):_("",!0),a.rightTeam.teamavatar?R((i(),n("img",Ce,null,512)),[[T,a.rightTeam.teamavatar]]):_("",!0)]),h("div",Oe,r(a.rightTeam.teamname||""),1)],2))],64))]),s.scheInfo.latestReadyTimeDesc?(i(),n("div",Re,r(s.scheInfo.latestReadyTimeDesc||""),1)):_("",!0)],2)}const Ke=ee(ie,[["render",Ve],["__scopeId","data-v-33c205c7"]]);function Ne({scheInfo:e,scheGroup:t,isPreview:s,isAdmin:o,isNotStart:f,isEnd:a,isPlaying:T}){var I;let c="",y="";if(s&&o)c=X(e.roundInfo);else if(a){const m=(I=t==null?void 0:t.nodeItem)==null?void 0:I.utime,u=m?W(m,l("scheduleTree.endTimeFormat")):"";c=`${l("scheduleTree.ended")} ${u}`}else f?c=Z({scheGroup:t,roundInfo:e.roundInfo||{}}):T&&(y=l("scheduleTree.playing"),c=l("scheduleTree.currentBo",t.curBo||"",t.boType||""));return{scheStateDesc:c,playingDesc:y}}function We(e={}){var o;const t=(o=e==null?void 0:e.sch_rule)==null?void 0:o.tree_node_uni_id;return t||((e==null?void 0:e.schid)||"").replace(/_\d+$/,"")}function xe({isAdmin:e,scheGroup:t,isOneTeamLunKong:s,isOneTeamDaiDing:o,haveEmptyTeam:f,iamInThisSchedule:a,canShowOrderButton:T,scheSubStatusMap:c,isNotStart:y,isEnd:I,isPlaying:m}){if(e)return!s&&!o?d.manage:void 0;if(m)return a?d.play:d.watch;if(I&&!f)return d.review;if(y&&a)return d.play;if(y&&T){const u=We(t==null?void 0:t.nodeItem);return c[u]?d.hasOrdered:d.order}return""}function Ue(e){const t={"primary-btn":[d.watch,d.play].indexOf(e)>-1,"secondary-btn":[d.hasOrdered].indexOf(e)>-1,"border-btn":[d.order,d.manage,d.review].indexOf(e)>-1,"disabled-btn":[d.hasOrdered].indexOf(e)>-1},s=[];return Object.keys(t).forEach(o=>{t[o]&&s.push(o)}),s.join(" ")}function je({scheInfo:e,isPreview:t,isAdmin:s,myTeamId:o,canShowOrderButton:f,scheSubStatusMap:a}){var B,M,C;const{finals:T}=e||{},c=((B=e==null?void 0:e.battleList)==null?void 0:B[0])||{},{realStatus:y}=c,{specState:I}=(c==null?void 0:c.nodeItem)||{},m=((M=c==null?void 0:c.teamList)==null?void 0:M[0])||{},u=((C=c==null?void 0:c.teamList)==null?void 0:C[1])||{},x=m.score===l("scheduleTree.quitScore")&&u.score===l("scheduleTree.quitScore"),U=m.specState===S.QUIT_RIGHT,j=u.specState===S.QUIT_RIGHT,g=G(y),P=O(c),L=$(y,g),p=I===S.LUN_KONG,b=I===S.DAI_DING,z=m.teamid===o||u.teamid===o,A=m.teamname===l("scheduleTree.emptyTeam")||u.teamname===l("scheduleTree.emptyTeam"),{scheStateDesc:Q,playingDesc:H}=Ne({scheInfo:e,scheGroup:c,isPreview:t,isAdmin:s,isNotStart:g,isEnd:P,isPlaying:L}),k=xe({isAdmin:s,scheGroup:c,isOneTeamLunKong:p,isOneTeamDaiDing:b,haveEmptyTeam:A,iamInThisSchedule:z,canShowOrderButton:f,scheSubStatusMap:a,isNotStart:g,isEnd:P,isPlaying:L}),F=Ue(k),K=t?!0:[0,void 0].includes(m==null?void 0:m.score)&&[0,void 0].includes(u==null?void 0:u.score)&&!O,{latest_ready_time:w}=e.roundInfo||{},Y=w?W(w,l("scheduleList.joinDeadline"),"","\\\\"):"";return{...e,finalsLabel:T?l("scheduleList.finals"):"",finalsChampion:T?l("scheduleList.finalsChampion"):"",me:l("scheduleList.me"),emptyTeam:l("scheduleTree.emptyTeam"),scheStateDesc:Q,playingDesc:H,showVS:K,isScoreColonShift:x,isLeftTeamQuit:U,isRightTeamQuit:j,middleButtonStatus:k,middleButtonTitle:t?"":ce[k]||"",middleButtonClass:F,latestReadyTimeDesc:Y,isOneTeamLunKong:p,isOneTeamDaiDing:b,haveEmptyTeam:A}}const Ye=je;export{Ke as P,Ye as f};
