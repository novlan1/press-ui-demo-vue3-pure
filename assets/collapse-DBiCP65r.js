import{P as A}from"./press-cell-DldhgUi8.js";import{r as E}from"./system-DiAbMyT7.js";import{g as B}from"./rect-BiPyIr-j.js";import{d as N,a as k}from"./press-component-DP30Q1Pq.js";import{u as b}from"./utils-BWNRMl9G.js";import{C as w,P as I}from"./relation-Ce8eT7mn.js";import{P as u}from"./parent-map-_1jD1UtF.js";import{_ as v,r as h,o as _,c as S,f as n,l,i as f,a as g,n as y,m as T,A as d,t as c}from"./index-C7cPaXoT.js";import{P as $}from"./press-icon-plus-UvEd4iQp.js";import"./link-BvyWW8_h.js";import"./style-CpIyAjCl.js";import"./add-unit-Ci6RUrQO.js";import"./event-BsaNekcD.js";import"./support-passive-CNRHRm4O.js";import"./press-info-CCB12gYT.js";function p({height:e,duration:i}){return[`height: ${e};`,`transition: height ${i}ms ease-in-out 0ms, top ${i}ms ease-in-out 0ms, -webkit-transform ${i}ms ease-in-out 0ms, transform ${i}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function O(e,i,t,o){if(i){if(o===0)e.animationStyle=p({height:"auto",duration:0});else{const a=t?300:1;e.animationStyle=p({height:`${o}px`,duration:a}),setTimeout(()=>{e.animationStyle=p({height:"auto",duration:0})},a)}return}const s=1;e.animationStyle=p({height:`${o}px`,duration:s}),E(()=>{e.animationStyle=p({height:0,duration:300})})}function z(e,i,t){B(e,".press-collapse-item__content").then(o=>o.height).then(o=>{O(e,i,t,o)})}const x={name:"PressCollapseItem",options:{...N,styleIsolation:"shared"},components:{PressCell:A},mixins:[w(u)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},contentClass:{type:String,default:""},...k},emits:[],data(){const{defaultExpandAll:e}=this[u];return{expanded:!!e,animation:{},mounted:!1,animationStyle:e?"height: auto;":"height: 0;"}},computed:{collapseItemClass(){const{disabled:e,expanded:i}=this;return b.bem2("collapse-item__title",{disabled:e,expanded:i})},collapseItemCustomClass(){let e="";return e=this.collapseItemClass,e},wrapperClass(){return b.bem2("collapse-item__wrapper")}},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[u])return;const{value:e,accordion:i}=this[u],{children:t=[]}=this[u],{name:o}=this,s=t.indexOf(this),a=o??s,r=i?e===a:(e||[]).some(m=>m===a);r!==this.expanded&&z(this,r,this.mounted),this.expanded=r},onClick(){if(this.disabled)return;const{name:e,expanded:i}=this,t=this[u].children.indexOf(this),o=e??t;this[u].switch(o,!i)}}};function L(e,i,t,o,s,a){const r=h("press-cell");return _(),S("div",{class:y(e.customClass+" press-collapse-item "+(e.index!==0?"press-hairline--top":""))},[n(r,{size:t.size,title:t.title,"title-class":t.titleClass,icon:t.icon,value:t.value,label:t.label,"is-link":t.isLink,clickable:t.clickable,border:t.border&&s.expanded,"custom-class":a.collapseItemCustomClass,"hover-class":"press-cell--hover",center:"",onClick:a.onClick},{title:l(()=>[f(e.$slots,"title",{},void 0,!0)]),"right-icon":l(()=>[f(e.$slots,"right-icon",{},void 0,!0)]),default:l(()=>[f(e.$slots,"value",{},void 0,!0)]),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","onClick"]),g("div",{class:y(a.wrapperClass),style:T(s.animationStyle)},[g("div",{class:y(["press-collapse-item__content",t.contentClass])},[f(e.$slots,"default",{},void 0,!0)],2)],6)],2)}const D=v(x,[["render",L],["__scopeId","data-v-6da9331d"]]),V={name:"PressCollapse",options:{...N},mixins:[I(u)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...k},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach(e=>{e.updateExpanded()})},switch(e,i){const{accordion:t,value:o}=this,s=e;t?e=i?e:"":e=i?(o||[]).concat(e):(o||[]).filter(a=>a!==e),i?this.$emit("open",s):this.$emit("close",s),this.$emit("change",e),this.$emit("input",e)}}};function q(e,i,t,o,s,a){return _(),S("div",{class:y(e.customClass+" press-collapse "+(t.border?"press-hairline--top-bottom":""))},[f(e.$slots,"default")],2)}const G=v(V,[["render",q]]),M={i18n:{"zh-CN":{accordion:"手风琴",titleSlot:"自定义标题内容",text:"代码是写出来给人看的，附带能在机器上运行"},"en-US":{accordion:"Accordion",titleSlot:"Custom title",text:"Content"}},components:{PressCollapseItem:D,PressCollapse:G,PressIconPlus:$},data(){return{activeNames:["1"],activeNames2:"1",activeNames3:["1"],activeNamesTitle:["1"],sectionStyle:"margin: 0;",headerStyle:"background: #f7f8fa;"}},methods:{onChange(e){console.log("onChange.value: ",e),this.activeNames=e},onOpen(e){this.onGTip(`open: ${e}`),console.log("onOpen.value: ",e)},onClose(e){this.onGTip(`close: ${e}`),console.log("onClose.value: ",e)},onChangeAccordion(e){this.activeNames2=e},onChangeDisabled(e){this.activeNames3=e},onChangeTitle(e){this.activeNamesTitle=e}}},R={class:"demo-wrap demo-wrap--gray"};function U(e,i,t,o,s,a){const r=h("press-collapse-item"),m=h("press-collapse"),C=h("demo-block"),P=h("press-icon-plus");return _(),S("div",R,[n(C,{title:e.t("basicUsage"),"section-style":s.sectionStyle,"header-style":s.headerStyle},{default:l(()=>[n(m,{value:s.activeNames,onChange:a.onChange,onOpen:a.onOpen,onClose:a.onClose},{default:l(()=>[n(r,{title:`${e.t("title")} 1`,name:"1"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),n(r,{title:`${e.t("title")} 2`,name:"2"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),n(r,{title:`${e.t("title")} 3`,name:"3"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange","onOpen","onClose"])]),_:1},8,["title","section-style","header-style"]),n(C,{title:e.t("accordion"),"header-style":s.headerStyle,"section-style":s.sectionStyle},{default:l(()=>[n(m,{value:s.activeNames2,accordion:"",onChange:a.onChangeAccordion},{default:l(()=>[n(r,{title:`${e.t("title")} A`,name:"1"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),n(r,{title:`${e.t("title")} B`,name:"2"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),n(r,{title:`${e.t("title")} C`,name:"3"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange"])]),_:1},8,["title","header-style","section-style"]),n(C,{title:e.t("disabled"),"header-style":s.headerStyle,"section-style":s.sectionStyle},{default:l(()=>[n(m,{value:s.activeNames3,accordion:"",onChange:a.onChangeDisabled},{default:l(()=>[n(r,{title:`${e.t("title")} X`,name:"1"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),n(r,{title:`${e.t("title")} Y`,disabled:"",name:"2"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),n(r,{title:`${e.t("title")} Z`,name:"3",disabled:""},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange"])]),_:1},8,["title","header-style","section-style"]),n(C,{title:e.t("titleSlot"),"section-style":s.sectionStyle,"header-style":s.headerStyle},{default:l(()=>[n(m,{value:s.activeNamesTitle,onChange:a.onChangeTitle},{default:l(()=>[n(r,{name:"1"},{title:l(()=>[g("div",null,[d(c(e.t("title"))+" 1 ",1),n(P,{name:"question-o"})])]),default:l(()=>[d(" "+c(e.t("text")),1)]),_:1}),n(r,{title:`${e.t("title")} 2`,name:"2",icon:"shop-o"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange"])]),_:1},8,["title","section-style","header-style"])])}const ne=v(M,[["render",U]]);export{ne as default};
