import{g as f}from"./act-bem-hi9TDZSH.js";import{_ as g,o as u,c as p,a as l,x as s,t as C,w as d,d as w,f as c,n as y,r}from"./index-BZexHo5h.js";import{l as x}from"./loader-unity-DucQBRcu.js";import"./tslib.es6-bc7be52f-C33s8C00.js";import"./little-loader-BcSYYlxs.js";import"./loader-DBQ4z0vx.js";const A={dialog:"tip-wx-login-dialog-layout",content:"tip-wx-login-dialog-content",header:"el-dialog__header",title:"el-dialog__title","header-button":"el-dialog__headerbtn",close:"el-dialog__close",icon:"el-icon","icon--close":"el-icon-close","login-wrap":"dialog-login-contant","login-content":"login-content","login-inner":"login_container"};function b(o,e){return f(o,A,e)}const S="https://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",k={name:"PressPCScanLogin",props:{show:{type:Boolean,default:!1},url:{type:String,default:""},title:{type:String,default:"微信登录"},destroyedWhenClosed:{type:Boolean,default:!1},loader:{type:Function,default:null},useTipClass:{type:Boolean,default:!1},wxLoginConfig:{type:Object,default:()=>({})}},emits:["update:show"],data(){return{}},watch:{show:{handler(o){o&&this.init()}},url:{handler(){this.init()}}},mounted(){this.init()},methods:{init(){if(typeof this.loader=="function"){this.loader(S,()=>{this.initQRCode()});return}this.initQRCode()},initQRCode(){new window.WxLogin({id:"login_container",self_redirect:!1,appid:"wx224053afb6d8a600",scope:"snsapi_login",redirect_uri:this.url,state:"7a6d6ed5589082dd6c41d64d5206b064",style:"black",href:"https://image-1251917893.file.myqcloud.com/igame-admin/weixinlogin.css",...this.wxLoginConfig||{}})},closeDialog(){if(this.$emit("update:show",!1),this.destroyedWhenClosed){const e=document.getElementById("tip-dialog-login");e!=null&&e.parentElement&&e.parentElement.removeChild(e)}},getActClass(...o){return b(this.useTipClass,o)}}};function v(o,e,a,m,i,t){return a.show?(u(),p("div",{key:0,id:"tip-dialog-login",class:s([t.getActClass("dialog")])},[l("div",{class:s([t.getActClass("content")])},[l("div",{class:s([t.getActClass("header")])},[l("span",{class:s([t.getActClass("title")])},C(a.title),3),l("button",{class:s([t.getActClass("header-button")]),onClick:e[1]||(e[1]=d((...n)=>t.closeDialog&&t.closeDialog(...n),["stop"]))},[l("i",{class:s([t.getActClass("close","icon","icon--close")]),onClick:e[0]||(e[0]=d((...n)=>t.closeDialog&&t.closeDialog(...n),["stop"]))},null,2)],2)],2),l("div",{class:s([t.getActClass("login-wrap")])},[l("div",{class:s([t.getActClass("login-content")])},[l("div",{id:"login_container",class:s([t.getActClass("login-inner")])},null,2)],2)],2)],2)],2)):w("",!0)}const L=g(k,[["render",v],["__scopeId","data-v-ffbde6e3"]]),P={components:{PressPCScanLogin:L},data(){let o=!1;const e="https://igame.qq.com";return o=!0,{show:o,loader:x,url:encodeURIComponent(`https://igame.qq.com/prod/pmdtrpc.commcgi.user.user/QueryUserInfo?_ltype=tiploginwxpc&_jumpurl=${encodeURIComponent(e)}`)}},methods:{showDialog(){this.show=!0}}},D={class:"demo-wrap"};function I(o,e,a,m,i,t){const n=r("press-cell"),h=r("demo-block"),_=r("PressPCScanLogin");return u(),p("div",D,[c(h,{title:o.t("basicUsage")},{default:y(()=>[c(n,{title:"展示","is-link":"",onClick:t.showDialog},null,8,["onClick"])]),_:1},8,["title"]),c(_,{show:i.show,url:i.url,loader:i.loader},null,8,["show","url","loader"])])}const N=g(P,[["render",I]]);export{N as default};
