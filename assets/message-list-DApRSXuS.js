import{P as D}from"./press-swipe-cell-D8An88Kb.js";import{d as v,a as y}from"./press-component-HD2axD72.js";import{_ as C,r as h,o as n,b as w,n as u,c as a,F as O,i as $,w as m,f as g,a as i,t as r,d as f}from"./index-BZexHo5h.js";import"./touch-Djes3Zvx.js";import"./number-CU9l-NjU.js";import"./validator-OjQp2SYe.js";const L={name:"PressMessageList",options:{...v,styleIsolation:"shared"},components:{PressSwipeCell:D},props:{list:{type:Array,default:()=>[]},...y},emits:["onClickDetail","onDelete"],data(){return{isConfirmDelete:!1,curOpenid:null}},computed:{computedList(){return this.list.map(e=>({uniqueKey:`unique-key-${e.uniqueKey||""}-${e.id}`,...e}))}},methods:{onClickDetail(e){this.$emit("onClickDetail",e)},onDelete(e,t){typeof(t==null?void 0:t.stopPropagation)=="function"&&t.stopPropagation(),this.isConfirmDelete?this.$emit("onDelete",e,()=>{this.isConfirmDelete=!1}):this.isConfirmDelete=!0},onOpenCell(e){this.curOpenid!==e.uniqueKey&&(this.isConfirmDelete=!1),this.curOpenid=e.uniqueKey},onCloseCell(){this.isConfirmDelete=!1}}},P=["onClick"],q=["onClick"],x={class:"press-message-item__avatar-wrap"},M=["src"],K={key:0,class:"press-message-item__red-dot"},S={key:1,class:"press-message-item__unread-icon"},B={class:"press-message-item__unread-count"},E={class:"press-message-item__box"},A={class:"press-message-item__nick"},G={key:0,class:"press-message-item__content"},I={class:"press-message-item__time"},N=["onClick"];function T(e,t,c,d,l,o){const p=h("press-swipe-cell"),k=h("scroll-view");return n(),w(k,{class:"press-message-list","scroll-with-animation":"","scroll-y":!0},{default:u(()=>[(n(!0),a(O,null,$(o.computedList,s=>(n(),a("div",{key:s.uniqueKey,onClick:m(_=>o.onClickDetail(s),["stop"])},[g(p,{"right-width":100,onOpen:_=>o.onOpenCell(s),onClose:o.onCloseCell},{right:u(()=>[i("div",{class:"press-message-item__delete",onClick:m(_=>o.onDelete(s,_),["stop"])},r(l.isConfirmDelete?"确认删除":"删除"),9,N)]),default:u(()=>[i("div",{class:"press-message-item",onClick:m(_=>o.onClickDetail(s),["stop"])},[i("div",x,[i("img",{src:s.avatar,class:"press-message-item__avatar"},null,8,M),s.showRedDot?(n(),a("div",K)):s.unreadCount?(n(),a("div",S,[i("div",B,r(s.unreadCount>99?"99":s.unreadCount),1)])):f("",!0)]),i("div",E,[i("div",A,r(s.nick),1),s.content?(n(),a("div",G,r(s.content),1)):f("",!0)]),i("div",I,r(s.time),1)],8,q)]),_:2},1032,["onOpen","onClose"])],8,P))),128))]),_:1})}const V=C(L,[["render",T],["__scopeId","data-v-1218f103"]]),F=Array.from({length:110}).map((e,t)=>({id:t,nick:"这是昵称这是昵称这是昵称这是昵称这是昵称这是昵称这是昵称",content:"这里是消息内容，这里是消息内容消息内容，这里是消息内容，这里是消息内容消息内容",unreadCount:t,time:"08-20 11:32",avatar:"https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/press/img/wechat_avatar.png",showRedDot:t%5===0})),R={components:{PressMessageList:V},data(){return{list:[]}},mounted(){this.list=F},methods:{onClickDetail(e){this.onGTip(`Click ${e.id}`)},onDelete(e,t){let c=-1;this.list.forEach((d,l)=>{e.id===d.id&&(c=l)}),this.list.splice(c,1),this.onGTip(`Delete ${e.id}`),typeof t=="function"&&t()}}},b={class:"demo-wrap"};function z(e,t,c,d,l,o){const p=h("PressMessageList");return n(),a("div",b,[g(p,{list:l.list,onOnClickDetail:o.onClickDetail,onOnDelete:o.onDelete},null,8,["list","onOnClickDetail","onOnDelete"])])}const X=C(R,[["render",z]]);export{X as default};
