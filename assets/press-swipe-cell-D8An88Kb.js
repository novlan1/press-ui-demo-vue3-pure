import{d as m,a as g}from"./press-component-HD2axD72.js";import{t as v}from"./touch-Djes3Zvx.js";import{r as w}from"./number-CU9l-NjU.js";import{_ as k,o,c as n,a as y,w as l,y as f,d,v as C,x as c}from"./index-BZexHo5h.js";const p=.3;let a=[];const D={name:"PressSwipeCell",options:{...m},mixins:[v],props:{disabled:{type:Boolean,default:!1},leftWidth:{type:Number,default:0},rightWidth:{type:Number,default:0},asyncClose:{type:Boolean,default:!1},name:{type:[String,null],default:""},...g},emits:["click","open","close"],data(){return{catchMove:!1,wrapperStyle:""}},watch:{leftWidth:{handler(e=0){this.offset>0&&this.swipeMove(e)}},rightWidth:{handler(e=0){this.offset<0&&this.swipeMove(-e)}}},created(){this.offset=0,a.push(this)},destroyed(){a=a.filter(e=>e!==this)},methods:{setData(e){Object.keys(e).forEach(t=>{this[t]=e[t]})},open(e){const{leftWidth:t,rightWidth:r}=this,h=e==="left"?t:-r;this.swipeMove(h),this.$emit("open",{position:e,name:this.name})},close(){this.swipeMove(0)},swipeMove(e=0){this.offset=w(e,-this.rightWidth,this.leftWidth);const t=`translate3d(${this.offset}px, 0, 0)`,r=this.dragging?"none":"transform .6s cubic-bezier(0.18, 0.89, 0.32, 1)";this.setData({wrapperStyle:`
        -webkit-transform: ${t};
        -webkit-transition: ${r};
        transform: ${t};
        transition: ${r};
      `})},swipeLeaveTransition(){const{leftWidth:e,rightWidth:t}=this,{offset:r}=this;t>0&&-r>t*p?this.open("right"):e>0&&r>e*p?this.open("left"):this.swipeMove(0),this.setData({catchMove:!1})},startDrag(e){this.disabled||(this.startOffset=this.offset,this.touchStart(e))},noop(){},onDrag(e){this.disabled||(this.touchMove(e),this.direction==="horizontal"&&(this.dragging=!0,a.filter(t=>t!==this&&t.offset!==0).forEach(t=>t.close()),this.setData({catchMove:!0}),this.swipeMove(this.startOffset+this.deltaX)))},endDrag(){this.disabled||(this.dragging=!1,this.swipeLeaveTransition())},onClick(e){const{key:t="outside"}=e.currentTarget.dataset;this.$emit("click",t),this.offset&&(this.asyncClose?this.$emit("close",{position:t,instance:this,name:this.name}):this.swipeMove(0))}}};function M(e,t,r,h,u,s){return o(),n("div",{class:c(["press-swipe-cell",e.customClass]),"data-key":"cell",onClick:t[2]||(t[2]=l((...i)=>s.onClick&&s.onClick(...i),["stop","prevent"])),onTouchstart:t[3]||(t[3]=(...i)=>s.startDrag&&s.startDrag(...i)),onTouchmoveCapture:t[4]||(t[4]=(...i)=>s.onDrag&&s.onDrag(...i)),onTouchend:t[5]||(t[5]=(...i)=>s.endDrag&&s.endDrag(...i)),onTouchcancel:t[6]||(t[6]=(...i)=>s.endDrag&&s.endDrag(...i))},[y("div",{style:C(u.wrapperStyle),class:c(["press-swipe-cell__content",e.offset?"press-swipe-cell__content--moved":""])},[r.leftWidth?(o(),n("div",{key:0,class:"press-swipe-cell__left","data-key":"left",onClick:t[0]||(t[0]=l((...i)=>s.onClick&&s.onClick(...i),["stop","prevent"]))},[f(e.$slots,"left",{},void 0,!0)])):d("",!0),f(e.$slots,"default",{},void 0,!0),r.rightWidth?(o(),n("div",{key:1,class:"press-swipe-cell__right","data-key":"right",onClick:t[1]||(t[1]=l((...i)=>s.onClick&&s.onClick(...i),["stop","prevent"]))},[f(e.$slots,"right",{},void 0,!0)])):d("",!0)],6)],34)}const B=k(D,[["render",M],["__scopeId","data-v-db62c0c4"]]);export{B as P};
