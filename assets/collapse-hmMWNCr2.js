import{P as A}from"./press-cell-BGAAyfSe.js";import{r as w}from"./system-BAdrsxg_.js";import{g as B}from"./rect-CMQ5Gq1K.js";import{d as N,a as k}from"./press-component-CjxC_Cwf.js";import{u as b}from"./utils-Do31p4kb.js";import{C as E,P as I}from"./relation-Cl7c7lz0.js";import{a as u}from"./parent-map-BqFbVUej.js";import{_ as v,r as p,o as _,c as S,f as a,n as l,y as f,x as y,a as g,v as $,u as d,t as c}from"./index-BapbWgDO.js";import{P as T}from"./press-icon-plus-BHni9MA3.js";import"./link-Ds6ljOst.js";import"./add-unit-Df5pRFBE.js";import"./event-B9ui_niX.js";import"./support-passive-CNRHRm4O.js";import"./press-info-fdIUeWSl.js";function h({height:e,duration:i}){return[`height: ${e};`,`transition: height ${i}ms ease-in-out 0ms, top ${i}ms ease-in-out 0ms, -webkit-transform ${i}ms ease-in-out 0ms, transform ${i}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function z(e,i,t,o){if(i){if(o===0)e.animationStyle=h({height:"auto",duration:0});else{const n=t?300:1;e.animationStyle=h({height:`${o}px`,duration:n}),setTimeout(()=>{e.animationStyle=h({height:"auto",duration:0})},n)}return}const s=1;e.animationStyle=h({height:`${o}px`,duration:s}),w(()=>{e.animationStyle=h({height:0,duration:300})})}function x(e,i,t){B(e,".press-collapse-item__content").then(o=>o.height).then(o=>{z(e,i,t,o)})}const L={name:"PressCollapseItem",options:{...N,styleIsolation:"shared"},components:{PressCell:A},mixins:[E(u)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},contentClass:{type:String,default:""},...k},emits:[],data(){return{expanded:!1,animation:{},mounted:!1,animationStyle:"height: 0;"}},computed:{collapseItemClass(){const{disabled:e,expanded:i}=this;return b.bem2("collapse-item__title",{disabled:e,expanded:i})},collapseItemCustomClass(){return""},wrapperClass(){return b.bem2("collapse-item__wrapper")}},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[u])return;const{value:e,accordion:i}=this[u],{children:t=[]}=this[u],{name:o}=this,s=t.indexOf(this),n=o??s,r=i?e===n:(e||[]).some(m=>m===n);r!==this.expanded&&x(this,r,this.mounted),this.expanded=r},onClick(){if(this.disabled)return;const{name:e,expanded:i}=this,t=this[u].children.indexOf(this),o=e??t;this[u].switch(o,!i)}}};function O(e,i,t,o,s,n){const r=p("press-cell");return _(),S("div",{class:y(e.customClass+" press-collapse-item "+(e.index!==0?"press-hairline--top":""))},[a(r,{size:t.size,title:t.title,"title-class":t.titleClass,icon:t.icon,value:t.value,label:t.label,"is-link":t.isLink,clickable:t.clickable,border:t.border&&s.expanded,class:y(n.collapseItemClass),"custom-class":n.collapseItemCustomClass,"hover-class":"press-cell--hover",center:"",onClick:n.onClick},{title:l(()=>[f(e.$slots,"title",{},void 0,!0)]),"right-icon":l(()=>[f(e.$slots,"right-icon",{},void 0,!0)]),default:l(()=>[f(e.$slots,"value",{},void 0,!0)]),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","class","custom-class","onClick"]),g("div",{class:y(n.wrapperClass),style:$(s.animationStyle)},[g("div",{class:y(["press-collapse-item__content",t.contentClass])},[f(e.$slots,"default",{},void 0,!0)],2)],6)],2)}const D=v(L,[["render",O],["__scopeId","data-v-e4d7bee7"]]),V={name:"PressCollapse",options:{...N},mixins:[I(u)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},...k},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach(e=>{e.updateExpanded()})},switch(e,i){const{accordion:t,value:o}=this,s=e;t?e=i?e:"":e=i?(o||[]).concat(e):(o||[]).filter(n=>n!==e),i?this.$emit("open",s):this.$emit("close",s),this.$emit("change",e),this.$emit("input",e)}}};function q(e,i,t,o,s,n){return _(),S("div",{class:y(e.customClass+" press-collapse "+(t.border?"press-hairline--top-bottom":""))},[f(e.$slots,"default")],2)}const M=v(V,[["render",q]]),R={i18n:{"zh-CN":{accordion:"手风琴",titleSlot:"自定义标题内容",text:"代码是写出来给人看的，附带能在机器上运行"},"en-US":{accordion:"Accordion",titleSlot:"Custom title",text:"Content"}},components:{PressCollapseItem:D,PressCollapse:M,PressIconPlus:T},data(){return{activeNames:["1"],activeNames2:"1",activeNames3:["1"],activeNamesTitle:["1"],sectionStyle:"margin: 0;",headerStyle:"background: #f7f8fa;"}},methods:{onChange(e){console.log("onChange.value: ",e),this.activeNames=e},onChangeAccordion(e){this.activeNames2=e},onChangeDisabled(e){this.activeNames3=e},onChangeTitle(e){this.activeNamesTitle=e}}},U={class:"demo-wrap demo-wrap--gray"};function j(e,i,t,o,s,n){const r=p("press-collapse-item"),m=p("press-collapse"),C=p("demo-block"),P=p("press-icon-plus");return _(),S("div",U,[a(C,{title:e.t("basicUsage"),"section-style":s.sectionStyle,"header-style":s.headerStyle},{default:l(()=>[a(m,{value:s.activeNames,onChange:n.onChange},{default:l(()=>[a(r,{title:`${e.t("title")} 1`,name:"1"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),a(r,{title:`${e.t("title")} 2`,name:"2"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),a(r,{title:`${e.t("title")} 3`,name:"3"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange"])]),_:1},8,["title","section-style","header-style"]),a(C,{title:e.t("accordion"),"header-style":s.headerStyle,"section-style":s.sectionStyle},{default:l(()=>[a(m,{value:s.activeNames2,accordion:"",onChange:n.onChangeAccordion},{default:l(()=>[a(r,{title:`${e.t("title")} A`,name:"1"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),a(r,{title:`${e.t("title")} B`,name:"2"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),a(r,{title:`${e.t("title")} C`,name:"3"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange"])]),_:1},8,["title","header-style","section-style"]),a(C,{title:e.t("disabled"),"header-style":s.headerStyle,"section-style":s.sectionStyle},{default:l(()=>[a(m,{value:s.activeNames3,accordion:"",onChange:n.onChangeDisabled},{default:l(()=>[a(r,{title:`${e.t("title")} X`,name:"1"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),a(r,{title:`${e.t("title")} Y`,disabled:"",name:"2"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"]),a(r,{title:`${e.t("title")} Z`,name:"3",disabled:""},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange"])]),_:1},8,["title","header-style","section-style"]),a(C,{title:e.t("titleSlot"),"section-style":s.sectionStyle,"header-style":s.headerStyle},{default:l(()=>[a(m,{value:s.activeNamesTitle,onChange:n.onChangeTitle},{default:l(()=>[a(r,{name:"1"},{title:l(()=>[g("div",null,[d(c(e.t("title"))+" 1 ",1),a(P,{name:"question-o"})])]),default:l(()=>[d(" "+c(e.t("text")),1)]),_:1}),a(r,{title:`${e.t("title")} 2`,name:"2",icon:"shop-o"},{default:l(()=>[d(c(e.t("text")),1)]),_:1},8,["title"])]),_:1},8,["value","onChange"])]),_:1},8,["title","section-style","header-style"])])}const ie=v(R,[["render",j]]);export{ie as default};
