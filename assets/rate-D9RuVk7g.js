import{P as b}from"./press-icon-plus-BqwcHqXX.js";import{b as S}from"./rect-BYiZ8mJe.js";import{u as d}from"./utils-DhsswyhS.js";import{s as v}from"./style-CpIyAjCl.js";import{n as I}from"./add-unit-BnQ5fsFt.js";import{_ as y,r as g,o as i,c as C,a as k,F as V,y as B,n as h,m as f,f as a,b as p,d as w,l as c}from"./index-BxhWvFY9.js";import"./press-info-BrbwTMID.js";import"./press-component-DrBAWcfZ.js";import"./system-CXLAmUl6.js";const N={name:"PressRate",components:{PressIconPlus:b},field:!0,props:{value:{type:Number,default:0},readonly:Boolean,disabled:Boolean,allowHalf:Boolean,size:{type:[String,Number],default:""},icon:{type:String,default:"star"},voidIcon:{type:String,default:"star-o"},color:{type:String,default:""},voidColor:{type:String,default:""},disabledColor:{type:String,default:""},count:{type:Number,default:5},gutter:{type:[Number,String],default:""},touchable:{type:Boolean,default:!0},customClass:{type:String,default:""},iconClass:{type:String,default:""}},emits:["input","change"],data(){return{innerValue:0,innerCountArray:Array.from({length:5}),utils:d,style:v}},computed:{iconStyle(){return v({fontSize:d.addUnit(this.size)})},iconCustomStyle(){return""}},watch:{value:{handler(e){e!==this.innerValue&&(this.innerValue=e)},immediate:!0},count:{handler(e){this.innerCountArray=Array.from({length:e})},immediate:!0}},methods:{onSelect(e){!this.disabled&&!this.readonly&&(this.innerValue=e+1,I(()=>{this.$emit("input",e+1),this.$emit("change",e+1)}))},onTouchMove(e){const{touchable:r}=this;if(!r)return;const{clientX:t}=e.touches[0];S(this,".press-rate__icon").then(m=>{const n=m.sort((o,u)=>o.x-u.x).find(o=>t>=o.left&&t<=o.right),l=m.indexOf(n);n!=null&&this.onSelect(l)})},getIconBaseClass(e){const{disabled:r,innerValue:t}=this;return d.bem2("rate__icon",[{disabled:r,full:e+1<=t}])},getIconHalfClass(e){const{disabled:r,innerValue:t}=this;return d.bem2("rate__icon",["half",{disabled:r,full:e+.5<=t}])},getIconBaseCustomClass(e){return this.iconClass},getIconHalfCustomClass(e){return this.iconClass}}},z={class:"press-rate-index"};function H(e,r,t,m,n,l){const o=g("press-icon-plus");return i(),C("div",z,[k("div",{class:h([n.utils.bem2("rate"),t.customClass]),onTouchmove:r[0]||(r[0]=(...u)=>l.onTouchMove&&l.onTouchMove(...u))},[(i(!0),C(V,null,B(n.innerCountArray,(u,s)=>(i(),C("div",{key:s,class:h([n.utils.bem2("rate__item")]),style:f(""+n.style({paddingRight:s!==t.count-1?n.utils.addUnit(t.gutter):null}))},[a(o,{name:s+1<=n.innerValue?t.icon:t.voidIcon,class:h([l.getIconBaseClass(s)]),style:f(""+l.iconStyle),"custom-class":l.getIconBaseCustomClass(s),"custom-style":l.iconCustomStyle,"data-score":s,color:t.disabled?t.disabledColor:s+1<=n.innerValue?t.color:t.voidColor,onClick:_=>l.onSelect(s)},null,8,["name","class","style","custom-class","custom-style","data-score","color","onClick"]),t.allowHalf?(i(),p(o,{key:0,name:s+.5<=n.innerValue?t.icon:t.voidIcon,class:h([l.getIconHalfClass(s)]),style:f(""+l.iconStyle),"custom-class":l.getIconHalfCustomClass(s),"custom-style":l.iconCustomStyle,"data-score":s-.5,color:t.disabled?t.disabledColor:s+.5<=n.innerValue?t.color:t.voidColor,onClick:_=>l.onSelect(s-.5)},null,8,["name","class","style","custom-class","custom-style","data-score","color","onClick"])):w("",!0)],6))),128))],34)])}const A=y(N,[["render",H],["__scopeId","data-v-37f5e556"]]),E={i18n:{"zh-CN":{halfStar:"半星",disabled:"禁用状态",customIcon:"自定义图标",customImage:"自定义图片",customStyle:"自定义样式",customCount:"自定义数量",readonly:"只读状态",changeEvent:"监听 change 事件",toastContent:e=>`当前值：${e}`},"en-US":{halfStar:"Half Star",disabled:"Disabled",customImage:"Custom Image",customIcon:"Custom Icon",customStyle:"Custom Style",customCount:"Custom Count",readonly:"Readonly",changeEvent:"Change Event",toastContent:e=>`current value：${e}`}},components:{PressRate:A},data(){return{value:3,half:2.5}},methods:{onChange(e){this.onGTip(`value: ${e}`)}}},T={class:"wrap"};function P(e,r,t,m,n,l){const o=g("press-rate"),u=g("demo-block");return i(),C("div",T,[a(u,{title:e.t("basicUsage")},{default:c(()=>[a(o,{value:3,"custom-class":"press-rate--demo-class",onChange:l.onChange},null,8,["onChange"])]),_:1},8,["title"]),a(u,{title:e.t("customIcon")},{default:c(()=>[a(o,{value:n.value,icon:"like","void-icon":"like-o",onChange:l.onChange},null,8,["value","onChange"])]),_:1},8,["title"]),a(u,{title:e.t("customImage")},{default:c(()=>[a(o,{value:n.value,"void-icon":"https://image-1251917893.file.myqcloud.com/Esports/new/user/star.png",icon:"https://image-1251917893.file.myqcloud.com/Esports/new/user/sel-star.png",onChange:l.onChange},null,8,["value","onChange"])]),_:1},8,["title"]),a(u,{title:e.t("customStyle")},{default:c(()=>[a(o,{value:n.value,size:25,color:"#ffd21e","void-icon":"star","void-color":"#eee",onChange:l.onChange},null,8,["value","onChange"])]),_:1},8,["title"]),a(u,{title:e.t("halfStar")},{default:c(()=>[a(o,{value:n.half,"allow-half":"","void-icon":"star","void-color":"#eee",onChange:l.onChange},null,8,["value","onChange"])]),_:1},8,["title"]),a(u,{title:e.t("customCount")},{default:c(()=>[a(o,{value:n.value,count:6,onChange:l.onChange},null,8,["value","onChange"])]),_:1},8,["title"]),a(u,{title:e.t("disabled")},{default:c(()=>[a(o,{value:n.value,disabled:"",onChange:l.onChange},null,8,["value","onChange"])]),_:1},8,["title"]),a(u,{title:e.t("readonly")},{default:c(()=>[a(o,{value:n.value,readonly:"",onChange:l.onChange},null,8,["value","onChange"])]),_:1},8,["title"])])}const X=y(E,[["render",P],["__scopeId","data-v-585b4bf7"]]);export{X as default};
