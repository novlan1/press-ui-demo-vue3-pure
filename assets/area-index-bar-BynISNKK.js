import{P}from"./press-cell-CpEJn8Fu.js";import{P as L}from"./press-popup-BD9wiulf.js";import{P as S,a as g}from"./press-index-bar-BK1orPi9.js";import{_ as C,r as d,o as t,c as n,f as p,n as y,a as c,x as O,w as v,t as _,d as I,b as k,F as u,i as f,h as D}from"./index-DU6LSpJC.js";import"./press-icon-plus-B9pxPV2T.js";import"./utils-Do31p4kb.js";import"./add-unit-Df5pRFBE.js";import"./press-info-Cexnh41C.js";import"./press-component-BYCAM0Tw.js";import"./validator-CMi1mmGD.js";import"./link-Ds6ljOst.js";import"./event-DUjdombs.js";import"./support-passive-CNRHRm4O.js";import"./press-button-CU9PqmxY.js";import"./press-loading-plus-BbOWp1Vm.js";import"./press-loading-Cmnq0S8a.js";import"./button-BaKXjqxg.js";import"./system-BAdrsxg_.js";import"./function-DQ-N3A6u.js";import"./rect-ZZRvyvMD.js";import"./scroll-DZ_Dh06R.js";import"./relation-Cl7c7lz0.js";import"./parent-map-CSroF5oj.js";import"./color-DciZLlTH.js";const T={name:"PressAreaIndexBar",options:{styleIsolation:"shared"},components:{PressPopup:L,PressIndexAnchor:S,PressIndexBar:g},props:{title:{type:String,default:"选择赛事所在区域"},areaData:{type:Array,default:()=>[]},sProvince:{type:String,default:""},sCity:{type:String,default:""},windowTop:{type:Number,default:0},showIndexList:{type:Boolean,default:!0}},emits:["onCancel","onConfirm","onUnLimit"],data(){return{cityList:[],isShow:!0,province:"",city:"",stickyOffsetTop:0}},computed:{innerIndexList(){return this.showIndexList?this.isShow?this.areaData.map(e=>e.key):this.cityList.map(e=>e.key):[]}},watch:{sCity(e){this.city=e},sProvince(e){this.province=e}},mounted(){this.city=this.sCity,this.province=this.sProvince,setTimeout(()=>{this.$refs.pressIndexBar.updateData(),this.$refs.pressIndexBar.setAnchorsRect().then(e=>{var r;this.stickyOffsetTop=((r=e[0])==null?void 0:r.top)||0})},400)},methods:{handleProvince(e){this.isShow=!1,this.city="",this.province=e.name,this.cityList=e.city},handleCity(e){this.city=e.name},handleReSelect(){this.isShow=!0,this.province="",this.city=""},handleUnLimit(e){this.city="",this.$emit("onUnLimit",e)},onCancel(){this.$emit("onCancel")},confirm(){this.$emit("onConfirm",this.province,this.city)}}},U={class:"press-area"},R={class:"press-area__top-bar"},b={class:"press-area__addresses"},z={key:0,class:"press-area__address--unselected"},N={class:"press-area__address-limit"},J=["onClick"],M={class:"press-area__area-name"},V=["onClick"],E={class:"press-area__area-name"};function F(e,r,l,A,s,i){const h=d("press-index-anchor"),m=d("PressIndexBar"),x=d("PressPopup");return t(),n("div",U,[p(x,{"popup-title":l.title,"close-icon":!0,"arrow-icon":!1,button:"确定",onOnCancel:i.onCancel,onConfirm:i.confirm},{default:y(()=>[c("div",R,[c("div",b,[c("div",{class:O(s.province?"press-area__address--selected":"press-area__address--unselected"),onClick:r[0]||(r[0]=v((...o)=>i.handleReSelect&&i.handleReSelect(...o),["stop"]))},_(s.province||"请选择"),3),s.province!==""?(t(),n("div",z,_(s.city||"请选择"),1)):I("",!0)]),c("div",N,[s.province?(t(),n("div",{key:1,onClick:r[2]||(r[2]=v(o=>i.handleUnLimit("city"),["stop"]))}," 不限城市 ")):(t(),n("div",{key:0,onClick:r[1]||(r[1]=v(o=>i.handleUnLimit("province"),["stop"]))}," 不限省份 "))])]),s.isShow?(t(),k(m,{key:"province",ref:"pressIndexBar","index-list":i.innerIndexList,"sticky-offset-top":s.stickyOffsetTop,"highlight-color":"#1181D7",sticky:!1,"window-top":l.windowTop,"z-index":10},{default:y(()=>[(t(!0),n(u,null,f(l.areaData,(o,w)=>(t(),n("div",{key:w},[p(h,{index:o.key},null,8,["index"]),(t(!0),n(u,null,f(o.value,a=>(t(),n("div",{key:a.p_id,class:"press-area__area-item",onClick:B=>i.handleProvince(a)},[c("div",M,_(a.name),1)],8,J))),128))]))),128))]),_:1},8,["index-list","sticky-offset-top","window-top"])):(t(),k(m,{key:"city","index-list":i.innerIndexList,"sticky-offset-top":s.stickyOffsetTop,"highlight-color":"#1181D7",sticky:!1,"window-top":l.windowTop,"z-index":10},{default:y(()=>[(t(!0),n(u,null,f(s.cityList,(o,w)=>(t(),n("div",{key:w},[p(h,{index:o.key},null,8,["index"]),(t(!0),n(u,null,f(o.value,a=>(t(),n("div",{key:a.id,class:"press-area__area-item",onClick:B=>i.handleCity(a)},[c("div",E,_(a.name),1)],8,V))),128))]))),128))]),_:1},8,["index-list","sticky-offset-top","window-top"]))]),_:1},8,["popup-title","onOnCancel","onConfirm"])])}const j=C(T,[["render",F],["__scopeId","data-v-d9e252c9"]]),q="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/press/data/area.json",G={components:{PressCell:P,PressAreaIndexBar:j},data(){return{areaJson:[],province:"",city:"",showAreaIndexBar:!1,showIndexList:!0}},mounted(){this.getAreaData()},methods:{onShowAreaIndexBar(){this.showAreaIndexBar=!0},handleReSelect(e){e==="city"?this.city="":(this.province="",this.city=""),this.$forceUpdate()},handleSelectArea(e,r){e?(this.province=e,this.city=r):(this.city="",this.province=""),this.showAreaIndexBar=!1},closeMatchArea(){this.showAreaIndexBar=!1},getAreaData(){D(q).then(e=>{this.areaJson=e})}}},H={class:"demo-wrap"};function K(e,r,l,A,s,i){const h=d("press-cell"),m=d("demo-block"),x=d("PressAreaIndexBar");return t(),n("div",H,[p(m,{title:"AreaIndexBar"},{default:y(()=>[p(h,{title:"Show","is-link":"",onClick:i.onShowAreaIndexBar},null,8,["onClick"])]),_:1}),s.showAreaIndexBar?(t(),k(x,{key:0,"area-data":s.areaJson,"s-province":s.province,"s-city":s.city,"window-top":44,"show-index-list":s.showIndexList,onOnUnLimit:i.handleReSelect,onOnCancel:i.closeMatchArea,onOnConfirm:i.handleSelectArea},null,8,["area-data","s-province","s-city","show-index-list","onOnUnLimit","onOnCancel","onOnConfirm"])):I("",!0)])}const xe=C(G,[["render",K]]);export{xe as default};
