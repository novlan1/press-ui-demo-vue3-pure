import{s as B,a as P}from"./index-zPv_jHD7.js";import{i as F}from"./h5-handler-BkyArfua.js";import{a as O}from"./handler-helper-BKr0zvNe.js";import{R as _,_ as D,O as V,B as H,ak as b,r as f,c as l,a as i,o as a,b as h,d as C,t as d,w as y,F as j,e as T,k as w,H as k,m as M,n as x}from"./index-saBp3IWc.js";import{S as N}from"./scroll-view-DoQ3YCEM.js";import{P as R}from"./press-field-YVBm6zVS.js";import{g as z}from"./dialog-mixin-Y_upUDLD.js";function q(){const e=getCurrentPages();return e[e.length-1]}function E({options:e,currentOptions:o,dialogComponent:p,id:S}){e=Object.assign(Object.assign({},o),e);const s=e.context||q();let t=B(s,e.selector);if(delete e.context,delete e.selector,!t&&p&&(t=F(p,S)),t){const u={...e};return P(t,u),P(t,u,"showDialog").then(n=>Promise.resolve(n)).catch(n=>Promise.reject(n))}const c=`The ${e.selector} node is not found, please confirm whether the selector and context are correct`;return console.warn(c),Promise.reject(c)}const g={show:{type:Boolean,default:!1},src:{type:String,default:""},dialogType:{type:[Number,String],default:1},title:{type:String,default:_("dialog.title")},content:{type:String,default:""},canTouchRemove:{type:Boolean,default:!0},confirmText:{type:String,default:_("confirm")},cancelText:{type:String,default:""},onClickCancel:{type:[Function,null],default:null},onConfirmClick:{type:[Function,null],default:null},htmlContent:{type:String,default:""},zIndex:{type:[Number,String],default:"99"},useScrollView:{type:Boolean,default:!1},onClickImage:{type:[Function,null],default:null},onLongPressImage:{type:[Function,null],default:null},showField:{type:Boolean,default:!1},fieldPlaceHolder:{type:String,default:""},fieldValue:{type:String,default:""},customClass:{type:String,default:""}},Q={name:"PressDialog",options:{...H(!0,!1),styleIsolation:"shared"},components:{PressButton:V,PressField:R},mixins:[z(g),N],props:{...g},emits:["confirm","cancel","onLongPressImage","onClickImage"],data(){return{resolve:"",reject:"",promise:"",mShowButtonLoading:!1,inputValue:""}},watch:{dataFieldValue:{handler(e){this.inputValue=e},immediate:!0}},mounted(){},methods:{preventTouchMove(){},confirm(){if(this.dataDialogType===2){if(this.mShowButtonLoading)return;this.mShowButtonLoading=!0}typeof this.dataOnConfirmClick=="function"?b(this.dataOnConfirmClick(this)).then(e=>{e&&this.resolveConfirm()}).catch(()=>{}):this.resolveConfirm()},resolveConfirm(){this.resolve&&this.resolve("confirm"),this.$emit("confirm"),this.remove()},cancel(){typeof this.dataOnClickCancel=="function"&&this.dataOnClickCancel(this),typeof this.reject=="function"&&this.reject("cancel"),this.$emit("cancel"),this.remove()},showDialog(){return this.dataShow=!0,this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),this.promise},touchRemove(){this.dataCanTouchRemove&&this.remove(),this.$emit("cancel")},remove(){this.dataShow=!1,this.mShowButtonLoading=!1},destroy(){},handleLongPressImage(){typeof this.dataOnLongPressImage=="function"&&this.dataOnLongPressImage(),this.$emit("onLongPressImage")},handleClickImage(){typeof this.dataOnClickImage=="function"&&this.dataOnClickImage(),this.$emit("onClickImage")},onChangeField(e){this.inputValue=e}}},U={class:"press-dialog__content-wrap"},Z={class:"press-dialog__title"},A=["innerHTML"],G={key:2,class:"press-dialog__content"},J={key:4,class:"press-dialog__img-wrap"},K=["src"],W={class:"press-dialog__btn--wrap"},X={class:"press-dialog__btn--spacing"};function Y(e,o,p,S,s,t){const c=f("scroll-view"),u=f("PressField"),m=f("PressButton");return e.dataShow?(a(),l("div",{key:0,class:x(["press-dialog",e.dataCustomClass]),style:M({zIndex:`${e.dataZIndex}`}),onClick:o[2]||(o[2]=y((...n)=>t.touchRemove&&t.touchRemove(...n),["stop"])),onTouchmove:o[3]||(o[3]=y((...n)=>t.preventTouchMove&&t.preventTouchMove(...n),["stop"]))},[h("div",U,[h("p",Z,d(e.dataTitle),1),e.dataUseScrollView&&e.dataHtmlContent?(a(),C(c,{key:0,"scroll-y":"true",class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,["innerHTML"])):e.dataHtmlContent?(a(),l("p",{key:1,class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,A)):i("",!0),e.dataHtmlContent?i("",!0):(a(),l("p",G,d(e.dataContent),1)),e.dataShowField?(a(),C(u,{key:3,"custom-class":"press-dialog__field","title-width":"0",placeholder:e.dataFieldPlaceHolder,value:e.dataFieldValue,"model-value":e.dataFieldValue,onChange:t.onChangeField},null,8,["placeholder","value","model-value","onChange"])):i("",!0),e.dataSrc?(a(),l("div",J,[e.dataSrc?(a(),l("img",{key:0,class:"press-dialog__img","show-menu-by-longpress":!0,src:e.dataSrc,onClick:o[0]||(o[0]=y((...n)=>t.handleClickImage&&t.handleClickImage(...n),["stop"])),onLongpress:o[1]||(o[1]=(...n)=>t.handleLongPressImage&&t.handleLongPressImage(...n))},null,40,K)):i("",!0)])):i("",!0),h("div",W,[e.dataCancelText&&e.dataCancelText.length>0?(a(),l(j,{key:0},[h("div",X,[T(m,{type:"e-sport-secondary","custom-style":"width: 100px;height: 36px;",onClick:t.cancel},{default:w(()=>[k(d(e.dataCancelText),1)]),_:1},8,["onClick"])]),T(m,{type:"e-sport-primary-bg",loading:s.mShowButtonLoading,"custom-style":"width: 100px;height: 36px;",onClick:t.confirm},{default:w(()=>[k(d(s.mShowButtonLoading?"":e.dataConfirmText),1)]),_:1},8,["loading","onClick"])],64)):e.dataConfirmText||s.mShowButtonLoading?(a(),C(m,{key:1,type:"e-sport-primary-bg",loading:s.mShowButtonLoading,"custom-style":"width: 148px;height: 36px;",onClick:t.confirm},{default:w(()=>[k(d(s.mShowButtonLoading?"":e.dataConfirmText),1)]),_:1},8,["loading","onClick"])):i("",!0)])])],38)):i("",!0)}const $=D(Q,[["render",Y],["__scopeId","data-v-2da7f8d5"]]);let I=[];const L=Object.keys(g).reduce((e,o)=>(e[o]=g[o].default,e),{selector:"#tip-match-comm-tips-dialog"});let v=Object.assign({},L);const r=e=>E({options:e,currentOptions:v,id:"tip-dialog-showCommTipsDialog",dialogComponent:$});function ee(e){I=e}function te(e){v=e}r.show=e=>r(e);O({Dialog:r,queue:I,currentOptions:v,defaultOptions:L,updateQueue:ee,updateCurrentOptions:te});const de=r.show;r.setDefaultOptions;r.resetDefaultOptions;export{r as D,$ as P,de as s};
