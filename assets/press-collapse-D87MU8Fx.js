import{m as _,_ as f,k as y,P as v,l as C,G as m,y as x,r as k,c as g,o as S,e as P,b as h,h as u,A as c,B as p,n as d}from"./index-D8fxni52.js";import{C as I,P as n,a as E}from"./relation-DncSzthF.js";import{g as B}from"./rect-CzEpIJLg.js";function r({height:e,duration:s}){return[`height: ${e};`,`transition: height ${s}ms ease-in-out 0ms, top ${s}ms ease-in-out 0ms, -webkit-transform ${s}ms ease-in-out 0ms, transform ${s}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function A(e,s,t,l){if(s){if(l===0)e.animationStyle=r({height:"auto",duration:0});else{const a=t?300:1;e.animationStyle=r({height:`${l}px`,duration:a}),setTimeout(()=>{e.animationStyle=r({height:"auto",duration:0})},a)}return}const i=1;e.animationStyle=r({height:`${l}px`,duration:i}),_(()=>{e.animationStyle=r({height:0,duration:300})})}function w(e,s,t){B(e,".press-collapse-item__content").then(l=>l.height).then(l=>{A(e,s,t,l)})}const z={name:"PressCollapseItem",options:{...C,styleIsolation:"shared"},components:{PressCell:v},mixins:[I(n)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},titleStyle:{type:[String,Object],default:""},contentStyle:{type:[String,Object],default:""},contentClass:{type:String,default:""},...y},emits:[],data(){const{defaultExpandAll:e}=this[n]||{};return{expanded:!!e,animation:{},mounted:!1,animationStyle:e?"height: auto;":"height: 0;"}},computed:{cellTitleStyle(){return{}},rightIconStyle(){return{}},collapseItemClass(){const{disabled:e,expanded:s}=this;return m.bem2("collapse-item__title",{disabled:e,expanded:s})},collapseItemCustomClass(){let e="";return e=this.collapseItemClass,e},collapseItemContentStyle(){return x(this.contentStyle)},wrapperClass(){return m.bem2("collapse-item__wrapper")}},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[n])return;const{value:e,accordion:s}=this[n],{children:t=[]}=this[n],{name:l}=this,i=t.indexOf(this),a=l??i,o=s?e===a:(e||[]).some(b=>b===a);o!==this.expanded&&w(this,o,this.mounted),this.expanded=o},onClick(){if(this.disabled)return;const{name:e,expanded:s}=this,t=this[n].children.indexOf(this),l=e??t;this[n].switch(l,!s)}}};function O(e,s,t,l,i,a){const o=k("PressCell");return S(),g("div",{class:d(e.customClass+" press-collapse-item "+(e.index!==0?"press-hairline--top":""))},[P(o,{size:t.size,title:t.title,"title-class":t.titleClass,icon:t.icon,value:t.value,label:t.label,"is-link":t.isLink,clickable:t.clickable,border:t.border&&i.expanded,"custom-class":a.collapseItemCustomClass,"custom-style":t.titleStyle,"title-style":a.cellTitleStyle,"right-icon-style":a.rightIconStyle,"hover-class":"press-cell--hover",center:"",onClick:a.onClick},{title:u(()=>[c(e.$slots,"title",{},void 0,!0)]),"right-icon":u(()=>[c(e.$slots,"right-icon",{},void 0,!0)]),default:u(()=>[c(e.$slots,"value",{},void 0,!0)]),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","custom-style","title-style","right-icon-style","onClick"]),h("div",{class:d(a.wrapperClass),style:p(i.animationStyle)},[h("div",{class:d(["press-collapse-item__content",t.contentClass]),style:p(a.collapseItemContentStyle)},[c(e.$slots,"default",{},void 0,!0)],6)],6)],2)}const M=f(z,[["render",O],["__scopeId","data-v-73cfc676"]]),$={name:"PressCollapse",options:{...C},mixins:[E(n)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...y},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach(e=>{e.updateExpanded()})},switch(e,s){const{accordion:t,value:l}=this,i=e;t?e=s?e:"":e=s?(l||[]).concat(e):(l||[]).filter(a=>a!==e),s?this.$emit("open",i):this.$emit("close",i),this.$emit("change",e),this.$emit("input",e)}}};function N(e,s,t,l,i,a){return S(),g("div",{class:d(e.customClass+" press-collapse "+(t.border?"press-hairline--top-bottom":""))},[c(e.$slots,"default")],2)}const R=f($,[["render",N]]);export{M as P,R as a};
