import{P as g}from"./press-button-aOpBGG58.js";import{t as a}from"./function-C6V8280e.js";import{g as v,F as m,b as D,c as P}from"./press-component-D9D_j5DA.js";import{_ as T,r as S,o as n,c as i,n as c,w as s,a as f,d as l,i as p,t as y,b as O,l as b,A as B,m as C}from"./index-BrqLSZap.js";const w={arrowIcon:"showBackArrow",closeIcon:"isShowpopupClose",showTitle:"isShowTitle",horizontal:"isCrossSlab",title:"popupTitle",button:"popupTitleBtn",borderButton:"isBorderBtn",closeOnClickOverlay:"canTouchRemove",confirm:"onConfirm",cancel:"onCancel"},_={customStyle:{type:String,default:""},showTitle:{type:Boolean,default:!0,required:!1},widthNumber:{type:Number,default:100,required:!1},horizontal:{type:Boolean,default:!1,required:!1},closeIcon:{type:Boolean,default:!1,required:!1},arrowIcon:{type:Boolean,default:!1},title:{type:String,default:"",required:!1},button:{type:String,default:"",required:!1},borderButton:{type:Boolean,default:!1,required:!1},disabledButton:{type:Boolean,default:!1,required:!1},validateConfirm:{type:[Function,null],default:null},isShow:{type:Boolean,default:!0,required:!1},zIndex:{type:String,default:"99",required:!1},popupClass:{type:String,default:"",required:!1},closeOnClickOverlay:{type:Boolean,default:!0},asyncClose:{type:[Function,null],default:null},asyncCancel:{type:[Function,null],default:null},asyncConfirm:{type:[Function,null],default:null},mode:{type:String,default:""},lockScroll:{type:Boolean,default:!1}},d=v(_,w),h=300,M={name:"PressPopup",components:{PressButton:g},props:{...d},options:{virtualHost:!0,styleIsolation:"shared"},emits:["onCancel","cancel","onConfirm","confirm"],data(){return{isEnter:!0,innerShow:this.mode===m?!1:!!this.isShow,timer:0,watchShowTimer:null,functionModeData:{...D(d)}}},computed:{buttonType(){return this.getPropOrData("borderButton")?"e-sport-border":this.getPropOrData("disabledButton")?"e-sport-primary-disabled":"e-sport-primary"},popupStyle(){const e=this.getPropOrData("customStyle");return`z-index: ${this.getPropOrData("zIndex")};${e};`},isFunctionMode(){return this.mode===m}},watch:{isShow:{handler(e){this.isFunctionMode||(this.isEnter=e,e?(clearTimeout(this.watchShowTimer),this.innerShow=!0):(clearTimeout(this.watchShowTimer),this.watchShowTimer=setTimeout(()=>{this.innerShow=!1},h)))},immediate:!0},isEnter:{handler(e){e?document.body.style.overflowY="hidden":document.body.style.overflowY=""},immediate:!0}},mounted(){},beforeDestroy(){this.onBeforeDestroy()},beforeUnmount(){this.onBeforeDestroy()},methods:{onBeforeDestroy(){clearTimeout(this.timer)},showDialog(e){e&&(this.functionModeData={...this.functionModeData,...e}),this.innerShow=!0,this.isEnter=!0},getPropOrData(e){return P({allProps:d,isFunctionMode:this.isFunctionMode,functionModeData:this.functionModeData,propsKeyMap:w,key:e,context:this})},preventTouchMove(){},onClickTouch(){this.getPropOrData("closeOnClickOverlay")&&this.clickCancel()},clickCancel(){if(typeof this.asyncCancel=="function"){a(this.asyncCancel()).then(e=>{e&&this.emitCancel()});return}if(typeof this.asyncClose=="function"){a(this.asyncClose()).then(e=>{e&&this.emitCancel()});return}if(this.$parent.validateCancel){a(this.$parent.validateCancel()).then(e=>{e&&this.emitCancel()});return}this.emitCancel()},emitCancel(){this.isEnter=!1,this.timer=setTimeout(()=>{this.$emit("onCancel"),this.$emit("cancel"),this.innerShow=!1},h);const{callback:e}=this.functionModeData;typeof e=="function"&&e("cancel")},clickConfirm(){if(typeof this.asyncConfirm=="function"){a(this.asyncConfirm()).then(e=>{e&&this.emitConfirm()});return}if(this.$parent.validateConfirm){a(this.$parent.validateConfirm()).then(e=>{e&&this.emitConfirm()});return}this.emitConfirm()},emitConfirm(){this.isEnter=!1,this.timer=setTimeout(()=>{this.$emit("onConfirm"),this.$emit("confirm"),this.innerShow=!1},h);const{callback:e}=this.functionModeData;typeof e=="function"&&e("confirm")}}},I={key:1,class:"press-popup--title-wrap"},z={class:"press-popup__left"},q={key:0,class:"press-popup--title"},E={class:"press-popup--title-btn-wrap"};function F(e,o,N,x,u,t){const k=S("PressButton");return u.innerShow?(n(),i("div",{key:0,class:c(["press-popup",t.getPropOrData("popupClass"),t.getPropOrData("horizontal")?"press-popup__hor":"press-popup__vert",e.mode==="white"?"press-popup--white":""]),style:C(t.popupStyle),onTouchmove:o[6]||(o[6]=s((...r)=>t.preventTouchMove&&t.preventTouchMove(...r),["stop"]))},[e.lockScroll?(n(),i("div",{key:0,class:c(["press-popup--mask",u.isEnter?"press--animation__fade-in":"press--animation__fade-out"]),onClick:o[0]||(o[0]=s((...r)=>t.onClickTouch&&t.onClickTouch(...r),["stop"])),onTouchmove:o[1]||(o[1]=s((...r)=>t.preventTouchMove&&t.preventTouchMove(...r),["stop","prevent"]))},null,34)):(n(),i("div",{key:1,class:c(["press-popup--mask",u.isEnter?"press--animation__fade-in":"press--animation__fade-out"]),onClick:o[2]||(o[2]=s((...r)=>t.onClickTouch&&t.onClickTouch(...r),["stop"]))},null,2)),f("div",{class:c(["press-popup--content",u.isEnter?t.getPropOrData("horizontal")?"press--animation__right-enter":"press--animation__bottom-enter":t.getPropOrData("horizontal")?"press--animation__right-leave":"press--animation__bottom-leave"]),style:C({width:t.getPropOrData("horizontal")?`${t.getPropOrData("widthNumber")}%`:"100%"})},[!t.getPropOrData("showTitle")&&(!t.getPropOrData("horizontal")||!t.getPropOrData("closeIcon")||!t.getPropOrData("arrowIcon"))?(n(),i("div",{key:0,class:"press-popup--title-line",onClick:o[3]||(o[3]=s((...r)=>t.clickCancel&&t.clickCancel(...r),["stop"]))})):l("",!0),t.getPropOrData("showTitle")?(n(),i("div",I,[f("div",z,[p(e.$slots,"icon",{},()=>[t.getPropOrData("closeIcon")?(n(),i("div",{key:0,class:"press-popup--close iconfont icon-close",onClick:o[4]||(o[4]=s((...r)=>t.clickCancel&&t.clickCancel(...r),["stop"]))})):t.getPropOrData("arrowIcon")?(n(),i("div",{key:1,class:"press-popup--arrow iconfont icon-back",onClick:o[5]||(o[5]=s((...r)=>t.clickCancel&&t.clickCancel(...r),["stop"]))})):l("",!0)],!0)]),t.getPropOrData("title")?(n(),i("p",q,y(t.getPropOrData("title")),1)):p(e.$slots,"title",{key:1},void 0,!0),f("div",E,[p(e.$slots,"button",{},()=>[t.getPropOrData("button")?(n(),O(k,{key:0,type:t.buttonType,"custom-style":"width:auto;height:100%;padding:0 10px;font-size:inherit;",onClick:t.clickConfirm},{default:b(()=>[B(y(t.getPropOrData("button")),1)]),_:1},8,["type","onClick"])):l("",!0)],!0)])])):l("",!0),p(e.$slots,"default",{},void 0,!0)],6)],38)):l("",!0)}const H=T(M,[["render",F],["__scopeId","data-v-ad29d856"]]);export{H as P,_ as n};
