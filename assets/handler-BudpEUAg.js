import{_ as D,k as N,R as m,a6 as A,a3 as G,Q as I,l as M,a4 as z,U as T,G as S,y as L,r as B,c as i,o,e as U,h as g,a as r,A as k,n as w,F,H as f,t as c,b as E,d as O,a2 as V}from"./index-LX1opRXz.js";import{s as j,a as v}from"./index-B4DfZclL.js";import{a as R}from"./handler-helper-BKr0zvNe.js";import{G as $,R as H}from"./color-DciZLlTH.js";import{P as Q}from"./press-popup-r_znaG1q.js";const b={show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},useSlot:Boolean,useTitleSlot:Boolean,className:{type:String,default:""},customStyle:{type:[String,Object],default:""},asyncClose:Boolean,beforeClose:{type:[null,Function],default:null},theme:{type:String,default:"default"},messageAlign:{type:String,default:""},width:{type:[String,Number],default:""},zIndex:{type:Number,default:2e3},overlay:{type:Boolean,default:!0},overlayStyle:{type:String,default:""},transition:{type:String,default:"scale"},showConfirmButton:{type:Boolean,default:!0},showCancelButton:Boolean,confirmButtonText:{type:String,default:m("confirm")},cancelButtonText:{type:String,default:m("cancel")},confirmButtonColor:{type:String,default:H},cancelButtonColor:{type:String,default:$},closeOnClickOverlay:Boolean,confirmButtonOpenType:{type:String,default:""},...N},q={name:"PressDialog",options:{...M,styleIsolation:"shared"},components:{PressPopup:Q,PressButton:I},mixins:[A,G(b)],props:b,emits:["close","confirm","cancel"],data(){return{utils:S,loading:{confirm:!1,cancel:!1},callback:()=>{}}},computed:{popupCustomStyle(){let e=S.addUnit(this.dataWidth);return L([{width:e},this.dataCustomStyle])}},watch:{dataShow:{handler(e){e||this.stopLoading()}}},methods:{onConfirm(){this.handleAction("confirm")},onCancel(){this.handleAction("cancel")},onClickOverlay(){this.close("overlay")},close(e){this.dataShow=!1,T(()=>{this.$emit("close",e);const{callback:s}=this;s&&s(e,this)})},stopLoading(){this.loading.confirm=!1,this.loading.cancel=!1},handleAction(e){this.$emit(e,{dialog:this});const{dataAsyncClose:s,dataBeforeClose:l}=this;if(!s&&!l){this.close(e);return}this.loading[e]=!0,l&&z(l(e)).then(d=>{d?this.close(e):this.stopLoading()})}}},W={class:"press-dialog-index"},Y={class:"press-dialog__message-text"},Z={key:3,class:"press-hairline--top press-dialog__footer"};function J(e,s,l,d,t,a){const u=B("PressButton"),p=B("PressPopup");return o(),i("div",W,[U(p,{show:e.dataShow,"z-index":e.dataZIndex,overlay:e.dataOverlay,transition:e.dataTransition,"custom-class":"press-dialog press-dialog--"+e.dataTheme+" "+e.dataClassName,"custom-style":a.popupCustomStyle,"overlay-style":e.dataOverlayStyle,"close-on-click-overlay":e.dataCloseOnClickOverlay,onClose:a.onClickOverlay},{default:g(()=>[e.dataTitle||e.dataUseTitleSlot?(o(),i("div",{key:0,class:w(t.utils.bem2("dialog__header",{isolated:!(e.dataMessage||e.dataUseSlot)}))},[e.dataUseTitleSlot?k(e.$slots,"title",{key:0},void 0,!0):e.dataTitle?(o(),i(F,{key:1},[f(c(e.dataTitle),1)],64)):r("",!0)],2)):r("",!0),e.dataUseSlot?k(e.$slots,"default",{key:1},void 0,!0):e.dataMessage?(o(),i("div",{key:2,class:w(t.utils.bem2("dialog__message",[e.dataTheme,e.dataMessageAlign,{hasTitle:e.dataTitle}]))},[E("span",Y,c(e.dataMessage),1)],2)):r("",!0),(o(),i("div",Z,[e.dataShowCancelButton?(o(),O(u,{key:0,size:"large",loading:t.loading.cancel,class:"press-dialog__button press-hairline--right","custom-class":"press-dialog__cancel","custom-style":"color: "+e.dataCancelButtonColor,onClick:a.onCancel},{default:g(()=>[f(c(e.dataCancelButtonText),1)]),_:1},8,["loading","custom-style","onClick"])):r("",!0),e.dataShowConfirmButton?(o(),O(u,{key:1,size:"large",class:"press-dialog__button",loading:t.loading.confirm,"custom-class":"press-dialog__confirm","custom-style":"color: "+e.dataConfirmButtonColor,"open-type":e.dataConfirmButtonOpenType,lang:e.lang,"business-id":e.businessId,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"show-message-card":e.showMessageCard,"app-parameter":e.appParameter,onClick:a.onConfirm,onGetuserinfo:e.onGetUserInfo,onContact:e.onContact,onGetphonenumber:e.onGetPhoneNumber,onError:e.onError,onLaunchapp:e.onLaunchApp,onOpensetting:e.onOpenSetting},{default:g(()=>[f(c(e.dataConfirmButtonText),1)]),_:1},8,["loading","custom-style","open-type","lang","business-id","session-from","send-message-title","send-message-path","send-message-img","show-message-card","app-parameter","onClick","onGetuserinfo","onContact","onGetphonenumber","onError","onLaunchapp","onOpensetting"])):r("",!0)]))]),_:3},8,["show","z-index","overlay","transition","custom-class","custom-style","overlay-style","close-on-click-overlay","onClose"])])}const K=D(q,[["render",J],["__scopeId","data-v-41e81925"]]);let h=[];const P={selector:"#press-dialog",show:!1,title:"",message:"",className:"",customStyle:"",asyncClose:!1,beforeClose:null,theme:"default",messageAlign:"",width:null,zIndex:100,overlay:!0,overlayStyle:"",transition:"scale",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:m("confirm"),cancelButtonText:m("cancel"),closeOnClickOverlay:!1,confirmButtonOpenType:""};let y=Object.assign({},P);function X(){const e=getCurrentPages();return e[e.length-1]}const n=e=>(e=Object.assign(Object.assign({},y),e),new Promise((s,l)=>{const d=e.context||X();let t=j(d,e.selector);if(delete e.context,delete e.selector,t||(t=V(K,"press-dialog")),t){const a=(p,C)=>{p==="confirm"?s(C):l(C)},u={...e};v(t,u),t.callback=a,t.$vm&&(t.$vm.callback=a),T(()=>{v(t,{show:!0})}),h.push(t)}else console.warn("The press-dialog node is not found, please confirm whether the selector and context are correct")}));function _(e){h=e}function x(e){y=e}R({Dialog:n,queue:h,currentOptions:y,defaultOptions:P,updateQueue:_,updateCurrentOptions:x});const ne=n.alert,le=n.confirm;n.close;n.setDefaultOptions;n.resetDefaultOptions;n.stopLoading;export{K as P,le as a,ne as s};
