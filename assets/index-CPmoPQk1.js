import{_ as C,ap as _,v as I,a9 as k,U as O,y as S,r as o,d as n,o as a,h as l,b as i,B as D,n as m,c as p,a as g,e as b,t as u,w as B,F as A,j as x,a2 as z}from"./index-Q-rLfHSZ.js";import{b as N}from"./index-DXRlbxD2.js";import{S as F}from"./swiper--6Nr0jnl.js";const d={images:{type:Array,default:()=>[]},startPosition:{type:[Number,String],default:0},transition:{type:String,default:"press-fade"},showIndex:{type:Boolean,default:!0},asyncClose:{type:Boolean,default:!1},customStyle:{type:[String,Object],default:""},customClass:{type:String,default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"clear"},closeIconPosition:{type:String,default:"top-right"},zIndex:{type:Number,default:10}},M={name:"PressImagePreview",components:{PressOverlay:k,PressIcon:I},mixins:[_(d),F],props:{...d},emits:["close","change"],data(){return{active:0}},computed:{imagePreviewStyle(){return S(this.getPropOrData("customStyle"))}},watch:{startPosition:"setActive",show(e){e?(this.setActive(+this.getPropOrData("startPosition")),O(()=>{})):this.$emit("close",{index:this.active,url:this.getPropOrData("images")[this.active]})}},mounted(){},methods:{showImagePreview(e){this.showDialog(e),this.setActive(e.startPosition||0)},onClosed(){},onChange(e){const{current:s=0}=e.detail;this.setActive(s)},emitClose(){this.getPropOrData("asyncClose")?this.promiseCallback("cancel"):(this.$emit("close"),this.innerShow=!1,this.promiseCallback("confirm"))},onClose(){this.emitClose()},onClickOverlay(){this.onClose()},onClickSwiperItem(){this.onClose()},setActive(e){e!==this.active&&(this.active=e,this.$emit("change",e))}}},V={key:0,class:"press-image-preview__index"},j={class:"press-image-preview__image-wrap"},H=["src"];function L(e,s,T,U,c,t){const w=o("PressIcon"),v=o("swiper-item"),P=o("swiper"),f=o("PressOverlay");return a(),n(f,{show:e.innerShow,"custom-style":`background: rgba(0, 0, 0, 0.9);z-index: ${e.getPropOrData("zIndex")};`,onClick:t.onClickOverlay},{default:l(()=>[i("div",{class:m(["press-image-preview",[e.getPropOrData("customClass")]]),style:D(t.imagePreviewStyle)},[e.getPropOrData("showIndex")?(a(),p("div",V,u(c.active+1)+"/"+u(e.getPropOrData("images").length),1)):g("",!0),i("div",{class:m(["press-image-preview__close-icon",`press-image-preview__close-icon--${e.getPropOrData("closeIconPosition")}`]),onClick:s[0]||(s[0]=B((...r)=>t.onClose&&t.onClose(...r),["stop"]))},[e.getPropOrData("closeable")?(a(),n(w,{key:0,name:e.getPropOrData("closeIcon")},null,8,["name"])):g("",!0)],2),b(P,{class:"press-image-preview__swipe",current:c.active,onChange:t.onChange},{default:l(()=>[(a(!0),p(A,null,x(e.getPropOrData("images"),(r,y)=>(a(),n(v,{key:y,class:"press-image-preview__swipe-item",onClick:t.onClickSwiperItem},{default:l(()=>[i("div",j,[i("img",{class:"press-image-preview__image",src:r,fit:"contain"},null,8,H)])]),_:2},1032,["onClick"]))),128))]),_:1},8,["current","onChange"]),s[1]||(s[1]=i("div",null,null,-1))],6)]),_:1},8,["show","custom-style","onClick"])}const E=C(M,[["render",L],["__scopeId","data-v-c998219d"]]),G="pressImagePreview";function h(e){let s;return e.selector||(s=z(E,G),s.mode="functional"),N({...e,dialog:s,show:!0,showFunction:"showImagePreview"})}const K=h,Q=h;export{E as I,K as i,Q as s};
