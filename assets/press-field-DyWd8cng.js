import{P as I}from"./press-cell-j69wMGN4.js";import{P as V}from"./press-icon-plus-5Xj-bw2h.js";import{s as v,u as P}from"./utils-Do31p4kb.js";import{a as p}from"./add-unit-Df5pRFBE.js";import{d as j,a as T}from"./press-component-HD2axD72.js";import{v as z,n as a,d as H}from"./validator-OjQp2SYe.js";import{a as S,g as h}from"./event-Dm-SpHU4.js";import{_ as F,r as k,o as r,c as u,f as L,n as b,y as d,x as s,t as g,d as f,a as m,v as M,b as w,u as K}from"./index-BZexHo5h.js";const E={placeholder:{type:String,default:""},placeholderStyle:{type:String,default:""},placeholderClass:{type:String,default:""},disabled:Boolean,maxlength:{type:Number,default:-1},cursorSpacing:{type:Number,default:50},autoFocus:Boolean,focus:Boolean,cursor:{type:Number,default:-1},selectionStart:{type:Number,default:-1},selectionEnd:{type:Number,default:-1},adjustPosition:{type:Boolean,default:!0},holdKeyboard:Boolean},N={type:{type:String,default:"text"},password:Boolean,confirmType:{type:String,default:""},confirmHold:Boolean,alwaysEmbed:Boolean},A={autoHeight:Boolean,fixed:Boolean,showConfirmBar:{type:Boolean,default:!0},disableDefaultPadding:{type:Boolean,default:!0}};function D(e){return e&&e.constructor==="Object"?v({"min-height":p(e.minHeight),"max-height":p(e.maxHeight)}):""}const O={inputStyle:D};function B(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function q(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function W(e){B(window,e),B(document.body,e)}const R={name:"PressField",options:{...j,styleIsolation:"shared"},field:!0,components:{PressCell:I,PressIconPlus:V},mixins:[z],props:{...E,...N,...A,size:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},error:Boolean,center:Boolean,isLink:Boolean,leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},autosize:{type:[Boolean,Object],default:!1},required:Boolean,iconClass:{type:String,default:""},clickable:Boolean,inputAlign:{type:String,default:""},customStyle:{type:String,default:""},errorMessage:{type:String,default:""},arrowDirection:{type:String,default:""},showWordLimit:Boolean,errorMessageAlign:{type:String,default:""},useLabelSlot:Boolean,readonly:{type:Boolean,observer:"setShowClear"},clearable:{type:Boolean,observer:"setShowClear"},clearTrigger:{type:String,default:"focus"},border:{type:Boolean,default:!0},titleWidth:{type:String,default:"6.2em"},clearIcon:{type:String,default:"clear"},inputClass:{type:String,default:""},rightIconClass:{type:String,default:""},labelClass:{type:String,default:""},...T},emits:["focus","blur","click-icon","click-input","clear","confirm","linechange","keyboardheightchange","input","change","update:modelValue"],data(){return{focused:!1,innerValue:"",showClear:!1,utils:P,computed:O}},watch:{realModelValue:{handler(e){this.innerValue=e,a(this.adjustSize)}}},created(){this.innerValue=this.realModelValue},mounted(){a(this.adjustSize)},methods:{onInput(e){const t=S(e);this.innerValue=t,this.setShowClear(),this.emitChange(),a(this.adjustSize)},onFocus(e){this.focused=!0,this.setShowClear(),this.$emit("focus",h(e)),a(this.adjustSize)},onBlur(e){this.focused=!1,this.$emit("blur",h(e)),a(this.adjustSize),setTimeout(()=>{this.setShowClear()},200)},onClickIcon(){this.$emit("click-icon")},onClickInput(e){this.$emit("click-input",h(e))},onClear(){this.innerValue="",this.setShowClear(),a(()=>{this.emitChange(),this.$emit("clear","")})},onConfirm(e){const t=S(e);this.innerValue=t,this.setShowClear(),this.$emit("confirm",t)},setValue(e){this.innerValue=e,this.setShowClear(),e===""&&(this.innerValue=""),this.emitChange()},onLineChange(e){this.$emit("linechange",h(e))},onKeyboardHeightChange(e){this.$emit("keyboardheightchange",h(e))},emitChange(){a(()=>{this.emitModelValue(this.innerValue),this.$emit("change",this.innerValue)})},setShowClear(){const{clearable:e,readonly:t,clearTrigger:l}=this,{focused:c,innerValue:n}=this;let o=!1;e&&!t&&(o=!!n&&(l==="always"||l==="focus"&&c)),this.showClear=o},adjustSize(){let{input:e}=this.$refs;if(!(this.type==="textarea"&&this.autosize)||!e||(e.style||(e=e.$el),!e||!e.style))return;const t=q();e.style.height="auto";let l=e.scrollHeight;if(H(this.autosize)){const{maxHeight:c,minHeight:n}=this.autosize;c&&(l=Math.min(l,c)),n&&(l=Math.max(l,n))}l&&(e.style.height=`${l}px`,W(t))},noop(){}}},U=["fixed","focus","cursor","value","auto-focus","disabled","maxlength","placeholder","placeholder-style","placeholder-class","auto-height","cursor-spacing","adjust-position","show-confirm-bar","hold-keyboard","selection-end","selection-start","disable-default-padding"],X=["type","focus","cursor","value","auto-focus","disabled","maxlength","placeholder","placeholder-style","placeholder-class","confirm-type","confirm-hold","hold-keyboard","cursor-spacing","adjust-position","selection-end","selection-start","always-embed","password"],Y={class:"press-field__button"},G={key:0,class:"press-field__word-limit"};function J(e,t,l,c,n,o){const y=k("press-icon-plus"),C=k("press-cell");return r(),u("div",{class:s(["press-field-index",e.customClass])},[L(C,{size:l.size,icon:l.leftIcon,center:l.center,border:l.border,"is-link":l.isLink,required:l.required,clickable:l.clickable,"title-width":l.titleWidth,"title-style":l.label||l.useLabelSlot?"margin-right: 12px;":"display: none;","use-title-slot":!!(l.useLabelSlot||l.label),"custom-style":l.customStyle,"arrow-direction":l.arrowDirection,"custom-class":"press-field"},{icon:b(()=>[d(e.$slots,"left-icon",{},void 0,!0)]),title:b(()=>[l.label?(r(),u("div",{key:0,class:s(l.labelClass+" "+n.utils.bem2("field__label",{disabled:e.disabled}))},g(l.label),3)):l.useLabelSlot?d(e.$slots,"label",{key:1},void 0,!0):f("",!0)]),default:b(()=>[m("div",{class:s([n.utils.bem2("field__body",[e.type])])},[m("div",{class:s([n.utils.bem2("field__control",[l.inputAlign,"custom"])]),onClick:t[0]||(t[0]=(...i)=>o.onClickInput&&o.onClickInput(...i))},[d(e.$slots,"input",{},void 0,!0)],2),e.type==="textarea"?(r(),u("textarea",{key:0,ref:"input",class:s([n.utils.bem2("field__control",[l.inputAlign,e.type,{disabled:e.disabled,error:l.error}]),l.inputClass]),fixed:e.fixed,focus:e.focus,cursor:e.cursor,value:n.innerValue,"auto-focus":e.autoFocus,disabled:e.disabled||l.readonly,maxlength:e.maxlength,placeholder:e.placeholder,"placeholder-style":e.placeholderStyle,"placeholder-class":""+n.utils.bem2("field__placeholder",{error:l.error,disabled:e.disabled}),"auto-height":!!l.autosize,style:M(""+n.computed.inputStyle(l.autosize)),"cursor-spacing":e.cursorSpacing,"adjust-position":e.adjustPosition,"show-confirm-bar":e.showConfirmBar,"hold-keyboard":e.holdKeyboard,"selection-end":e.selectionEnd,"selection-start":e.selectionStart,"disable-default-padding":e.disableDefaultPadding,onInput:t[1]||(t[1]=(...i)=>o.onInput&&o.onInput(...i)),onClick:t[2]||(t[2]=(...i)=>o.onClickInput&&o.onClickInput(...i)),onBlur:t[3]||(t[3]=(...i)=>o.onBlur&&o.onBlur(...i)),onFocus:t[4]||(t[4]=(...i)=>o.onFocus&&o.onFocus(...i)),onConfirm:t[5]||(t[5]=(...i)=>o.onConfirm&&o.onConfirm(...i)),onLinechange:t[6]||(t[6]=(...i)=>o.onLineChange&&o.onLineChange(...i)),onKeyboardheightchange:t[7]||(t[7]=(...i)=>o.onKeyboardHeightChange&&o.onKeyboardHeightChange(...i))},null,46,U)):(r(),u("input",{key:1,ref:"input",class:s([n.utils.bem2("field__control",[l.inputAlign,{disabled:e.disabled,error:l.error}]),l.inputClass]),type:e.type,focus:e.focus,cursor:e.cursor,value:n.innerValue,"auto-focus":e.autoFocus,disabled:e.disabled||l.readonly,maxlength:e.maxlength,placeholder:e.placeholder,"placeholder-style":e.placeholderStyle,"placeholder-class":""+n.utils.bem2("field__placeholder",{error:l.error}),"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"hold-keyboard":e.holdKeyboard,"cursor-spacing":e.cursorSpacing,"adjust-position":e.adjustPosition,"selection-end":e.selectionEnd,"selection-start":e.selectionStart,"always-embed":e.alwaysEmbed,password:e.password||e.type==="password",onInput:t[8]||(t[8]=(...i)=>o.onInput&&o.onInput(...i)),onClick:t[9]||(t[9]=(...i)=>o.onClickInput&&o.onClickInput(...i)),onBlur:t[10]||(t[10]=(...i)=>o.onBlur&&o.onBlur(...i)),onFocus:t[11]||(t[11]=(...i)=>o.onFocus&&o.onFocus(...i)),onConfirm:t[12]||(t[12]=(...i)=>o.onConfirm&&o.onConfirm(...i)),onKeyboardheightchange:t[13]||(t[13]=(...i)=>o.onKeyboardHeightChange&&o.onKeyboardHeightChange(...i))},null,42,X)),n.showClear?(r(),w(y,{key:2,name:l.clearIcon,class:"press-field__clear-root press-field__icon-root",onClick:o.onClear},null,8,["name","onClick"])):f("",!0),m("div",{class:"press-field__icon-container",onClick:t[14]||(t[14]=(...i)=>o.onClickIcon&&o.onClickIcon(...i))},[l.rightIcon||l.icon?(r(),w(y,{key:0,name:l.rightIcon||l.icon,class:s("press-field__icon-root "+l.iconClass),"custom-class":l.rightIconClass},null,8,["name","class","custom-class"])):f("",!0),d(e.$slots,"right-icon",{},void 0,!0),d(e.$slots,"icon",{},void 0,!0)]),m("div",Y,[d(e.$slots,"button",{},void 0,!0)])],2),l.showWordLimit&&e.maxlength?(r(),u("div",G,[m("div",{class:s([n.utils.bem2("field__word-num",{full:n.innerValue.length>=e.maxlength})])},g(n.innerValue.length>=e.maxlength?e.maxlength:n.innerValue.length),3),K("/"+g(e.maxlength),1)])):f("",!0),l.errorMessage?(r(),u("div",{key:1,class:s([n.utils.bem2("field__error-message",[l.errorMessageAlign,{disabled:e.disabled,error:l.error}])])},g(l.errorMessage),3)):f("",!0)]),_:3},8,["size","icon","center","border","is-link","required","clickable","title-width","title-style","use-title-slot","custom-style","arrow-direction"])],2)}const oe=F(R,[["render",J],["__scopeId","data-v-f39f2ac0"]]);export{oe as P};
