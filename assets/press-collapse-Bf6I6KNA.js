import{m as _,_ as p,k as f,P as S,l as C,G as m,r as v,c as y,o as g,e as x,b as h,h as u,A as d,n as c,B as k}from"./index-Q-rLfHSZ.js";import{C as P,P as l,a as E}from"./relation-C7hDGN8M.js";import{g as B}from"./rect-DC6GBRy5.js";function r({height:e,duration:s}){return[`height: ${e};`,`transition: height ${s}ms ease-in-out 0ms, top ${s}ms ease-in-out 0ms, -webkit-transform ${s}ms ease-in-out 0ms, transform ${s}ms ease-in-out 0ms;`,"transform-origin: 50% 50% 0px;"].join("")}function A(e,s,t,a){if(s){if(a===0)e.animationStyle=r({height:"auto",duration:0});else{const i=t?300:1;e.animationStyle=r({height:`${a}px`,duration:i}),setTimeout(()=>{e.animationStyle=r({height:"auto",duration:0})},i)}return}const n=1;e.animationStyle=r({height:`${a}px`,duration:n}),_(()=>{e.animationStyle=r({height:0,duration:300})})}function $(e,s,t){B(e,".press-collapse-item__content").then(a=>a.height).then(a=>{A(e,s,t,a)})}const I={name:"PressCollapseItem",options:{...C,styleIsolation:"shared"},components:{PressCell:S},mixins:[P(l)],props:{size:{type:String,default:""},name:{type:String,default:""},title:{type:String,default:""},value:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},border:{type:Boolean,default:!0},isLink:{type:Boolean,default:!0},titleClass:{type:String,default:""},contentClass:{type:String,default:""},...f},emits:[],data(){const{defaultExpandAll:e}=this[l]||{};return{expanded:!!e,animation:{},mounted:!1,animationStyle:e?"height: auto;":"height: 0;"}},computed:{collapseItemClass(){const{disabled:e,expanded:s}=this;return m.bem2("collapse-item__title",{disabled:e,expanded:s})},collapseItemCustomClass(){let e="";return e=this.collapseItemClass,e},wrapperClass(){return m.bem2("collapse-item__wrapper")}},mounted(){this.updateExpanded(),this.mounted=!0},methods:{updateExpanded(){if(!this[l])return;const{value:e,accordion:s}=this[l],{children:t=[]}=this[l],{name:a}=this,n=t.indexOf(this),i=a??n,o=s?e===i:(e||[]).some(b=>b===i);o!==this.expanded&&$(this,o,this.mounted),this.expanded=o},onClick(){if(this.disabled)return;const{name:e,expanded:s}=this,t=this[l].children.indexOf(this),a=e??t;this[l].switch(a,!s)}}};function w(e,s,t,a,n,i){const o=v("PressCell");return g(),y("div",{class:c(e.customClass+" press-collapse-item "+(e.index!==0?"press-hairline--top":""))},[x(o,{size:t.size,title:t.title,"title-class":t.titleClass,icon:t.icon,value:t.value,label:t.label,"is-link":t.isLink,clickable:t.clickable,border:t.border&&n.expanded,"custom-class":i.collapseItemCustomClass,"hover-class":"press-cell--hover",center:"",onClick:i.onClick},{title:u(()=>[d(e.$slots,"title",{},void 0,!0)]),"right-icon":u(()=>[d(e.$slots,"right-icon",{},void 0,!0)]),default:u(()=>[d(e.$slots,"value",{},void 0,!0)]),_:3},8,["size","title","title-class","icon","value","label","is-link","clickable","border","custom-class","onClick"]),h("div",{class:c(i.wrapperClass),style:k(n.animationStyle)},[h("div",{class:c(["press-collapse-item__content",t.contentClass])},[d(e.$slots,"default",{},void 0,!0)],2)],6)],2)}const R=p(I,[["render",w],["__scopeId","data-v-4698d5fd"]]),z={name:"PressCollapse",options:{...C},mixins:[E(l)],props:{value:{type:[Array,String],default:()=>[]},accordion:{type:Boolean,default:!1},border:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1},...f},watch:{value:{handler(){this.updateExpanded()}},accordion:{handler(){this.updateExpanded()}}},created(){this.children=[]},methods:{updateExpanded(){this.children.forEach(e=>{e.updateExpanded()})},switch(e,s){const{accordion:t,value:a}=this,n=e;t?e=s?e:"":e=s?(a||[]).concat(e):(a||[]).filter(i=>i!==e),s?this.$emit("open",n):this.$emit("close",n),this.$emit("change",e),this.$emit("input",e)}}};function N(e,s,t,a,n,i){return g(),y("div",{class:c(e.customClass+" press-collapse "+(t.border?"press-hairline--top-bottom":""))},[d(e.$slots,"default")],2)}const T=p(z,[["render",N]]);export{R as P,T as a};
