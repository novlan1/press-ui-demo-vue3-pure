import{_ as N,k as A,R as m,a6 as G,a3 as I,Q as M,l as z,a4 as L,U as P,G as b,y as f,r as k,c as r,o,e as U,h as g,a as i,A as O,n as h,F as j,H as y,t as c,b as F,d as w,a2 as E}from"./index-DMZLKqhc.js";import{s as V,a as v}from"./index-Bl3XWM0M.js";import{a as R}from"./handler-helper-BKr0zvNe.js";import{G as H,R as Q}from"./color-DciZLlTH.js";import{P as q}from"./press-popup-B6ra0two.js";const T={show:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},useSlot:Boolean,useTitleSlot:Boolean,className:{type:String,default:""},customStyle:{type:[String,Object],default:""},asyncClose:Boolean,beforeClose:{type:[null,Function],default:null},theme:{type:String,default:"default"},messageAlign:{type:String,default:""},width:{type:[String,Number],default:""},zIndex:{type:Number,default:2e3},overlay:{type:Boolean,default:!0},overlayStyle:{type:String,default:""},transition:{type:String,default:"scale"},showConfirmButton:{type:Boolean,default:!0},showCancelButton:Boolean,confirmButtonText:{type:String,default:m("confirm")},cancelButtonText:{type:String,default:m("cancel")},confirmButtonStyle:{type:[String,Object],default:""},cancelButtonStyle:{type:[String,Object],default:""},confirmButtonColor:{type:String,default:Q},cancelButtonColor:{type:String,default:H},closeOnClickOverlay:Boolean,confirmButtonOpenType:{type:String,default:""},...A},W={name:"PressDialog",options:{...z,styleIsolation:"shared"},components:{PressPopup:q,PressButton:M},mixins:[G,I(T)],props:T,emits:["close","confirm","cancel"],data(){return{utils:b,loading:{confirm:!1,cancel:!1},callback:()=>{}}},computed:{computedConfirmButtonStyle(){return f([{border:0,color:this.dataConfirmButtonColor},this.dataConfirmButtonStyle])},computedCancelButtonStyle(){return f([{border:0,color:this.dataCancelButtonColor},this.dataCancelButtonStyle])},popupCustomStyle(){let e=b.addUnit(this.dataWidth);return f([{width:e},this.dataCustomStyle])},cancelButtonClass(){let e="press-dialog__button";return e+=" press-hairline--right",e},cancelButtonCustomClass(){return"press-dialog__cancel"}},watch:{dataShow:{handler(e){e||this.stopLoading()}}},methods:{onConfirm(){this.handleAction("confirm")},onCancel(){this.handleAction("cancel")},onClickOverlay(){this.close("overlay")},close(e){this.dataShow=!1,P(()=>{this.$emit("close",e);const{callback:a}=this;a&&a(e,this)})},stopLoading(){this.loading.confirm=!1,this.loading.cancel=!1},handleAction(e){this.$emit(e,{dialog:this});const{dataAsyncClose:a,dataBeforeClose:l}=this;if(!a&&!l){this.close(e);return}this.loading[e]=!0,l&&L(l(e)).then(u=>{u?this.close(e):this.stopLoading()})}}},Y={class:"press-dialog-index"},Z={class:"press-dialog__message-text"},J={key:3,class:"press-hairline--top press-dialog__footer"};function K(e,a,l,u,t,s){const d=k("PressButton"),p=k("PressPopup");return o(),r("div",Y,[U(p,{show:e.dataShow,"z-index":e.dataZIndex,overlay:e.dataOverlay,transition:e.dataTransition,"custom-class":"press-dialog press-dialog--"+e.dataTheme+" "+e.dataClassName,"custom-style":s.popupCustomStyle,"overlay-style":e.dataOverlayStyle,"close-on-click-overlay":e.dataCloseOnClickOverlay,onClose:s.onClickOverlay},{default:g(()=>[e.dataTitle||e.dataUseTitleSlot?(o(),r("div",{key:0,class:h(t.utils.bem2("dialog__header",{isolated:!(e.dataMessage||e.dataUseSlot)}))},[e.dataUseTitleSlot?O(e.$slots,"title",{key:0},void 0,!0):e.dataTitle?(o(),r(j,{key:1},[y(c(e.dataTitle),1)],64)):i("",!0)],2)):i("",!0),e.dataUseSlot?O(e.$slots,"default",{key:1},void 0,!0):e.dataMessage?(o(),r("div",{key:2,class:h(t.utils.bem2("dialog__message",[e.dataTheme,e.dataMessageAlign,{hasTitle:e.dataTitle}]))},[F("span",Z,c(e.dataMessage),1)],2)):i("",!0),(o(),r("div",J,[e.dataShowCancelButton?(o(),w(d,{key:0,size:"large",loading:t.loading.cancel,class:h(s.cancelButtonClass),"custom-class":s.cancelButtonCustomClass,"custom-style":s.computedCancelButtonStyle,onClick:s.onCancel},{default:g(()=>[y(c(e.dataCancelButtonText),1)]),_:1},8,["loading","class","custom-class","custom-style","onClick"])):i("",!0),e.dataShowConfirmButton?(o(),w(d,{key:1,size:"large",class:"press-dialog__button",loading:t.loading.confirm,"custom-class":"press-dialog__confirm","custom-style":s.computedConfirmButtonStyle,"open-type":e.dataConfirmButtonOpenType,lang:e.lang,"business-id":e.businessId,"session-from":e.sessionFrom,"send-message-title":e.sendMessageTitle,"send-message-path":e.sendMessagePath,"send-message-img":e.sendMessageImg,"show-message-card":e.showMessageCard,"app-parameter":e.appParameter,onClick:s.onConfirm,onGetuserinfo:e.onGetUserInfo,onContact:e.onContact,onGetphonenumber:e.onGetPhoneNumber,onError:e.onError,onLaunchapp:e.onLaunchApp,onOpensetting:e.onOpenSetting},{default:g(()=>[y(c(e.dataConfirmButtonText),1)]),_:1},8,["loading","custom-style","open-type","lang","business-id","session-from","send-message-title","send-message-path","send-message-img","show-message-card","app-parameter","onClick","onGetuserinfo","onContact","onGetphonenumber","onError","onLaunchapp","onOpensetting"])):i("",!0)]))]),_:3},8,["show","z-index","overlay","transition","custom-class","custom-style","overlay-style","close-on-click-overlay","onClose"])])}const X=N(W,[["render",K],["__scopeId","data-v-51b82227"]]);let C=[];const D={selector:"#press-dialog",show:!1,title:"",message:"",className:"",customStyle:"",asyncClose:!1,beforeClose:null,theme:"default",messageAlign:"",width:null,zIndex:100,overlay:!0,overlayStyle:"",transition:"scale",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:m("confirm"),cancelButtonText:m("cancel"),closeOnClickOverlay:!1,confirmButtonOpenType:""};let B=Object.assign({},D);function $(){const e=getCurrentPages();return e[e.length-1]}const n=e=>(e=Object.assign(Object.assign({},B),e),new Promise((a,l)=>{const u=e.context||$();let t=V(u,e.selector);if(delete e.context,delete e.selector,t||(t=E(X,"press-dialog")),t){const s=(p,S)=>{p==="confirm"?a(S):l(S)},d={...e};v(t,d),t.callback=s,t.$vm&&(t.$vm.callback=s),P(()=>{v(t,{show:!0})}),C.push(t)}else console.warn("The press-dialog node is not found, please confirm whether the selector and context are correct")}));function _(e){C=e}function x(e){B=e}R({Dialog:n,queue:C,currentOptions:B,defaultOptions:D,updateQueue:_,updateCurrentOptions:x});const ne=n.alert,le=n.confirm;n.close;n.setDefaultOptions;n.resetDefaultOptions;n.stopLoading;export{X as P,le as a,ne as s};
