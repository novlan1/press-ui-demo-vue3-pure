import{S as L,f as u}from"./sche-list-CRLBYh2Q.js";import{P as w}from"./press-schedule-tab-BQE_BSLf.js";import{P as g,f as I}from"./sche-item-B2274Z0F.js";import{P as C}from"./press-empty-CARdNJYS.js";import{d as v}from"./press-component-BYCAM0Tw.js";import{_ as f,r as l,o as r,c as h,a as _,f as d,b as S,F as P,i as B,x as M}from"./index-DU6LSpJC.js";import"./press-loading-plus-BbOWp1Vm.js";import"./utils-Do31p4kb.js";import"./add-unit-Df5pRFBE.js";import"./index-CHC6BFDw.js";import"./validator-CMi1mmGD.js";import"./scroll-DZ_Dh06R.js";import"./time-DadpJyRx.js";import"./status-helper-BDbpegZd.js";import"./press-icon-DQZjI6_I.js";function A(e){const c=[],t=[];return e.length?(e[0].forEach((s,i)=>{i%2===1?c.push(s):t.push(s)}),t.length!==c.length&&c.push({battleList:[{}],upScheGroup:{},hidden:!0}),[t,c]):[]}const E={name:"PressScheduleMatchMode",options:{...v,styleIsolation:"shared"},components:{PressScheduleTab:w,PressScheduleTree:L,PressScheduleItem:g,PressEmpty:C},props:{listViewMode:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},isPreview:{type:Number,default:0},myTeamId:{type:String,default:""},scheSubStatusMap:{type:Object,default:()=>({})},allScheList:{type:[Object,Array],default:()=>[]},myScheList:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},canShowOrderButton:{type:Boolean,default:!1}},emits:["clickRoundTab","clickSche","clickScheItem","clickScheItemButton","clickVideoIcon","scrollToLower"],data(){return{currentTab:1,tabList:[{name:"我的赛程",key:1},{name:"全部赛程",key:2}]}},computed:{formattedMatches(){const{curScheList:e,myTeamId:c,isPreview:t,isAdmin:a,scheSubStatusMap:s}=this;return e.filter(o=>{var n;return!((n=o[0])!=null&&n.hidden)}).reduce((o,n)=>(o.push(...n),o),[]).map(o=>I({scheInfo:o,isPreview:t,isAdmin:a,myTeamId:c,canShowOrderButton:this.canShowOrderButton,scheSubStatusMap:s}))},isEmpty(){return!this.curScheList.length||!this.curScheList[0].length},curScheList(){return this.currentTab==1?u({scheList:this.myScheList,isPreview:this.isPreview,isAdmin:this.isAdmin}):A(this.allScheList2)},allScheList2(){var c,t;let e=(t=(c=this.allScheList||[])==null?void 0:c.map)==null?void 0:t.call(c,(a,s)=>({...a,uniqueKey:`allScheList-${s}`}));return e=u({scheList:(this.allScheList||[]).map(a=>a[0]),isPreview:this.isPreview,isAdmin:this.isAdmin}),e}},mounted(){},methods:{onChangeTab(e){this.currentTab=e},clickRoundTab(...e){this.$emit("clickRoundTab",...e)},clickSche(...e){this.$emit("clickSche",...e)},clickVideoIcon(...e){this.$emit("clickVideoIcon",...e)},clickScheItem(...e){this.$emit("clickScheItem",...e)},clickScheItemButton(...e){this.$emit("clickScheItemButton",...e)},scrollToLower(){this.$emit("scrollToLower")}}},R={class:"press-sche-match__tabs"},V={class:"press-sche-match__main"},O={key:1,class:"press-sche-match__list"},F={key:2,class:"press-sche-match__tree"};function N(e,c,t,a,s,i){const o=l("PressScheduleTab"),n=l("press-empty"),T=l("PressScheduleItem"),b=l("PressScheduleTree");return r(),h("div",{class:M(["press-sche-match",[`press-sche-match--tab-${s.currentTab}`]])},[_("div",R,[d(o,{list:s.tabList,current:s.currentTab,onChange:i.onChangeTab},null,8,["list","current","onChange"])]),_("div",V,[i.isEmpty?(r(),S(n,{key:0,type:"e-sport","custom-style":"height: 100%;",description:"暂无数据"})):t.listViewMode?(r(),h("div",O,[(r(!0),h(P,null,B(i.formattedMatches,(k,y)=>(r(),S(T,{key:y,"sche-info":k,"is-admin":t.isAdmin,"is-preview":t.isPreview,"my-team-id":t.myTeamId,"sche-sub-status-map":t.scheSubStatusMap,"can-show-order-button":!e.env||!e.env.isQQ,onClickScheItem:i.clickScheItem,onClickScheItemButton:i.clickScheItemButton},null,8,["sche-info","is-admin","is-preview","my-team-id","sche-sub-status-map","can-show-order-button","onClickScheItem","onClickScheItemButton"]))),128))])):(r(),h("div",F,[d(b,{"sche-list":i.curScheList,"show-champion":!1,shadow:!0,"auto-back-to-top":!1,"is-preview":t.isPreview,"is-admin":t.isAdmin,"show-round-tab":s.currentTab!=2,loading:t.loading&&s.currentTab==2,onClickRoundTab:i.clickRoundTab,onClickSche:i.clickSche,onClickVideoIcon:i.clickVideoIcon,onScrollToLower:i.scrollToLower},null,8,["sche-list","is-preview","is-admin","show-round-tab","loading","onClickRoundTab","onClickSche","onClickVideoIcon","onScrollToLower"])]))])],2)}const q=f(E,[["render",N],["__scopeId","data-v-0a6fa144"]]),m={battleList:[{teamList:[{teamid:"811393BB",teamname:"12的战队",teamavatar:"https://image-1251917893.file.myqcloud.com/Esports/new/user/logo17.png",capuid:"owanlshC6BkzhHEmNwhM2pmFcE7U",score:0},{teamid:"48AF0E4C",teamname:"久郁的战队",teamavatar:"https://image-1251917893.file.myqcloud.com/Esports/new/user/logo19.png",capuid:"owanlspKDceijM_lmod9CVq-YII8",score:1,isWinner:1}],battleid:"",gameName:"0918solo赛1",roundName:"匹配轮",boType:1,curBo:1,roomType:1,battleStatus:"已结束",redSide:"",schid:"24326395_101_match_1_1114_1_1695038395",status:"已结束",realStatus:200,isWeChatLiving:!1,liveInfo:{},nodeItem:{schid:"24326395_101_match_1_1114_1_1695038395",gid:331,siteid:24326393,sch_type:8,sch_rule:{round_stage:101,round_type:"match",round_id:1,partition_id:1,group_id:1114,tree_node_uni_id:"24326395_101_match_1_1114_1",pre_tree_node:"24326395_101_match_1_781_1_1695036339@24326395_101_match_1_262_1_1695034800"},sch_score:{teama_id:"811393BB",teamb_id:"48AF0E4C",teamb_score:1,bo_type:1,cur_bo:1,room_type:1,auto_fail:1,show_red:2},sch_dantao:{both_team_set:3},state:200,winner:"48AF0E4C",ctime:1695038395,utime:1695038603,version:4,childid:24326395,rawState:200,status:"已结束"},abnormalErr:!1}],roundInfo:{child_id:24326395,gid:331,round_stage:101,round_type:"match",round_id:1,round_name:"匹配轮",bo_type:1,grp_num:1},partitionId:1,isChamp:!1},p=[[Array.from({length:100}).map(()=>m)]],H=[[m],[m],[m]],K={components:{PressScheMatchMode:q},data(){return{allScheList:p,myScheList:H,isAdmin:!0,loadTime:0,loading:!1}},methods:{clickRoundTab(){this.onGTip("clickRoundTab"),setTimeout(()=>{this.myScheList=[]},1e3)},clickSche(){setTimeout(()=>{this.allScheList=[]},1e3),this.onGTip("clickSche")},scrollToLower(){this.loadTime>5||(this.loading=!0,this.loadTime+=1,setTimeout(()=>{this.allScheList=[[[...this.allScheList[0][0],...p[0][0]]]],this.loading=!1},1200-this.loadTime*100))}}},j={class:"demo-wrap"};function x(e,c,t,a,s,i){const o=l("PressScheMatchMode");return r(),h("div",j,[d(o,{"all-sche-list":s.allScheList,"is-admin":s.isAdmin,"my-sche-list":s.myScheList,loading:s.loading,onClickRoundTab:i.clickRoundTab,onClickSche:i.clickSche,onScrollToLower:i.scrollToLower},null,8,["all-sche-list","is-admin","my-sche-list","loading","onClickRoundTab","onClickSche","onScrollToLower"])])}const ce=f(K,[["render",x],["__scopeId","data-v-d4df619e"]]);export{ce as default};
