import{S}from"./scroll-view-BKg8FvEU.js";import{P as _}from"./press-code-input-Dlz-LDan.js";import{P as T}from"./press-field-1qEBJObq.js";import{_ as B,c as h,o as c,b as C,R as M,k as D,ag as K,l as P,G as g,r as b,d as v,h as k,n as f,a as w,t as p,F as I,j as x,w as A,e as r}from"./index-CCB1KbBH.js";import{P as N}from"./press-popup-DX2ffYFn.js";import"./test-CXO-MJ-T.js";import"./parent-CQhE6Wqc.js";const L={name:"PressIconDelete"},z={class:"press-number-keyboard__delete-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 22"};function F(l,e,n,m,t,o){return c(),h("svg",z,e[0]||(e[0]=[C("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null,-1)]))}const U=B(L,[["render",F],["__scopeId","data-v-7a5034ef"]]),E={name:"PressNumberKeyboard",options:{...P,styleIsolation:"shared"},components:{PressPopup:N,PressIconDelete:U},mixins:[K],props:{...D,mode:{type:String,default:"number"},show:{type:Boolean,default:!1},toolbar:{type:Boolean,default:!1},cancelButtonText:{type:String,default:""},confirmButtonText:{type:String,default:M("confirm")},title:{type:String,default:""},decimalMark:{type:String,default:"."},random:{type:Boolean,default:!1},maxLength:{type:Number,default:-1},zIndex:{type:Number,default:100},round:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0}},emits:["change","backspace","close","cancel","confirm","update:modelValue"],data(){return{timer:null,refreshKeyOrder:1}},computed:{roundComputed(){return this.round||this.toolbar},keys(){let l;switch(this.mode){case"number":l=[1,2,3,4,5,6,7,8,9,0];break;case"accounting":l=[1,2,3,4,5,6,7,8,9,0,this.decimalMark];break;case"card":l=[1,2,3,4,5,6,7,8,9,"X",0];break;default:l=[]}return this.refreshKeyOrder,this.random&&(l=this.shuffleArray(l)),l},wrapClass(){return g.bem2("number-keyboard",{safe:this.safeAreaInsetBottom})},padClass(){return g.bem2("number-keyboard__pad",this.mode)}},watch:{show(l){this.random&&l&&(this.refreshKeyOrder=this.refreshKeyOrder===1?2:1)}},mounted(){},beforeDestroy(){},methods:{shuffleArray(l){const e=l;for(let n=e.length-1;n>0;n--){const m=Math.floor(Math.random()*(n+1)),t=e[n];e[n]=e[m],e[m]=t}return e},getButtonClass(l,e){const n=[l];switch(this.mode){case"number":e===this.keys.length-1&&n.push("wide");break;case"accounting":["backspace","confirm"].includes(l)?n.push("place-right"):e===this.keys.length-2&&n.push("wide");break}return g.bem2("number-keyboard__button",n)},onKeyboardClick(l){this.maxLength>=0&&this.realModelValue.length>=this.maxLength||(this.emitModelValue(this.realModelValue+l),this.$emit("change",l))},onBackspaceStart(){this.onBackspaceEnd(),this.onBackspaceClick(),this.timer=setInterval(()=>{this.onBackspaceClick()},250)},onBackspaceEnd(){clearInterval(this.timer),this.timer=null},onBackspaceClick(){this.$emit("backspace"),this.emitModelValue(this.realModelValue.slice(0,this.realModelValue.length-1))},onClose(){this.$emit("close")},onActionClick(l){const{action:e}=l.currentTarget.dataset;this.$emit(e)}}},O={key:0,class:"press-number-keyboard__toolbar"},G={class:"press-number-keyboard__title"},H=["onClick"];function j(l,e,n,m,t,o){const s=b("PressIconDelete"),d=b("PressPopup");return c(),v(d,{show:n.show,"z-index":n.zIndex,position:"bottom",round:o.roundComputed,"overlay-style":"background-color: transparent;","safe-area-inset-bottom":!1,onClose:o.onClose},{default:k(()=>[C("div",{class:f(o.wrapClass)},[n.toolbar?(c(),h("div",O,[n.cancelButtonText?(c(),h("button",{key:0,class:"press-number-keyboard__cancel","hover-class":"press-number-keyboard__cancel--hover","data-action":"cancel",onClick:e[0]||(e[0]=(...a)=>o.onActionClick&&o.onActionClick(...a))},p(n.cancelButtonText),1)):w("",!0),C("div",G,p(n.title),1),n.confirmButtonText?(c(),h("button",{key:1,class:"press-number-keyboard__confirm","hover-class":"press-number-keyboard__confirm--hover","data-action":"confirm",onClick:e[1]||(e[1]=(...a)=>o.onActionClick&&o.onActionClick(...a))},p(n.confirmButtonText),1)):w("",!0)])):w("",!0),C("div",{class:f(o.padClass)},[(c(!0),h(I,null,x(o.keys,(a,u)=>(c(),h("button",{key:a,class:f(o.getButtonClass(a,u)),"hover-class":"press-number-keyboard__button--hover",onClick:y=>o.onKeyboardClick(a)},p(a),11,H))),128)),C("button",{class:f(o.getButtonClass("backspace")),"hover-class":"press-number-keyboard__button--hover",onTouchstart:e[2]||(e[2]=A((...a)=>o.onBackspaceStart&&o.onBackspaceStart(...a),["stop"])),onTouchend:e[3]||(e[3]=(...a)=>o.onBackspaceEnd&&o.onBackspaceEnd(...a))},[r(s,{class:"press-number-keyboard__delete-icon"})],34),n.mode==="accounting"?(c(),h("button",{key:0,class:f(o.getButtonClass("confirm")),"hover-class":"press-number-keyboard__button--confirm-hover","data-action":"confirm",onClick:e[4]||(e[4]=(...a)=>o.onActionClick&&o.onActionClick(...a))},p(n.confirmButtonText),3)):w("",!0)],2)],2)]),_:1},8,["show","z-index","round","onClose"])}const R=B(E,[["render",j],["__scopeId","data-v-5cc1a800"]]),X={i18n:{"zh-CN":{number:"数字键盘",accounting:"带小数点的数字键盘",card:"身份证键盘",custom:"自定义",withToolbar:"展示顶部栏",withTitle:"展示标题",decimalMark:"自定义小数点",random:"打乱顺序",bindValue:"配合输入框使用",bindLabel:"双向绑定",input:"点此输入",codeValue:"配合验证码输入使用"},"en-US":{number:"Number Keyboard",accounting:"Number Keyboard with Decimal Mark",card:"Identity Number Keyboard",custom:"Custom",withToolbar:"Show Toolbar",withTitle:"Show Title",decimalMark:"Custom Separator Mark",random:"Randomized",bindValue:"Use with Field",bindLabel:"Bind Value",input:"Click to Input",codeValue:"Use with CodeInput"}},components:{PressField:T,PressCodeInput:_,PressNumberKeyboard:R},mixins:[S],data(){return{mode:"number",show:!1,showBindDemo:!1,showCodeDemo:!1,toolbar:!1,title:"",decimalMark:".",random:!1,bindValue:"",codeValue:"",scrollTop:0,originScrollTop:0}},methods:{onShowKeyboard(l){let e="number",n=!0,m=!1,t=!1,o=!1,s="",d=".",a=!1,u=0;switch(l){case"number":break;case"accounting":e="accounting";break;case"card":e="card";break;case"toolbar":o=!0;break;case"title":o=!0,s="数字键盘";break;case"decimalMark":e="accounting",d=",";break;case"random":a=!0;break;case"bindValue":n=!1,m=!0,u=1e3;break;case"codeValue":n=!1,t=!0,u=1e3;break}this.mode=e,this.show=n,this.showBindDemo=m,this.showCodeDemo=t,this.toolbar=o,this.title=s,this.decimalMark=d,this.random=a,u&&(this.scrollTop=this.originScrollTop,setTimeout(()=>{this.scrollTop=u}))},onScroll(l){console.log("[onScroll]",l),this.originScrollTop=l.detail.scrollTop},onChange(l){console.log(`[onChange] ${l}`),this.onGTip(`${l}`)},onBackspace(){console.log("[onBackspace]"),this.onGTip("backspace")},onClose(){console.log("[onClose]"),this.show=!1},onCancel(){console.log("[onCancel]"),this.show=!1},onConfirm(){console.log("[onConfirm]"),this.show=!1},onCloseBindDemo(){this.showBindDemo=!1},onCloseCodeDemo(){this.showCodeDemo=!1},onChangeCode(l){console.log("[onChange] value: ",l)}}};function q(l,e,n,m,t,o){const s=b("press-cell"),d=b("demo-block"),a=b("PressField"),u=b("PressCodeInput"),y=b("PressNumberKeyboard"),V=b("scroll-view");return c(),v(V,{"scroll-y":"",enhanced:"","scroll-top":t.scrollTop,onScroll:o.onScroll},{default:k(()=>[r(d,{title:l.t("basicUsage")},{default:k(()=>[r(s,{title:l.t("number"),"is-link":"",onClick:e[0]||(e[0]=i=>o.onShowKeyboard("number"))},null,8,["title"]),r(s,{title:l.t("accounting"),"is-link":"",onClick:e[1]||(e[1]=i=>o.onShowKeyboard("accounting"))},null,8,["title"]),r(s,{title:l.t("card"),"is-link":"",onClick:e[2]||(e[2]=i=>o.onShowKeyboard("card"))},null,8,["title"])]),_:1},8,["title"]),r(d,{title:l.t("custom")},{default:k(()=>[r(s,{title:l.t("withToolbar"),"is-link":"",onClick:e[3]||(e[3]=i=>o.onShowKeyboard("toolbar"))},null,8,["title"]),r(s,{title:l.t("withTitle"),"is-link":"",onClick:e[4]||(e[4]=i=>o.onShowKeyboard("title"))},null,8,["title"]),r(s,{title:l.t("decimalMark"),"is-link":"",onClick:e[5]||(e[5]=i=>o.onShowKeyboard("decimalMark"))},null,8,["title"]),r(s,{title:l.t("random"),"is-link":"",onClick:e[6]||(e[6]=i=>o.onShowKeyboard("random"))},null,8,["title"])]),_:1},8,["title"]),r(d,{title:l.t("bindValue")},{default:k(()=>[r(a,{label:l.t("bindLabel"),value:t.bindValue,"model-value":t.bindValue,readonly:"",clickable:!0,placeholder:l.t("input"),"always-embed":!0,onClick:e[7]||(e[7]=i=>o.onShowKeyboard("bindValue")),onClickInput:e[8]||(e[8]=i=>o.onShowKeyboard("bindValue"))},null,8,["label","value","model-value","placeholder"])]),_:1},8,["title"]),r(d,{title:l.t("codeValue")},{default:k(()=>[r(s,{onClick:e[9]||(e[9]=i=>o.onShowKeyboard("codeValue"))},{default:k(()=>[r(u,{"max-length":6,value:t.codeValue,"disabled-keyboard":!0},null,8,["value"])]),_:1})]),_:1},8,["title"]),e[12]||(e[12]=C("div",{class:"grid-padding"},null,-1)),e[13]||(e[13]=C("div",{id:"bottomDom",class:"bottom-dom"},null,-1)),r(y,{mode:t.mode,show:t.show,toolbar:t.toolbar,title:t.title,"decimal-mark":t.decimalMark,random:t.random,onChange:o.onChange,onBackspace:o.onBackspace,onCancel:o.onCancel,onConfirm:o.onConfirm,onClose:o.onClose},null,8,["mode","show","toolbar","title","decimal-mark","random","onChange","onBackspace","onCancel","onConfirm","onClose"]),r(y,{modelValue:t.bindValue,"onUpdate:modelValue":e[10]||(e[10]=i=>t.bindValue=i),mode:t.mode,show:t.showBindDemo,toolbar:t.toolbar,title:t.title,"decimal-mark":t.decimalMark,random:t.random,"max-length":6,onCancel:o.onCloseBindDemo,onConfirm:o.onCloseBindDemo,onClose:o.onCloseBindDemo},null,8,["modelValue","mode","show","toolbar","title","decimal-mark","random","onCancel","onConfirm","onClose"]),r(y,{modelValue:t.codeValue,"onUpdate:modelValue":e[11]||(e[11]=i=>t.codeValue=i),mode:t.mode,show:t.showCodeDemo,toolbar:t.toolbar,title:t.title,"decimal-mark":t.decimalMark,random:t.random,"max-length":6,onCancel:o.onCloseCodeDemo,onConfirm:o.onCloseCodeDemo,onClose:o.onCloseCodeDemo,onChange:o.onChangeCode},null,8,["modelValue","mode","show","toolbar","title","decimal-mark","random","onCancel","onConfirm","onClose","onChange"])]),_:1},8,["scroll-top","onScroll"])}const oe=B(X,[["render",q],["__scopeId","data-v-e1445762"]]);export{oe as default};
