import{c as j}from"./clipboard-web-7a6xqnib.js";import{i as b,I as _,a as F}from"./utils-CFZYYlUs.js";import{aw as H,_ as I,c as C,a as E,o as $,A as W,B as S,q as N,r as x,e as z,j as L,b as w,t as M}from"./index-BMxCy5dw.js";import{g as R}from"./event-xMObwqja.js";function V(e){return new Promise(function(t,s){wx?wx.setClipboardData({data:"".concat(e),success:function(){t()},fail:function(r){console.log(r),s()}}):s()})}function U(e){let t=V;return t=j,t(`${e}`)}function q(e,t,s={}){let n;return n=H(t,{...s}).mount(e),n}function k(e){return e.replace(/^(\w)/,(t,s)=>`data${s.toUpperCase()}`)}function G(e){return Object.keys(e).reduce((s,n)=>(s[n]={handler(r){this[k(n)]=r}},s),{})}function X(e,t){return Object.keys(t).reduce((n,r)=>(n[k(r)]=e[r],n),{})}function Z(e){Object.keys(e).forEach(t=>{this[k(t)]=e[t]})}function K(e,t="message"){return b(e)?e:{[t]:e}}function J(e){return document.body.contains(e)}function Q({defaultOptions:e,component:t}){let s={},n=[],r=!1,i={...e};const l=e.selector&&e.selector.slice(1)||"component-default-id";function g({multiple:o,component:a,dialogId:u}){if(_)return{};if(n=n.filter(f=>!f.$el.parentNode||J(f.$el)),!n.length||o){const f=document.getElementById(u);f&&f.parentElement&&f.parentElement.removeChild(f);const v=document.createElement("div");v.id=u,document.body.appendChild(v);const d=q(v,a);d&&typeof d.$on=="function"&&d.$on("input",P=>{d.value=P}),n.push(d)}return n[n.length-1]}function c(o={duration:0}){const a=g({multiple:r,component:t,dialogId:l});return o=K(o),o={...i,...s[o.type||i.type],...o},c.getOptions=()=>o,a.clear=()=>{a.setData({show:!1}),o.onClose&&o.onClose(),n=n.filter(u=>u!==a),setTimeout(()=>{document.body.contains(a.$el)&&a.$el&&a.$el.parentNode.removeChild(a.$el)},o.animationDuration||0)},a.set=(...u)=>{typeof a.$set=="function"?a.$set(a,...u):a[u[0]]=u[1]},a.setData(o),clearTimeout(a.timer),a.setData({show:!0}),o.duration>0&&(a.timer=setTimeout(()=>{a.clear()},o.duration)),a}return c.clear=o=>{n.length&&(o?(n.forEach(a=>{a.clear()}),n=[]):r?n.shift().clear():n[0].clear())},c.setDefaultOptions=(o,a)=>{typeof o=="string"?s[o]=a:Object.assign(i,o)},c.resetDefaultOptions=o=>{typeof o=="string"?s[o]=null:(i={...e},s={})},c.allowMultiple=(o=!0)=>{r=o},c.install=()=>{},c}const O="#fff",Y={selector:"#press-notify",type:"danger",message:"",background:"",duration:3e3,show:!0,zIndex:110,top:0,color:O,safeAreaInsetTop:!1,onClick:()=>{},onOpened:()=>{},onClose:()=>{},animationDuration:300},B={customClass:{type:String,default:""}},A={multipleSlots:!0,addGlobalClass:!0},ee=/^-?\d+(\.\d+)?$/;function te(e){if(e!=null)return ee.test(`${e}`)?`${e}px`:e}let h={};function ne(){try{!Object.keys(h).length&&typeof uni<"u"&&(typeof uni.getWindowInfo=="function"?h=uni.getWindowInfo():typeof uni.getSystemInfoSync=="function"&&(h=uni.getSystemInfoSync()))}catch(e){console.log("[getAppBaseInfo] err",e)}return h}function se(){if(F())return 0;const{statusBarHeight:e}=ne();return e}function oe(e){return{data(){return{...X(this,e)}},watch:{...G(e)},methods:{setData(t){Z.call(this,t)}}}}function m(e){return setTimeout(()=>{e()},1e3/30)}const D=(e,t)=>{const{enterClass:s,enterActiveClass:n,enterToClass:r,leaveClass:i,leaveActiveClass:l,leaveToClass:g}=t;return{enter:`press-${e}-enter press-${e}-enter-active ${s} ${n}`,"enter-to":`press-${e}-enter-to press-${e}-enter-active ${r} ${n}`,leave:`press-${e}-leave press-${e}-leave-active ${i} ${l}`,"leave-to":`press-${e}-leave-to press-${e}-leave-active ${g} ${l}`}};function ae(e){return{props:{customStyle:{type:[String,Object],default:""},show:{type:Boolean,default:e},duration:{type:[Number,Object,null],default:300},name:{type:String,default:"fade"}},data(){return{type:"",inited:!1,display:!1,dataName:this.name}},watch:{show:{handler(...t){this.observeShow(...t)}},name:{handler(t){this.dataName=t}}},mounted(){this.show===!0&&this.observeShow(!0,!1)},methods:{observeShow(t,s){t!==s&&(t?this.enter():this.leave())},callback(t){typeof this[`${t}Callback`]=="function"&&this[`${t}Callback`]()},enter(){const{duration:t,dataName:s}=this,n=D(s,this),r=b(t)?t.enter:t;this.status="enter",this.$emit("before-enter"),this.callback("beforeEnter"),m(()=>{this.status==="enter"&&(this.$emit("enter"),this.setData({inited:!0,display:!0,classes:n.enter,currentDuration:r}),this.callback("enter"),m(()=>{this.status==="enter"&&(this.transitionEnded=!1,this.setData({classes:n["enter-to"]}))}))})},leave(){if(!this.display)return;const{duration:t,dataName:s}=this,n=D(s,this),r=b(t)?t.leave:t;this.status="leave",this.$emit("before-leave"),this.callback("beforeLeave"),m(()=>{this.status==="leave"&&(this.$emit("leave"),this.setData({classes:n.leave,currentDuration:r}),this.callback("leave"),m(()=>{this.status==="leave"&&(this.transitionEnded=!1,setTimeout(()=>this.onTransitionEnd(),r),this.setData({classes:n["leave-to"]}))}))})},onTransitionEnd(){if(this.transitionEnded)return;this.transitionEnded=!0,this.$emit(`after-${this.status}`),this.callback(this.status==="enter"?"afterEnter":"afterLeave");const{show:t,display:s}=this;!t&&s&&this.setData({display:!1})}}}}function re(e){const t=/[A-Z]/g;return e.replace(t,n=>`-${n}`).toLowerCase()}function y(e){return e===void 0?"":Array.isArray(e)?e.filter(t=>t!=null&&t!=="").map(t=>y(t)).join(";"):typeof e=="string"?e:Object.keys(e).filter(t=>e[t]!=null&&e[t]!=="").map(t=>[re(t),[e[t]]].join(":")).join(";")}function ie(e){return y([{"-webkit-transition-duration":`${e.currentDuration}ms`,"transition-duration":`${e.currentDuration}ms`},e.display?null:"display: none",e.customStyle])}const le={rootStyle:ie},ue={name:"PressTransition",mixins:[ae(!0)],props:{overlay:{type:Boolean,default:!1},enterClass:{type:String,default:""},enterActiveClass:{type:String,default:""},enterToClass:{type:String,default:""},leaveClass:{type:String,default:""},leaveActiveClass:{type:String,default:""},leaveToClass:{type:String,default:""},afterEnterCallback:{type:Function,default:()=>()=>{}},afterLeaveCallback:{type:Function,default:()=>()=>{}},enterCallback:{type:Function,default:()=>()=>{}},leaveCallback:{type:Function,default:()=>()=>{}},beforeEnterCallback:{type:Function,default:()=>()=>{}},beforeLeaveCallback:{type:Function,default:()=>()=>{}},...B},emits:["click","touchmove","before-enter","enter","after-enter","before-leave","leave","after-leave"],data(){return{classes:""}},options:{...A,styleIsolation:"shared"},computed:{rootStyle(){const{currentDuration:e,display:t,customStyle:s}=this;return le.rootStyle({currentDuration:e,display:t,customStyle:s})},transitionClass(){const{customClass:e,overlay:t,classes:s}=this;return`press-transition ${s} ${e} ${t?"press-overlay":""}`}},methods:{setData(e){Object.keys(e).forEach(t=>{this[t]=e[t]})},onClick(){this.$emit("click")},onTouchmove(e){this.$emit("touchmove",e)}}};function ce(e,t,s,n,r,i){return e.inited?($(),C("div",{key:0,class:N(i.transitionClass),style:S(i.rootStyle),onTransitionend:t[0]||(t[0]=(...l)=>e.onTransitionEnd&&e.onTransitionEnd(...l)),onClick:t[1]||(t[1]=(...l)=>i.onClick&&i.onClick(...l)),onTouchmove:t[2]||(t[2]=(...l)=>i.onTouchmove&&i.onTouchmove(...l))},[W(e.$slots,"default",{},void 0,!0)],38)):E("",!0)}const fe=I(ue,[["render",ce],["__scopeId","data-v-6818398f"]]);function de(e){return y({"z-index":e.zIndex,top:te(e.top)})}function pe(e){return y({background:e.background,color:e.color})}const he={rootStyle:de,notifyStyle:pe},T={show:{type:Boolean,default:!1},message:{type:String,default:""},background:{type:String,default:""},type:{type:String,default:"danger"},color:{type:String,default:O},zIndex:{type:Number,default:110},safeAreaInsetTop:{type:Boolean,default:!1},top:{type:[null,String,Number],default:null},...B},me={name:"PressNotify",options:{...A,styleIsolation:"shared"},components:{PressTransition:fe},mixins:[oe(T)],props:T,emits:[],data(){return{onOpened:null,onClose:null,onClick:null,computed:he}},watch:{},created(){const e=se();this.statusBarHeight=e},methods:{onTap(e){const{onClick:t}=this;t&&t(R(e))}}},ye={class:"press-notify-index"};function ge(e,t,s,n,r,i){const l=x("PressTransition");return $(),C("div",ye,[z(l,{name:"slide-down",show:e.dataShow,"custom-class":"press-notify__container","custom-style":r.computed.rootStyle({zIndex:e.dataZIndex,top:e.dataTop}),onClick:i.onTap},{default:L(()=>[w("div",{class:N("press-notify press-notify--"+e.dataType),style:S(r.computed.notifyStyle({background:e.dataBackground,color:e.dataColor}))},[e.dataSafeAreaInsetTop?($(),C("div",{key:0,style:S("height: "+e.statusBarHeight+"px")},null,4)):E("",!0),w("span",null,M(e.dataMessage),1)],6)]),_:1},8,["show","custom-style","onClick"])])}const ve=I(me,[["render",ge],["__scopeId","data-v-bf42647f"]]),be=Q({defaultOptions:Y,component:ve});let p;p=be;p.clear;p.setDefaultOptions;p.resetDefaultOptions;const we={data(){let e=0;return e=44,{offsetTop:e}},methods:{copyIconTag(e){const t=this;U(e).then(()=>{p({type:"success",duration:1500,message:`${t.t("copied")}ï¼š${e}`,top:t.offsetTop})})}}};export{we as C};
