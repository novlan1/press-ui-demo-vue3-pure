import{_ as x,x as V,i as U,U as b,r as h,c as g,o as p,a as H,e as i,h as u,F as E,j as M,n as y,b as f,t as C,aD as F,w as _,A as v,H as S,d as B,v as G,P as R,aA as q}from"./index-D8fxni52.js";import{h as K,g as k}from"./rect-CzEpIJLg.js";import{S as j}from"./scroll-view-IRZ_HjQm.js";import{P as X}from"./press-popover-plus-DX9s7bqx.js";import{r as Y}from"./number-CU9l-NjU.js";import{P as J}from"./press-picker-plus-C_yPM5zM.js";import{s as Q,a as A,F as W}from"./helper-CYbRUfga.js";import"./click-outside-FYv0Ni3O.js";import"./utils-Bnosij7X.js";const I={mode:{type:String,default:""},total:{type:Number,default:0},current:{type:Number,default:0},customClass:{type:String,default:""}},O={prevText:{type:String,default:"上一页"},nextText:{type:String,default:"下一页"},totalItems:{type:Number,default:0},showPageSize:{type:Number,default:5},itemsPerPage:{type:Number,default:10},forceEllipses:{type:Boolean,default:!1},showPrevButton:{type:Boolean,default:!0},showNextButton:{type:Boolean,default:!0}},L={expand:{type:Boolean,default:!1},tipTemplate:{type:String,default:"第{{0}}页"},autoScroll:{type:Number,default:1},safeAreaInsetBottom:{type:Boolean,default:!0}};let P=null;const Z={name:"PressPagination",options:{...V(!0,!1),styleIsolation:"shared"},components:{PressPopoverPlus:X},mixins:[j],props:{...L,...I},emits:["change"],data(){return{innerCurrent:0,scrollToView:"",tipOffset:0,selectedEvent:!1,zonesBox:{},scrollTop:0,old:{scrollTop:0}}},computed:{pageList(){return Array.from({length:this.total}).map((e,t)=>t+1)},tipStyle(){return`top: ${this.tipOffset}px;bottom: unset;right: 50px;width: max-content;left: auto;transform: translateY(-50%);line-height: 16px;min-width: 42px;`},pageTip(){return this.tipTemplate.replace("{{0}}",this.innerCurrent)}},watch:{current:{handler(e){const t=this.pageList.findIndex(r=>r===e);this.innerCurrent=t>-1?this.pageList[t]:this.pageList[0],b(()=>{this.scrollTo()})},immediate:!0},total:{handler(){b(()=>{this.getScrollBarSize()})}},mode:{handler(){b(()=>{this.getScrollBarSize()})}}},mounted(){this.selectedEvent=!1,this.getScrollBarSize()},destroyed(){this.onDestroyed()},unmounted(){this.onDestroyed()},updated(){b(()=>{this.updatePopoverTipPosition()})},methods:{onDestroyed(){this.selectedEvent=!1,P&&(clearTimeout(P),P=null)},getScrollBarSize(){k(this,".press-scrollbar").then(e=>{e&&(this.zonesBox={top:e.top,bottom:e.bottom,height:e.height})})},updatePopoverTipPosition(){k(this,`#seq-${this.innerCurrent}`).then(e=>{e&&(this.tipOffset=e.top-this.zonesBox.top+e.height/2)})},scroll(e){U()?this.old.scrollTop=e.target.scrollTop:this.old.scrollTop=e.detail.scrollTop,this.updatePopoverTipPosition()},scrollTo(){const{autoScroll:e}=this;this.scrollToView=`seq-${this.innerCurrent}`,this.scrollTop=this.old.scrollTop,Promise.all([K(this,"#zoneBox"),k(this,`#seq-${this.innerCurrent}`)]).then(([t,r])=>{if(!r)return;const{top:c,bottom:o,height:s=0}=this.zonesBox;if(s>0){if(r.top-c<e*r.height)this.scrollTop=Math.max(1,(this.innerCurrent-1-e)*r.height);else if(o-r.bottom<e*r.height){const n=(this.innerCurrent+e)*r.height-s;this.scrollTop=Math.min(n,t.scrollHeight-s)}this.updatePopoverTipPosition()}})},handleSelect(e){P&&(clearTimeout(P),P=null),this.selectedEvent=!0,this.innerCurrent!==e&&(this.innerCurrent=e,this.$emit("change",e)),this.scrollTo(),P=setTimeout(()=>{this.selectedEvent=!1},500)}}},$={key:0,class:"press-pagination__wrap"},ee=["id","onClick"];function te(e,t,r,c,o,s){const n=h("scroll-view"),a=h("PressPopoverPlus");return p(),g("div",{class:y(["press-pagination",[e.customClass,{"press-pagination--safe":e.safeAreaInsetBottom},{"press-pagination--hor":e.mode==="hor"}]])},[s.pageList.length>1?(p(),g("div",$,[i(n,{id:"zoneBox",class:y(["press-scrollbar","press-scrollbar--active"]),"scroll-y":"true","scroll-with-animation":"","enable-flex":!0,"scroll-top":o.scrollTop,onScroll:s.scroll},{default:u(()=>[(p(!0),g(E,null,M(s.pageList,(l,d)=>(p(),g("div",{id:"seq-"+l,key:d,class:y(["press-scrollbar__scale",[{"press-scrollbar__scale--selected":o.innerCurrent===l},`press-scrollbar__scale--total-${e.total}`]]),onClick:T=>s.handleSelect(l,d)},[f("span",null,C(l),1)],10,ee))),128))]),_:1},8,["scroll-top","onScroll"]),i(a,{show:o.selectedEvent,placement:"left","custom-style":s.tipStyle},{default:u(()=>[f("p",null,C(s.pageTip),1)]),_:1},8,["show","custom-style"])])):H("",!0)],2)}const oe=x(Z,[["render",te],["__scopeId","data-v-76b77e74"]]),w=(e,t,r)=>({number:e,text:t,active:r}),se={name:"PressPaginationNext",props:{...O,...I},emits:["change"],data(){return{}},computed:{count(){const{total:e,totalItems:t,itemsPerPage:r}=this,c=+e||Math.ceil(+t/+r);return Math.max(1,c)},pages(){const e=[],t=this.count,r=+this.showPageSize,{current:c,forceEllipses:o}=this;let s=1,n=t;const a=r<t;a&&(s=Math.max(c-Math.floor(r/2),1),n=s+r-1,n>t&&(n=t,s=n-r+1));for(let l=s;l<=n;l++){const d=w(l,l,l===c);e.push(d)}if(a&&r>0&&o){if(s>1){const l=w(s-1,"...");e.unshift(l)}if(n<t){const l=w(n+1,"...");e.push(l)}}return e}},methods:{bem2:F,updateModelValue(e){e=Y(e,1,this.count),this.current!==e&&this.$emit("change",e)}}},ne={class:"press-pagination__items"},re=["disabled"],le={key:0,class:"press-pagination__page-desc"},ie=["onClick"],ae=["disabled"];function ce(e,t,r,c,o,s){return p(),g("div",{class:y(["press-pagination",e.customClass])},[f("div",ne,[f("div",{class:y([s.bem2("pagination__item",{disabled:e.current===1,border:e.mode==="simple",prev:!0})])},[f("div",{disabled:e.current===1,onClick:t[0]||(t[0]=_(()=>s.updateModelValue(e.current-1),["stop"]))},[v(e.$slots,"prev-text",{},()=>[S(C(e.prevText),1)],!0)],8,re)],2),e.mode==="simple"?(p(),g("div",le,C(`${e.current}/${s.count}`),1)):(p(!0),g(E,{key:1},M(s.pages,(n,a)=>(p(),g("div",{key:a,class:y([s.bem2("pagination__item",{active:n.active,page:!0}),"press-hairline--surround"]),onClick:_(()=>s.updateModelValue(n.number),["stop"])},[f("div",null,[v(e.$slots,"page",{number:n.number,active:n.active,text:n.text},()=>[S(C(n.text),1)],!0)])],10,ie))),128)),f("div",{class:y([s.bem2("pagination__item",{disabled:e.current===s.count,border:e.mode==="simple",next:!0})])},[f("div",{disabled:e.current===s.count,onClick:t[1]||(t[1]=_(()=>s.updateModelValue(e.current+1),["stop"]))},[v(e.$slots,"next-text",{},()=>[S(C(e.nextText),1)],!0)],8,ae)],2)])],2)}const ue=x(se,[["render",ce],["__scopeId","data-v-388d9cef"]]),pe={components:{PressPaginationNext:ue,PressPaginationESport:oe},props:{...L,...O,...I},data(){return{}},methods:{onChange(...e){this.$emit("change",...e)}}};function he(e,t,r,c,o,s){const n=h("PressPaginationNext"),a=h("PressPaginationESport");return e.mode==="multi"||e.mode==="simple"?(p(),B(n,{key:0,mode:e.mode,total:e.total,current:e.current,"custom-class":e.customClass,"prev-text":e.prevText,"next-text":e.nextText,"total-items":e.totalItems,"show-page-size":e.showPageSize,"items-per-page":e.itemsPerPage,"force-ellipses":e.forceEllipses,"show-prev-button":e.showPrevButton,"show-next-button":e.showNextButton,onChange:s.onChange},{"next-text":u(()=>[v(e.$slots,"next-text")]),"prev-text":u(()=>[v(e.$slots,"prev-text")]),page:u(({number:l,active:d,text:T})=>[v(e.$slots,"page",{number:l,active:d,text:T})]),_:3},8,["mode","total","current","custom-class","prev-text","next-text","total-items","show-page-size","items-per-page","force-ellipses","show-prev-button","show-next-button","onChange"])):(p(),B(a,{key:1,mode:e.mode,total:e.total,current:e.current,"custom-class":e.customClass,expand:e.expand,"tip-template":e.tipTemplate,"auto-scroll":e.autoScroll,"safe-area-inset-bottom":e.safeAreaInsetBottom,onChange:s.onChange},null,8,["mode","total","current","custom-class","expand","tip-template","auto-scroll","safe-area-inset-bottom","onChange"]))}const me=x(pe,[["render",he]]),N={pageTotal:30,current:2,expand:!1},z=Array.from({length:4}).map((e,t)=>10**t).reduce((e,t)=>{for(let r=1;r<10;r++)e.push(t*r);return e},[]).map(e=>({label:e,value:e}));function ge({context:e,callback:t,pageTotal:r,current:c,isHor:o}){Q({context:e,title:"自定义设置",closeIcon:!0,cellList:[{label:"页面数",value:r,click:({context:s})=>{s.closeDialog(),A({title:"页面数",closeIcon:!0,list:z,current:{value:r},context:e}).then(({item:n})=>{N.pageTotal=n.value,e.onGTip("设置成功"),typeof t.changePageTotal=="function"&&t.changePageTotal.call(e,n.value)}).catch(()=>{})}},{label:"当前页",value:c,click:({context:s})=>{s.closeDialog(),A({title:"当前页",closeIcon:!0,list:z.filter(n=>n.value<=r),current:{value:c},context:e}).then(({item:n})=>{N.current=n.value,e.onGTip("设置成功"),typeof t.changeCurrent=="function"&&t.changeCurrent.call(e,n.value)}).catch(()=>{})}},{label:"是否为Hor模式",type:"switch",open:o,click:({context:s})=>{s.closeDialog(),e.onGTip("设置成功"),typeof t.changeHor=="function"&&t.changeHor.call(e,!o)}}]})}const de={i18n:{"zh-CN":{title2:"简单模式",title3:"显示省略号",title4:"自定义按钮",prevText:"上一页",nextText:"下一页"},"en-US":{title2:"Simple Mode",title3:"Show ellipses",title4:"Custom Button",prevText:"Prev",nextText:"Next"}},components:{PressPagination:me,PressPopupCell:q,PressPickerPlus:J,PressCell:R,PressIcon:G},data(){const e={...N};return{sectionStyle:"margin: 0;background: #f7f8fa;",backgroundStyle:"background: #f7f8fa;",FUNCTIONAL_ID_MAP:W,mode:"",componentConfig:e,currentPage1:1,currentPage2:1,currentPage3:1,currentPage4:1}},methods:{onShowBasicPopupCell(){const{pageTotal:e,current:t}=this.componentConfig;ge({context:this,callback:{changePageTotal:this.changePageTotal,changeCurrent:this.changeCurrent,changeHor:this.changeHor},pageTotal:e,current:t,isHor:this.mode==="hor"})},changeExpand(e){this.componentConfig={...this.componentConfig,expand:e}},changePageTotal(e){this.componentConfig={...this.componentConfig,pageTotal:e},this.componentConfig.current>e&&(this.componentConfig.current=e)},changeCurrent(e){this.componentConfig={...this.componentConfig,current:e}},changeHor(e){this.mode=e?"hor":""},onChange(e){console.log("[onChange]",e),this.componentConfig.current=e}}},fe={class:"demo-wrap demo-wrap--gray"};function Pe(e,t,r,c,o,s){const n=h("PressPagination"),a=h("demo-block"),l=h("PressIcon"),d=h("PressCell"),T=h("PressPopupCell"),D=h("PressPickerPlus");return p(),g("div",fe,[i(a,{title:e.t("basicUsage"),"section-style":o.backgroundStyle,"header-style":o.backgroundStyle,"custom-style":o.backgroundStyle},{default:u(()=>[i(n,{current:o.currentPage1,mode:"multi","total-items":24,"items-per-page":5,"prev-text":e.t("prevText"),"next-text":e.t("nextText"),onChange:t[0]||(t[0]=m=>o.currentPage1=m)},null,8,["current","prev-text","next-text"])]),_:1},8,["title","section-style","header-style","custom-style"]),i(a,{title:e.t("title2"),"section-style":o.backgroundStyle,"header-style":o.backgroundStyle,"custom-style":o.backgroundStyle},{default:u(()=>[i(n,{current:o.currentPage2,total:12,"prev-text":e.t("prevText"),"next-text":e.t("nextText"),mode:"simple",size:"small",onChange:t[1]||(t[1]=m=>o.currentPage2=m)},null,8,["current","prev-text","next-text"])]),_:1},8,["title","section-style","header-style","custom-style"]),i(a,{title:e.t("title3"),"section-style":o.backgroundStyle,"header-style":o.backgroundStyle,"custom-style":o.backgroundStyle},{default:u(()=>[i(n,{mode:"multi",current:o.currentPage3,"force-ellipses":"","total-items":125,"show-page-size":3,"prev-text":e.t("prevText"),"next-text":e.t("nextText"),onChange:t[2]||(t[2]=m=>o.currentPage3=m)},null,8,["current","prev-text","next-text"])]),_:1},8,["title","section-style","header-style","custom-style"]),i(a,{title:e.t("title4"),"section-style":o.backgroundStyle,"header-style":o.backgroundStyle,"custom-style":o.backgroundStyle},{default:u(()=>[i(n,{mode:"multi",current:o.currentPage4,"total-items":125,"show-page-size":5,onChange:t[3]||(t[3]=m=>o.currentPage4=m)},{"prev-text":u(()=>[i(l,{name:"arrow-left"})]),"next-text":u(()=>[i(l,{name:"arrow"})]),page:u(({text:m})=>[S(C(m),1)]),_:1},8,["current"])]),_:1},8,["title","section-style","header-style","custom-style"]),i(a,{title:"E-Sport","section-style":o.sectionStyle,"header-style":o.backgroundStyle,"custom-style":o.backgroundStyle},{default:u(()=>[i(d,{title:e.t("custom"),"is-link":"",onClick:s.onShowBasicPopupCell},null,8,["title","onClick"])]),_:1},8,["section-style","header-style","custom-style"]),i(T,{id:o.FUNCTIONAL_ID_MAP.POPUP_CELL,ref:o.FUNCTIONAL_ID_MAP.POPUP_CELL,mode:"functional"},null,8,["id"]),i(D,{id:o.FUNCTIONAL_ID_MAP.PICKER,ref:o.FUNCTIONAL_ID_MAP.PICKER,mode:"functional"},null,8,["id"]),i(n,{total:o.componentConfig.pageTotal,current:o.componentConfig.current,expand:o.componentConfig.expand,mode:o.mode,onChange:s.onChange},null,8,["total","current","expand","mode","onChange"])])}const we=x(de,[["render",Pe]]);export{we as default};
