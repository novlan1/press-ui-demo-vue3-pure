import{b as _}from"./index-CtSWKnZF.js";import{i as y}from"./h5-handler-CAytnr_I.js";import{P as C}from"./press-overlay-Cr0U8C5F.js";import{P as I}from"./press-icon-plus-Be77GIh7.js";import{f as S}from"./functional-O-PDt_Nb.js";import"./add-unit-B8Dm0KXN.js";import{n as k}from"./adapter-_Qol4RNt.js";import{S as O}from"./swiper-DlrIJpB2.js";import{_ as D,r as a,o,b as n,l,a as i,c as m,t as p,d as g,n as u,w as b,f as A,y as B,F as x,m as z,p as N,e as F}from"./index-BrqLSZap.js";const d={images:{type:Array,default:()=>[]},startPosition:{type:[Number,String],default:0},transition:{type:String,default:"press-fade"},showIndex:{type:Boolean,default:!0},asyncClose:{type:Boolean,default:!1},customStyle:{type:String,default:""},customClass:{type:String,default:""},closeable:{type:Boolean,default:!1},closeIcon:{type:String,default:"clear"},closeIconPosition:{type:String,default:"top-right"},zIndex:{type:Number,default:10}},M={name:"PressImagePreview",components:{PressOverlay:C,PressIconPlus:I},mixins:[S(d),O],props:{...d},emits:["close","change"],data(){return{active:0}},computed:{imagePreviewStyle(){return this.getPropOrData("customStyle")}},watch:{startPosition:"setActive",show(e){e?(this.setActive(+this.getPropOrData("startPosition")),k(()=>{})):this.$emit("close",{index:this.active,url:this.getPropOrData("images")[this.active]})}},mounted(){},methods:{showImagePreview(e){this.showDialog(e),this.setActive(e.startPosition||0)},onClosed(){},onChange(e){const{current:s=0}=e.detail;this.setActive(s)},emitClose(){this.getPropOrData("asyncClose")?this.promiseCallback("cancel"):(this.$emit("close"),this.innerShow=!1,this.promiseCallback("confirm"))},onClose(){this.emitClose()},onClickOverlay(){this.onClose()},onClickSwiperItem(){this.onClose()},setActive(e){e!==this.active&&(this.active=e,this.$emit("change",e))}}},V=e=>(N("data-v-24101e8f"),e=e(),F(),e),H={key:0,class:"press-image-preview__index"},L={class:"press-image-preview__image-wrap"},E=["src"],G=V(()=>i("div",null,null,-1));function T(e,s,J,K,c,t){const h=a("PressIconPlus"),w=a("swiper-item"),f=a("swiper"),P=a("PressOverlay");return o(),n(P,{show:e.innerShow,"custom-style":`background: rgba(0, 0, 0, 0.9);z-index: ${e.getPropOrData("zIndex")};`,onClick:t.onClickOverlay},{default:l(()=>[i("div",{class:u(["press-image-preview",[e.getPropOrData("customClass")]]),style:z(t.imagePreviewStyle)},[e.getPropOrData("showIndex")?(o(),m("div",H,p(c.active+1)+"/"+p(e.getPropOrData("images").length),1)):g("",!0),i("div",{class:u(["press-image-preview__close-icon",`press-image-preview__close-icon--${e.getPropOrData("closeIconPosition")}`]),onClick:s[0]||(s[0]=b((...r)=>t.onClose&&t.onClose(...r),["stop"]))},[e.getPropOrData("closeable")?(o(),n(h,{key:0,name:e.getPropOrData("closeIcon")},null,8,["name"])):g("",!0)],2),A(f,{class:"press-image-preview__swipe",current:c.active,onChange:t.onChange},{default:l(()=>[(o(!0),m(x,null,B(e.getPropOrData("images"),(r,v)=>(o(),n(w,{key:v,class:"press-image-preview__swipe-item",onClick:t.onClickSwiperItem},{default:l(()=>[i("div",L,[i("img",{class:"press-image-preview__image",src:r,fit:"contain"},null,8,E)])]),_:2},1032,["onClick"]))),128))]),_:1},8,["current","onChange"]),G],6)]),_:1},8,["show","custom-style","onClick"])}const $=D(M,[["render",T],["__scopeId","data-v-24101e8f"]]),j="pressImagePreview";function q(e){let s;return e.selector||(s=y($,j),s.mode="functional"),_({...e,dialog:s,show:!0,showFunction:"showImagePreview"})}const te=q;export{$ as I,te as a,q as i};
