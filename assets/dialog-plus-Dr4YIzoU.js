import{a2 as x,R as I,_ as D,a3 as R,Q as N,x as G,a4 as z,y as U,r as g,c as r,a as m,o as s,b as k,d as C,t as p,w as P,F as _,e as y,h as v,H as L,B as Q,n as W,P as Z,j as O}from"./index-BiwYslXk.js";import{s as q,a as F}from"./index-D4m_9mEc.js";import{a as A}from"./handler-helper-BKr0zvNe.js";import{S as E}from"./scroll-view-BXTRv4Vn.js";import{P as K}from"./press-field-Bj5wYfpP.js";import"./parent-CQhE6Wqc.js";function J(){const e=getCurrentPages();return e[e.length-1]}function X({options:e,currentOptions:o,dialogComponent:c,id:u}){e=Object.assign(Object.assign({},o),e);const l=e.context||J();let t=q(l,e.selector);if(delete e.context,delete e.selector,!t&&c&&(t=x(c,u)),t){const d={...e};return F(t,d),F(t,d,"showDialog").then(n=>Promise.resolve(n)).catch(n=>Promise.reject(n))}const a=`The ${e.selector} node is not found, please confirm whether the selector and context are correct`;return console.warn(a),Promise.reject(a)}const T={show:{type:Boolean,default:!1},src:{type:String,default:""},dialogType:{type:[Number,String],default:1},title:{type:String,default:I("dialog.title")},content:{type:String,default:""},canTouchRemove:{type:Boolean,default:!0},confirmText:{type:String,default:I("confirm")},cancelText:{type:String,default:""},onClickCancel:{type:[Function,null],default:null},onConfirmClick:{type:[Function,null],default:null},htmlContent:{type:String,default:""},zIndex:{type:[Number,String],default:"99"},useScrollView:{type:Boolean,default:!1},onClickImage:{type:[Function,null],default:null},onLongPressImage:{type:[Function,null],default:null},showField:{type:Boolean,default:!1},fieldPlaceHolder:{type:String,default:""},fieldValue:{type:String,default:""},customClass:{type:String,default:""},customStyle:{type:[String,Object],default:""}},Y={name:"PressDialogPlus",options:{...G(!0,!1),styleIsolation:"shared"},components:{PressButton:N,PressField:K},mixins:[R(T),E],props:{...T},emits:["confirm","cancel","onLongPressImage","onClickImage"],data(){return{resolve:"",reject:"",promise:"",mShowButtonLoading:!1,inputValue:""}},computed:{dialogCustomStyle(){return U([{zIndex:this.dataZIndex},this.dataCustomStyle||""])}},watch:{dataFieldValue:{handler(e){this.inputValue=e},immediate:!0}},mounted(){},methods:{preventTouchMove(){},confirm(){if(this.dataDialogType===2){if(this.mShowButtonLoading)return;this.mShowButtonLoading=!0}typeof this.dataOnConfirmClick=="function"?z(this.dataOnConfirmClick(this)).then(e=>{e&&this.resolveConfirm()}).catch(()=>{}):this.resolveConfirm()},resolveConfirm(){this.resolve&&this.resolve("confirm"),this.$emit("confirm"),this.remove()},cancel(){typeof this.dataOnClickCancel=="function"&&this.dataOnClickCancel(this),typeof this.reject=="function"&&this.reject("cancel"),this.$emit("cancel"),this.remove()},showDialog(){return this.dataShow=!0,this.promise=new Promise((e,o)=>{this.resolve=e,this.reject=o}),this.promise},touchRemove(){this.dataCanTouchRemove&&this.remove(),this.$emit("cancel")},remove(){this.dataShow=!1,this.mShowButtonLoading=!1},destroy(){},handleLongPressImage(){typeof this.dataOnLongPressImage=="function"&&this.dataOnLongPressImage(),this.$emit("onLongPressImage")},handleClickImage(){typeof this.dataOnClickImage=="function"&&this.dataOnClickImage(),this.$emit("onClickImage")},onChangeField(e){this.inputValue=e}}},$={class:"press-dialog__content-wrap"},ee={class:"press-dialog__title"},te=["innerHTML"],oe={key:2,class:"press-dialog__content"},ne={key:4,class:"press-dialog__img-wrap"},le=["src"],se={class:"press-dialog__btn--wrap"},ie={class:"press-dialog__btn--spacing"};function ae(e,o,c,u,l,t){const a=g("scroll-view"),d=g("PressField"),i=g("PressButton");return e.dataShow?(s(),r("div",{key:0,class:W(["press-dialog",e.dataCustomClass]),style:Q(t.dialogCustomStyle),onClick:o[2]||(o[2]=P((...n)=>t.touchRemove&&t.touchRemove(...n),["stop"])),onTouchmove:o[3]||(o[3]=P((...n)=>t.preventTouchMove&&t.preventTouchMove(...n),["stop"]))},[k("div",$,[k("p",ee,p(e.dataTitle),1),e.dataUseScrollView&&e.dataHtmlContent?(s(),C(a,{key:0,"scroll-y":"true",class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,["innerHTML"])):e.dataHtmlContent?(s(),r("p",{key:1,class:"press-dialog__content",innerHTML:e.dataHtmlContent},null,8,te)):m("",!0),e.dataHtmlContent?m("",!0):(s(),r("p",oe,p(e.dataContent),1)),e.dataShowField?(s(),C(d,{key:3,"custom-class":"press-dialog__field","title-width":"0",placeholder:e.dataFieldPlaceHolder,value:e.dataFieldValue,"model-value":e.dataFieldValue,onChange:t.onChangeField},null,8,["placeholder","value","model-value","onChange"])):m("",!0),e.dataSrc?(s(),r("div",ne,[e.dataSrc?(s(),r("img",{key:0,class:"press-dialog__img","show-menu-by-longpress":!0,src:e.dataSrc,onClick:o[0]||(o[0]=P((...n)=>t.handleClickImage&&t.handleClickImage(...n),["stop"])),onLongpress:o[1]||(o[1]=(...n)=>t.handleLongPressImage&&t.handleLongPressImage(...n))},null,40,le)):m("",!0)])):m("",!0),k("div",se,[e.dataCancelText&&e.dataCancelText.length>0?(s(),r(_,{key:0},[k("div",ie,[y(i,{type:"e-sport-secondary","custom-style":"width: 100px;height: 36px;",onClick:t.cancel},{default:v(()=>[L(p(e.dataCancelText),1)]),_:1},8,["onClick"])]),y(i,{type:"e-sport-primary-bg",loading:l.mShowButtonLoading,"custom-style":"width: 100px;height: 36px;",onClick:t.confirm},{default:v(()=>[L(p(l.mShowButtonLoading?"":e.dataConfirmText),1)]),_:1},8,["loading","onClick"])],64)):e.dataConfirmText||l.mShowButtonLoading?(s(),C(i,{key:1,type:"e-sport-primary-bg",loading:l.mShowButtonLoading,"custom-style":"width: 148px;height: 36px;",onClick:t.confirm},{default:v(()=>[L(p(l.mShowButtonLoading?"":e.dataConfirmText),1)]),_:1},8,["loading","onClick"])):m("",!0)])])],38)):m("",!0)}const V=D(Y,[["render",ae],["__scopeId","data-v-0389e2a4"]]);let H=[];const j=Object.keys(T).reduce((e,o)=>(e[o]=T[o].default,e),{selector:"#tip-match-comm-tips-dialog"});let b=Object.assign({},j);const f=e=>X({options:e,currentOptions:b,id:"tip-dialog-showCommTipsDialog",dialogComponent:V});function re(e){H=e}function ce(e){b=e}f.show=e=>f(e);A({Dialog:f,queue:H,currentOptions:b,defaultOptions:j,updateQueue:re,updateCurrentOptions:ce});const ue=f.show;f.setDefaultOptions;f.resetDefaultOptions;const M=function(){return new Promise(e=>{setTimeout(()=>{e(!0)},3e3)})},de={i18n:{"zh-CN":{customButton:"自定义按钮",customContent:"自定义内容",noCancel:"没有取消按钮",noCancelLoading:"没有取消+加载中",image:"图片",html:"HTML内容",field:"输入框",noMask:"点击蒙层不可关闭",longText:"长文本",onlyCaption:"仅限队长报名，发给队长来报名吧！",custom:"自定义",componentCall:"组件调用",multiple:"多例",longContent:()=>["念奴娇·赤壁怀古","大江东去，浪淘尽，千古风流人物。故垒西边，人道是，三国周郎赤壁。乱石穿空，惊涛拍岸，卷起千堆雪。江山如画，一时多少豪杰。","遥想公瑾当年，小乔初嫁了，雄姿英发。羽扇纶巾，谈笑间，樯橹灰飞烟灭。故国神游，多情应笑我，早生华发。人生如梦，一尊还酹江月。","<br/>","沁园春·雪","北国风光，千里冰封，万里雪飘。望长城内外，惟余莽莽；大河上下，顿失滔滔。山舞银蛇，原驰蜡象，欲与天公试比高。须晴日，看红装素裹，分外妖娆。","江山如此多娇，引无数英雄竞折腰。惜秦皇汉武，略输文采；唐宗宋祖，稍逊风骚。一代天骄，成吉思汗，只识弯弓射大雕。俱往矣，数风流人物，还看今朝。","<br/>","沁园春·长沙","独立寒秋，湘江北去，橘子洲头。看万山红遍，层林尽染；漫江碧透，百舸争流。鹰击长空，鱼翔浅底，万类霜天竞自由。怅寥廓，问苍茫大地，谁主沉浮？","携来百侣曾游，忆往昔峥嵘岁月稠。恰同学少年，风华正茂；书生意气，挥斥方遒。指点江山，激扬文字，粪土当年万户侯。曾记否，到中流击水，浪遏飞舟？"].join("<br/>")},"en-US":{customButton:"Custom Button",customContent:"Custom Content",noCancel:"No Cancel",noCancelLoading:"No Cancel and Loading",image:"Image",html:"HTML Content",field:"Input",noMask:"No Close By Mask",longText:"Long Text",onlyCaption:"Only the captain can sign up, send it to the captain to sign up!",custom:"Custom ",componentCall:"Component Call",multiple:"Multiple",longContent:()=>["Reflections on the Ancient Red Cliff--To the tune of Niannujiao","","The Great River flows,","Eastward waves sweeping away,","For thousands of years, gallant heroes.","West of the ancient fort, they say, stands","The Red Cliff of the Three-Kingdoms' Duke Zhou.","Rocks pierce the sky, shore-tearing","Waves swirl into piles of snow.","What a glorious sweep of land,","Once a stage for so many a hero!","","My thoughts drift to those years when Zhou","Had newly married the beautiful Qiao,","Vigour and valour aglow.","A feather fan and a silken hat,","He masterminded the fire-attack on the foe--","Over a casual chat","To see their fleet perish, blow by blow.","Back from my mental vagrancy in that bygone age,","I must laugh at myself: letting sentiments grow","Into grey hairs, too soon.","But isn't life a dream, after all？","Let me pledge this cup to the River,","To the Moon."].join("<br/>")}},components:{PressDialogPlus:V,PressCell:Z},data(){return{sectionStyle:"",show:!1,show2:!1,curType:"",dialogTypeList:[{title:this.t("basicUsage"),list:[{name:"normal",title:this.t("basicUsage")},{name:"noTouchMove",title:this.t("noMask")}]},{title:this.t("customContent"),list:[{name:"img",title:this.t("image")},{name:"html",title:this.t("html")},{name:"longText",title:this.t("longText")},{name:"field",title:this.t("field")}]},{title:this.t("customButton"),list:[{name:"noCancel",title:this.t("noCancel")},{name:"loading",title:this.t("loadingStatus")},{name:"noCancelLoading",title:this.t("noCancelLoading")}]},{title:this.t("componentCall"),list:[{name:"componentCall",title:this.t("componentCall")},{name:"multiple",title:this.t("multiple")}]}]}},methods:{onShowDialog(e){if(this.curType=e,e==="componentCall"){this.show=!0;return}if(e==="multiple"){this.show=!0,this.show2=!0;return}let o=this.t("cancel"),c=1,u=null,l=this.t("onlyCaption"),t="",a="",d=null,i=!0,n=!1,w=!1,h="",S="";e==="noCancel"?o="":e==="loading"?(c=2,u=M):e==="noCancelLoading"?(c=2,o="",u=M):e==="html"?(l="",t=`<div>${this.t("custom")}<span style="color: red;">${this.t("content")}</span></div>`):e==="img"?a="https://mike-1255355338.cos.ap-guangzhou.myqcloud.com/article/2023/10/own_mike_19f9b1ecdd9332c7c0.jpg":e==="noTouchMove"?i=!1:e==="longText"?(l="",t=`<div style="max-height:100%;overflow:scroll;">${this.t("longContent")}</div>`,n=!0):e==="field"&&(w=!0,h="随便输点什么吧",l="",S="Press UI",i=!1,u=B=>B.inputValue?(this.onGTip(`内容: ${B.inputValue}`),!0):(this.onGTip("请输入内容"),!1)),ue({context:this,title:this.t("title"),content:l,htmlContent:t,src:a,onLongPressImage:d,confirmText:this.t("confirm"),cancelText:o,dialogType:c,onConfirmClick:u,canTouchRemove:i,useScrollView:n,showField:w,fieldPlaceHolder:h,fieldValue:S}).then(()=>{e!=="field"&&this.onGTip("confirm")}).catch(()=>{this.onGTip("cancel")})},onConfirm(e){this[e]=!1,this.curType!=="field"&&this.onGTip("confirm")},onCancel(e){this[e]=!1,this.onGTip("cancel")}}},me={class:"demo-wrap"};function he(e,o,c,u,l,t){const a=g("PressCell"),d=g("demo-block"),i=g("PressDialogPlus");return s(),r("div",me,[(s(!0),r(_,null,O(l.dialogTypeList,(n,w)=>(s(),C(d,{key:w,title:n.title,"section-style":l.sectionStyle},{default:v(()=>[(s(!0),r(_,null,O(n.list,h=>(s(),C(a,{key:h.name,title:h.title,"is-link":"",onClick:S=>t.onShowDialog(h.name)},null,8,["title","onClick"]))),128))]),_:2},1032,["title","section-style"]))),128)),y(i,{id:"tip-match-comm-tips-dialog",ref:"tip-match-comm-tips-dialog"},null,512),y(i,{title:e.t("title"),show:l.show,content:"Some fake news",onConfirm:o[0]||(o[0]=n=>t.onConfirm("show")),onCancel:o[1]||(o[1]=n=>t.onCancel("show"))},null,8,["title","show"]),y(i,{title:e.t("title"),show:l.show2,content:"Some fake news 2","custom-style":"background-color: transparent;",onConfirm:o[2]||(o[2]=n=>t.onConfirm("show2")),onCancel:o[3]||(o[3]=n=>t.onCancel("show2"))},null,8,["title","show"])])}const ke=D(de,[["render",he]]);export{ke as default};
