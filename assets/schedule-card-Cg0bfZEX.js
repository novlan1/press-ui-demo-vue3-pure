import{_ as C,o as c,c as a,F as v,i as x,a as o,x as S,w as Q,t as u,p as L,e as k,r as p,b as W,n as R,d as f,u as y,y as Z,z as lt,A as ut,f as h,B as dt,aa as ht,C as pt}from"./index-BZexHo5h.js";import{P as $}from"./press-count-down-CWCoVA6F.js";import{u as mt}from"./utils-Do31p4kb.js";import{P as Tt}from"./press-cell-j69wMGN4.js";import{P as St}from"./press-popup-cell-BAyvtasA.js";import{P as ft}from"./press-picker-39gRzZ_X.js";import{D as Ct}from"./demo-input-lSDQS-6W.js";import{a as yt}from"./time-BZ2JUv3Z.js";import{N as M}from"./number-DPMwlMRz.js";import"./add-unit-Df5pRFBE.js";import"./press-icon-plus-5Xj-bw2h.js";import"./press-info-BWsAQQHi.js";import"./press-component-HD2axD72.js";import"./validator-OjQp2SYe.js";import"./link-Ds6ljOst.js";import"./event-Dm-SpHU4.js";import"./support-passive-CNRHRm4O.js";import"./press-popup-7HnpDVXn.js";import"./press-button-DeHHH_6o.js";import"./press-loading-plus-Df-tLDhD.js";import"./press-loading-wkUvB1Ib.js";import"./button-BaKXjqxg.js";import"./system-BAdrsxg_.js";import"./function-CHWTa32-.js";import"./press-switch-BgOgGYGX.js";import"./computed-COUhjXwe.js";import"./functional-DDGVd29A.js";import"./rect-ZZRvyvMD.js";import"./scroll-DZ_Dh06R.js";import"./index-DfrNFuIM.js";const wt={name:"PressScheduleCardSteps",components:{},props:{stepList:{type:Array,default:()=>[]}},emits:["click"],data(){return{}},methods:{onClick(n,i){this.$emit("click",n,i)}}},gt=n=>(L("data-v-0cf80b06"),n=n(),k(),n),At={class:"press-card-steps__box"},bt=["onClick"],Dt={key:1,class:"press-card-steps__time--playing"},It=gt(()=>o("div",{class:"press-card-steps__line"},null,-1));function vt(n,i,e,_,t,s){return c(),a("div",{class:S(["press-card-steps",e.stepList.length<=3?"press-card-steps--center":""])},[(c(!0),a(v,null,x(e.stepList,(r,l)=>(c(),a("div",{key:l,class:"press-card-steps__item"},[o("div",At,[o("div",{class:S(["press-card-steps__name",r.isCurrent?"press-card-steps__name--active":""]),onClick:Q(m=>s.onClick(r,l),["stop"])},u(r.title),11,bt),r.playing?(c(),a("div",Dt," · 进行中 ")):(c(),a("div",{key:0,class:S(["press-card-steps__time",r.isCurrent?"press-card-steps__time--active":""])},u(r.time),3))]),It]))),128))],2)}const Lt=C(wt,[["render",vt],["__scopeId","data-v-0cf80b06"]]),kt={name:"PressScheduleCardCountDown",components:{PressCountDown:$},props:{countdownTime:{type:Number,default:0,required:!0},forceShowDay:{type:Boolean,default:!1},showUnit:{type:Boolean,default:!1}},emits:["change","finish"],data(){return{timeData:{}}},computed:{isContainDays(){return this.forceShowDay?!0:this.countdownTime>24*60*60*1e3}},methods:{onChange(n){this.timeData=n,this.$emit("change",n)},finish(){this.countdownTime<=0||this.$emit("finish")}}},w=n=>(L("data-v-01213644"),n=n(),k(),n),Et={class:"press-card-count-down"},Nt={class:"press-card-count-down__bundle"},Pt={class:"press-card-count-down__bundle-top"},Bt={class:"press-card-count-down__num"},Mt=w(()=>o("em",{class:"press-card-count-down__unit"},"天",-1)),Rt=w(()=>o("div",{class:"press-card-count-down__colon"},null,-1)),xt={class:"press-card-count-down__bundle"},Ot={class:"press-card-count-down__bundle-top"},Ut={class:"press-card-count-down__num"},Wt=w(()=>o("em",{class:"press-card-count-down__unit"},"时",-1)),Gt=w(()=>o("div",{class:"press-card-count-down__colon"},null,-1)),Ft={class:"press-card-count-down__bundle"},Ht={class:"press-card-count-down__bundle-top"},jt={class:"press-card-count-down__num"},Yt=w(()=>o("em",{class:"press-card-count-down__unit"},"分",-1)),zt=w(()=>o("div",{class:"press-card-count-down__colon"},null,-1)),Kt={class:"press-card-count-down__bundle"},Xt={class:"press-card-count-down__bundle-top"},Qt={class:"press-card-count-down__num"},Vt=w(()=>o("em",{class:"press-card-count-down__unit"},"秒",-1)),Jt={class:"press-card-count-down-simple"},qt={class:"press-card-count-down-simple__wrap"},Zt={class:"press-card-count-down-simple__box"},$t={class:"press-card-count-down-simple__num"},te=w(()=>o("div",{class:"press-card-count-down-simple__colon"},null,-1)),ee={class:"press-card-count-down-simple__box"},se={class:"press-card-count-down-simple__num"},ne=w(()=>o("div",{class:"press-card-count-down-simple__colon"},null,-1)),oe={class:"press-card-count-down-simple__box"},ie={class:"press-card-count-down-simple__num"},ce=w(()=>o("div",{class:"press-card-count-down-simple__colon"},null,-1)),ae={class:"press-card-count-down-simple__box"},re={class:"press-card-count-down-simple__num"};function _e(n,i,e,_,t,s){const r=p("press-count-down");return c(),a("div",null,[e.showUnit?(c(),W(r,{key:0,"use-slot":"",time:e.countdownTime,onChange:s.onChange,onFinish:s.finish},{default:R(()=>[o("div",Et,[s.isContainDays?(c(),a(v,{key:0},[o("div",Nt,[o("p",Pt,[o("span",Bt,u(t.timeData.days<10?`0${t.timeData.days}`:t.timeData.days),1)]),Mt]),Rt],64)):f("",!0),o("div",xt,[o("p",Ot,[o("span",Ut,u(t.timeData.hours<10?`0${t.timeData.hours}`:t.timeData.hours),1)]),Wt]),Gt,o("div",Ft,[o("p",Ht,[o("span",jt,u(t.timeData.minutes<10?`0${t.timeData.minutes}`:t.timeData.minutes),1)]),Yt]),zt,o("div",Kt,[o("p",Xt,[o("span",Qt,u(t.timeData.seconds<10?`0${t.timeData.seconds}`:t.timeData.seconds),1)]),Vt])])]),_:1},8,["time","onChange","onFinish"])):(c(),W(r,{key:1,"use-slot":"",time:e.countdownTime,onChange:s.onChange,onFinish:s.finish},{default:R(()=>[o("div",Jt,[o("div",qt,[s.isContainDays?(c(),a(v,{key:0},[o("p",Zt,[o("span",$t,u(t.timeData.days<10?`0${t.timeData.days}`:t.timeData.days),1)]),te],64)):f("",!0),o("p",ee,[o("span",se,u(t.timeData.hours<10?`0${t.timeData.hours}`:t.timeData.hours),1)]),ne,o("p",oe,[o("span",ie,u(t.timeData.minutes<10?`0${t.timeData.minutes}`:t.timeData.minutes),1)]),ce,o("p",ae,[o("span",re,u(t.timeData.seconds<10?`0${t.timeData.seconds}`:t.timeData.seconds),1)])])])]),_:1},8,["time","onChange","onFinish"]))])}const le=C(kt,[["render",_e],["__scopeId","data-v-01213644"]]),ue={name:"PressScheduleCardTitle",components:{},props:{title:{type:String,default:""},showIcon:{type:Boolean,default:!1}},emits:["checkDataDetail"],data(){return{}},methods:{checkDataDetail(){this.$emit("checkDataDetail")}}},tt=n=>(L("data-v-ca5ded74"),n=n(),k(),n),de={class:"press-card-title"},he={class:"press-card-title__main"},pe=tt(()=>o("div",{class:"press-card-title__icon-title"}," 详情 ",-1)),me=tt(()=>o("i",{class:"card-iconfont icon-back"},null,-1)),Te=[pe,me];function Se(n,i,e,_,t,s){return c(),a("div",de,[o("div",he,[y(u(e.title),1),Z(n.$slots,"default",{},void 0,!0)]),e.showIcon?(c(),a("div",{key:0,class:"press-card-title__icon-wrap",onClick:i[0]||(i[0]=(...r)=>s.checkDataDetail&&s.checkDataDetail(...r))},Te)):f("",!0)])}const et=C(ue,[["render",Se],["__scopeId","data-v-ca5ded74"]]),fe={name:"PressScheduleCardTopNav",components:{},props:{nick:{type:String,default:""},deviceStr:{type:String,default:""},showRoleId:{type:Boolean,default:!0},roleId:{type:String,default:""},showExchange:{type:Boolean,default:!1},showRightTitle:{type:Boolean,default:!1},rightTitle:{type:String,default:""}},emits:["exchange"],data(){return{}},methods:{onExchange(){this.$emit("exchange")}}},st=n=>(L("data-v-d5b475df"),n=n(),k(),n),Ce={class:"press-card-nav"},ye={class:"press-card-nav__left"},we={class:"press-card-nav__name"},ge={class:"press-card-nav__info"},Ae={key:0},be={class:"press-card-nav__right"},De=st(()=>o("i",{class:"card-iconfont icon-exchange"},null,-1)),Ie=st(()=>o("div",{class:"press-card-nav__exchange"}," 切换 ",-1)),ve=[De,Ie],Le={key:1,class:"press-card-nav__intro"};function ke(n,i,e,_,t,s){return c(),a("div",Ce,[o("div",ye,[o("div",we,u(e.nick),1),o("div",ge,[o("span",null,u(e.deviceStr),1),y(" | "),e.showRoleId?(c(),a("span",Ae,"ID:"+u(e.roleId),1)):f("",!0)])]),o("div",be,[e.showExchange?(c(),a("div",{key:0,class:"press-card-nav__exchange-wrap",onClick:i[0]||(i[0]=(...r)=>s.onExchange&&s.onExchange(...r))},ve)):e.showRightTitle?(c(),a("div",Le,u(e.rightTitle),1)):f("",!0)])])}const Ee=C(fe,[["render",ke],["__scopeId","data-v-d5b475df"]]),d={GAME_WILL_START:"GAME_WILL_START",BATTLE_STARTED:"BATTLE_STARTED",BATTLE_PLAYING:"BATTLE_PLAYING",BATTLE_NEXT_WILL_START:"BATTLE_NEXT_WILL_START",GAME_END:"GAME_END"},E={PRIMARY:"green",DISABLE:"gray"},X={TEXT:"TEXT",AVATAR:"AVATAR"},A={SUCCESS:"SUCCESS",FAIL:"FAIL",PENDING:"PENDING"},nt={ON:"1",OFF:"2"},I={SHOW_COUNT_DOWN:"SHOW_COUNT_DOWN",SHOW_TEAM_LIST:"SHOW_TEAM_LIST",SHOW_SCORE_LIST:"SHOW_SCORE_LIST",SHOW_RESULT:"SHOW_RESULT"},z={NOT_START:0,WILL_START:10,PLAYING:100,EMD:200,SIGN_FAIL:300,CANCELED:400},U={SUCCESS:100,FAIL:200,PENDING:300},N={NOT_START:0,WILL_START:10,PLAYING:100,EMD:200,RESULT:300},Ne={[U.SUCCESS]:A.SUCCESS,[U.FAIL]:A.FAIL,[U.PENDING]:A.PENDING},Pe={name:"PressScheduleCardButton",components:{PressCountDown:$},props:{buttonType:{type:String,default:""},buttonText:{type:String,default:""},showButtonCountdown:{type:String,default:""},buttonStyle:{type:Object,default:()=>({width:4,height:.72})},showButtonTip:{type:Boolean,default:!1},buttonTipType:{type:String,default:X.TEXT},buttonTip:{type:String,default:""},buttonCountDown:{type:Number,default:0},buttonAvatarList:{type:Array,default:()=>[]}},emits:["click","finish"],data(){return{SWITCH_TYPE:nt,BUTTON_TIP_TYPE_AMP:X}},computed:{extraButtonClass(){return mt.bem2("card-button__main",{green:this.buttonType==="green",gray:this.buttonType==="gray"})}},mounted(){},updated(){},methods:{finish(){this.buttonCountDown<=0||this.$emit("finish")},onClickButton(){this.$emit("click")}}},Be={class:"press-card-button"},Me={key:0,class:"press-card-button__tips"},Re={key:1,class:"press-card-button__avatar-tips"},xe={class:"press-card-button__avatar-tip"},Oe={key:0,class:"press-card-button__avatars"},Ue=["src"];function We(n,i,e,_,t,s){const r=p("press-count-down");return c(),a("div",Be,[e.showButtonTip&&e.buttonTipType===t.BUTTON_TIP_TYPE_AMP.TEXT?(c(),a("div",Me,u(e.buttonTip),1)):e.showButtonTip&&e.buttonTipType==t.BUTTON_TIP_TYPE_AMP.AVATAR?(c(),a("div",Re,[o("div",xe,u(e.buttonTip),1),e.buttonAvatarList.length?(c(),a("div",Oe,[(c(!0),a(v,null,x(e.buttonAvatarList,(l,m)=>(c(),a("div",{key:m,class:S(["press-card-button__avatar-wrap",{"press-card-button__avatar-wrap--green":l.isGreen,"press-card-button__avatar-wrap--yellow":l.isYellow}])},[o("img",{class:"press-card-button__avatar",src:l.head,alt:"",srcset:""},null,8,Ue)],2))),128))])):f("",!0)])):f("",!0),o("div",{class:S([s.extraButtonClass,"press-card-button__main"]),onClick:i[0]||(i[0]=Q((...l)=>s.onClickButton&&s.onClickButton(...l),["stop"]))},[Z(n.$slots,"default",{},void 0,!0),e.showButtonCountdown==t.SWITCH_TYPE.ON?(c(),W(r,{key:0,time:e.buttonCountDown,onFinish:s.finish},null,8,["time","onFinish"])):f("",!0)],2)])}const Ge=C(Pe,[["render",We],["__scopeId","data-v-cef7308b"]]),Fe={name:"PressScheduleCardMatchResult",props:{isFail:{type:Boolean,default:!1},title:{type:String,default:""},desc:{type:String,default:""}},data(){return{}}},He=n=>(L("data-v-e467ad7b"),n=n(),k(),n),je={class:"press-sche-card-match__result"},Ye=He(()=>o("div",{class:"press-sche-card-match__result-icon"},null,-1)),ze={class:"press-sche-card-match__result-text"},Ke={class:"press-sche-card-match__result-tips"};function Xe(n,i,e,_,t,s){return c(),a("div",{class:S(["press-sche-card-match",e.isFail?"press-sche-card-match--gray":""])},[o("div",je,[Ye,o("div",ze,u(e.title),1)]),o("div",Ke,u(e.desc),1)],2)}const Qe=C(Fe,[["render",Xe],["__scopeId","data-v-e467ad7b"]]),Ve={name:"PressScheduleCardTeams",props:{teamList:{type:Array,default:()=>[]}},data(){return{}}},Je={class:"press-sche-card-join__teams"},qe={class:"press-sche-card-join__team-avatar-box"},Ze={class:"press-sche-card-join__team-avatar",alt:"",srcset:""},$e={class:"press-sche-card-join__team-name"};function ts(n,i,e,_,t,s){const r=lt("lazy");return c(),a("div",Je,[(c(!0),a(v,null,x(e.teamList,(l,m)=>(c(),a("div",{key:m,class:"press-sche-card-join__team"},[o("div",qe,[ut(o("img",Ze,null,512),[[r,l.head]]),l.readyDesc?(c(),a("div",{key:0,class:S(["press-sche-card-join__team-desc",l.readyType==1?"press-sche-card-join__team-desc--light":""])},u(l.readyDesc),3)):f("",!0)]),o("div",$e,u(l.nick),1)]))),128))])}const es=C(Ve,[["render",ts],["__scopeId","data-v-5ee8fb9d"]]),ss={name:"PressScheduleCardScores",props:{scoreList:{type:Array,default:()=>[]}},data(){return{}}},ns={class:"press-sche-card-join__score-list"},os={class:"press-sche-card-join__score-num"},is={class:"press-sche-card-join__score-result"},cs={class:"press-sche-card-join__score-round"};function as(n,i,e,_,t,s){return c(),a("div",ns,[(c(!0),a(v,null,x(e.scoreList,(r,l)=>(c(),a("div",{key:l,class:"press-sche-card-join__score-item"},[o("div",os,u(r.score),1),o("div",is,[o("span",cs,u(r.title),1),o("span",{class:S(["press-sche-card-join__score-bg",r.isWinner==1?"press-sche-card-join__score-bg---green":r.isWinner==2?"press-sche-card-join__score-bg---pink":"press-sche-card-join__score-bg---gray"])},u(r.isWinner==1?"胜":r.isWinner==2?"败":"-"),3)])]))),128))])}const rs=C(ss,[["render",as],["__scopeId","data-v-e7179400"]]),_s={props:{resultList:{type:Array,default:()=>[]}},data(){return{}}},ls={class:"press-sche-card__result-name"},us={class:"press-sche-card__result-num-wrap"},ds={class:"press-sche-card__result-num"};function hs(n,i,e,_,t,s){return c(),a("div",{class:S(["press-sche-card__result-list","press-sche-card__result-list-active"])},[(c(!0),a(v,null,x(e.resultList,(r,l)=>(c(),a("div",{key:l,class:"press-sche-card__result-item"},[o("div",ls,u(r.name),1),o("div",us,[o("div",ds,u(r.num),1)])]))),128))])}const ps=C(_s,[["render",hs],["__scopeId","data-v-343fc0b4"]]),ms={name:"PressScheduleCardResults",components:{CardTitle:et},props:{resultType:{type:String,default:""},pendingText:{type:String,default:""}},data(){return{RESULT_TYPE_MAP:A}}},ot=n=>(L("data-v-45087b28"),n=n(),k(),n),Ts={class:"press-sche-card__results"},Ss={key:0},fs=ot(()=>o("div",{class:"press-sche-card__pending"},null,-1)),Cs={class:"press-sche-card__pending-text"},ys={key:1,class:"press-sche-card__success"},ws=ot(()=>o("img",{mode:"heightFix",class:"press-sche-card__success-cup",src:"https://image-1251917893.file.myqcloud.com/tip-project/apex/apex--winner-cup.png",alt:"",srcset:""},null,-1));function gs(n,i,e,_,t,s){const r=p("CardTitle");return c(),a("div",Ts,[e.resultType===t.RESULT_TYPE_MAP.PENDING?(c(),a("div",Ss,[fs,o("div",Cs,u(e.pendingText),1)])):(c(),a("div",ys,[h(r,null,{default:R(()=>[y(" 恭喜 "),ws,y(" 晋级 ")]),_:1})]))])}const As=C(ms,[["render",gs],["__scopeId","data-v-45087b28"]]),bs={name:"PressScheduleCard",components:{CardSteps:Lt,CardCountDown:le,CardTitle:et,CardTopNav:Ee,CardButton:Ge,CardMatchResult:Qe,CardTeams:es,CardScores:rs,CardResultList:ps,CardResults:As},props:{isNotSignUp:{type:Boolean,default:!1},cardState:{type:String,default:""},countdownTime:{type:Number,default:0},buttonCountDown:{type:Number,default:0},stepList:{type:Array,default:()=>[]},gameStageList:{type:Array,default:()=>[]},teamList:{type:Array,default:()=>[]},scoreList:{type:Array,default:()=>[]},resultList:{type:Array,default:()=>[]},resultType:{type:String,default:""},failTitle:{type:String,default:"晋级失败"},failDesc:{type:String,default:"本场比赛晋级失败，请参与其他场次"},pendingText:{type:String,default:"等待裁判确认晋级名次"},userNick:{type:String,default:""},deviceStr:{type:String,default:""},roleId:{type:String,default:""},buttonText:{type:String,default:""},buttonType:{type:String,default:""},buttonTip:{type:String,default:""},showButtonCountdown:{type:String,default:""},buttonTipType:{type:String,default:""},buttonAvatarList:{type:Array,default:()=>[]},isMatchSuccess:{type:Boolean,default:!1}},emits:["click","clickButton","checkDataDetail","clickStep","countDownChange","countDownFinish","buttonCountDownFinish","exchange"],data(){return{SCHEDULE_CARD_STATE_MAP:d,RESULT_TYPE_MAP:A,INNER_MATCH_STATUS_MAP:I,matchStatus:I.SHOW_COUNT_DOWN,showRemindTeammateIcon:!1,showMyPrizeIcon:!1,leftButtonText:"",leftButtonIcon:"",showBattleTeamList:!1,showMatchDataDetail:!1,rightButtonText:"",rightButtonIcon:"",innerButtonText:this.buttonText,innerButtonType:this.buttonType,innerButtonTip:this.buttonTip,innerShowButtonCountdown:this.showButtonCountdown,innerButtonTipType:this.buttonTipType}},watch:{cardState:"init",isNotSignUp:{handler(){this.init()},immediate:!0}},created(){this.init()},mounted(){},updated(){},methods:{initButton(){this.innerButtonText=this.buttonText,this.innerButtonType=this.buttonType,this.innerButtonTip=this.buttonTip,this.innerShowButtonCountdown=this.showButtonCountdown,this.innerButtonTipType=this.buttonTipType},init(){this.initButton(),this.cardState===d.GAME_WILL_START?(this.matchStatus=I.SHOW_COUNT_DOWN,this.innerButtonText=this.buttonText||"待开赛",this.innerButtonType=this.buttonType||E.DISABLE):this.cardState===d.BATTLE_STARTED?(this.matchStatus=I.SHOW_TEAM_LIST,this.innerButtonText=this.buttonText||"去比赛",this.innerButtonType=this.buttonType||E.PRIMARY,this.innerButtonTip=this.buttonTip||"已开赛",this.innerButtonTipType=X.TEXT,console.log("innerButtonTip",this.innerButtonTip)):this.cardState===d.BATTLE_PLAYING?(this.matchStatus=I.SHOW_TEAM_LIST,this.innerButtonText=this.buttonText||"比赛进行中",this.innerButtonType=this.buttonType||E.DISABLE):this.cardState===d.BATTLE_NEXT_WILL_START?(this.matchStatus=I.SHOW_SCORE_LIST,this.innerButtonText=this.buttonText||"待开赛",this.innerButtonType=this.buttonType||E.DISABLE,this.innerShowButtonCountdown=this.showButtonCountdown||nt.ON):this.cardState===d.GAME_END&&(this.matchStatus=I.SHOW_RESULT,this.resultType===A.FAIL?(this.innerButtonText=this.buttonText||"查看详细数据",this.innerButtonType=this.buttonType||E.PRIMARY):(this.innerButtonText=this.buttonText||"查看下一阶段",this.innerButtonType=this.buttonType||E.PRIMARY,this.showMatchDataDetail=!0))},clickButton(){this.$emit("clickButton",this.innerButtonType,this.cardState,d)},checkDataDetail(){this.$emit("checkDataDetail",this.cardState,d)},clickStep(n,i){this.$emit("clickStep",n,i)},countDownChange(){this.$emit("countDownChange",this.cardState,d)},countDownFinish(){this.$emit("countDownFinish",this.cardState,d)},buttonCountDownFinish(){this.$emit("buttonCountDownFinish",this.cardState,d)},onExchange(){this.$emit("exchange",this.cardState,d)},onClick(){this.$emit("click")}}},G=n=>(L("data-v-76498049"),n=n(),k(),n),Ds={key:0,class:"press-sche-card-sign"},Is={class:"press-sche-card-sign__main"},vs={class:"press-sche-card-join__main"},Ls={key:0,class:"press-sche-card-join__box"},ks={class:"press-sche-card-join__info"},Es={key:1,class:"press-sche-card-join__box"},Ns={class:"press-sche-card-join__info"},Ps={key:2,class:"press-sche-card-join__box"},Bs={class:"press-sche-card-join__info"},Ms={key:3,class:"press-sche-card-join__box"},Rs={class:"press-sche-card-join__info"},xs={key:4,class:"press-sche-card-join__box"},Os={class:"press-sche-card-join__info"},Us={key:0,class:"press-sche-card__left-button"},Ws=G(()=>o("i",{class:"card-iconfont icon-bell"},null,-1)),Gs={key:1,class:"press-sche-card__left-button"},Fs=G(()=>o("i",{class:"card-iconfont icon-gift"},null,-1)),Hs={key:2,class:"press-sche-card__left-button"},js={key:3,class:"press-sche-card__left-button",style:{width:".8rem"}},Ys={key:4,class:"press-sche-card__right-button"},zs=G(()=>o("i",{class:"card-iconfont icon-team-member"},null,-1)),Ks=G(()=>o("i",{class:"card-iconfont icon-detail-data"},null,-1)),Xs={key:6,class:"press-sche-card__right-button"},Qs={key:7,class:"press-sche-card__right-button",style:{width:".8rem"}};function Vs(n,i,e,_,t,s){const r=p("CardSteps"),l=p("CardTitle"),m=p("CardCountDown"),T=p("CardTopNav"),b=p("CardMatchResult"),P=p("CardTeams"),F=p("CardScores"),H=p("CardResults"),j=p("CardResultList"),Y=p("CardButton");return c(),a("div",{onClick:i[1]||(i[1]=Q((...B)=>s.onClick&&s.onClick(...B),["stop"]))},[e.isNotSignUp?(c(),a("div",Ds,[o("div",Is,[h(r,{"step-list":e.gameStageList,onClick:s.clickStep},null,8,["step-list","onClick"]),h(l,{title:"距报名截止"}),h(m,{"countdown-time":e.countdownTime,"force-show-day":!0,"show-unit":!0,onChange:s.countDownChange,onFinish:s.countDownFinish},null,8,["countdown-time","onChange","onFinish"])])])):(c(),a("div",{key:1,class:S(["press-sche-card-join",{"press-sche-card-join--count-down":t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_COUNT_DOWN,"press-sche-card-join--team":t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_TEAM_LIST,"press-sche-card-join--score":t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_SCORE_LIST,"press-sche-card-join--result":t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_RESULT}])},[h(T,{nick:e.userNick,"device-str":e.deviceStr,"role-id":e.roleId,onExchange:s.onExchange},null,8,["nick","device-str","role-id","onExchange"]),o("div",vs,[t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_COUNT_DOWN?(c(),a("div",Ls,[h(r,{"step-list":e.stepList,onClick:s.clickStep},null,8,["step-list","onClick"]),o("div",null,[h(l,{title:"比赛即将开始"}),o("div",ks,[(c(),W(m,{key:0,"force-show-day":!1,"show-unit":!1,"countdown-time":e.countdownTime,onChange:s.countDownChange,onFinish:s.countDownFinish},null,8,["countdown-time","onChange","onFinish"]))])])])):t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_TEAM_LIST?(c(),a("div",Es,[h(r,{"step-list":e.stepList,onClick:s.clickStep},null,8,["step-list","onClick"]),h(l,{title:"比赛已开始"}),o("div",Ns,[h(P,{"team-list":e.teamList},null,8,["team-list"])])])):t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_SCORE_LIST?(c(),a("div",Ps,[h(r,{"step-list":e.stepList,onClick:s.clickStep},null,8,["step-list","onClick"]),h(l,{title:"积分排名","show-icon":!0,onCheckDataDetail:s.checkDataDetail},null,8,["onCheckDataDetail"]),o("div",Bs,[f("",!0),h(F,{"score-list":e.scoreList},null,8,["score-list"])])])):f("",!0),t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_RESULT&&e.resultType===t.RESULT_TYPE_MAP.FAIL?(c(),a("div",Ms,[h(r,{"step-list":e.stepList,onClick:s.clickStep},null,8,["step-list","onClick"]),o("div",null,[o("div",Rs,[h(b,{"is-fail":!0,title:e.failTitle,desc:e.failDesc},null,8,["title","desc"])])])])):t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_RESULT?(c(),a("div",xs,[o("div",Os,[o("div",null,[h(H,{"result-type":e.resultType,"pending-text":e.pendingText},null,8,["result-type","pending-text"]),h(j,{"result-list":e.resultList},null,8,["result-list"])])])])):f("",!0),o("div",{class:S(["press-sche-card-join__button-wrap",t.matchStatus==t.INNER_MATCH_STATUS_MAP.SHOW_RESULT&&e.resultType!==t.RESULT_TYPE_MAP.FAIL?"press-sche-card-join__button-wrap--top":""])},[t.showRemindTeammateIcon?(c(),a("div",Us,[Ws,y(" 提醒队友 ")])):t.showMyPrizeIcon?(c(),a("div",Gs,[Fs,y(" 我的奖励 ")])):t.leftButtonText?(c(),a("div",Hs,[o("i",{class:S(["card-iconfont",t.leftButtonIcon])},null,2),y(" "+u(t.leftButtonText),1)])):(c(),a("div",js)),h(Y,{"button-type":t.innerButtonType,"show-button-countdown":t.innerShowButtonCountdown,"button-tip":t.innerButtonTip,"show-button-tip":!!t.innerButtonTip,"button-tip-type":t.innerButtonTipType,"button-count-down":e.buttonCountDown,"button-avatar-list":e.buttonAvatarList,onClick:s.clickButton,onFinish:s.buttonCountDownFinish},{default:R(()=>[y(u(t.innerButtonText),1)]),_:1},8,["button-type","show-button-countdown","button-tip","show-button-tip","button-tip-type","button-count-down","button-avatar-list","onClick","onFinish"]),t.showBattleTeamList?(c(),a("div",Ys,[zs,y(" 出战名单 ")])):t.showMatchDataDetail?(c(),a("div",{key:5,class:"press-sche-card__right-button",onClick:i[0]||(i[0]=(...B)=>s.checkDataDetail&&s.checkDataDetail(...B))},[Ks,y(" 详细数据 ")])):t.rightButtonText?(c(),a("div",Xs,[o("i",{class:S(["card-iconfont",t.rightButtonIcon])},null,2),y(" "+u(t.rightButtonText),1)])):(c(),a("div",Qs))],2)])],2))])}const Js=C(bs,[["render",Vs],["__scopeId","data-v-76498049"]]),J=({length:n=9,playingIndex:i=0,curIndex:e=2,isStage:_=!1})=>Array.from({length:n}).map((t,s)=>{const r=_?`阶段${s+1}`:`第${s+1}局`;return{time:_?`1.${s*2+1}-2.${s*2+2}`:`7.${s+1} 12:00`,title:r,isCurrent:e===s,playing:i===s}}),qs=({length:n=6,readyList:i=[]})=>Array.from({length:n}).map((_,t)=>{let s="";return t!==n-1&&(i.indexOf(t)>-1?s="已准备":s="未准备"),{head:"https://thirdqq.qlogo.cn/g?b=oidb&k=HFh953g22kPgQny1h7KITQ&kti=ZJJzkQAAAAE&s=640&t=1556998035",nick:"杨",readyType:i.indexOf(t)>-1?1:2,readyDesc:s}}),Zs=()=>[{score:36,title:"第一局",isWinner:1},{score:52,title:"第二局",isWinner:2},{score:"--",title:"第三局",isWinner:3},{score:"--",title:"第四局",isWinner:3},{score:"--",title:"第五局",isWinner:3},{score:36,title:"第六局",isWinner:1}],$s=()=>[{name:"总积分排名",num:"222",isWinner:1},{name:"单局积分(一/二/三)",num:"15/22/27",isWinner:2}];function q({label:n="当前状态",value:i,context:e,statusList:_,current:t,callback:s,paramKey:r}){return{label:n,value:i,click:({context:l})=>{l.closeDialog(),ht({context:e,title:"当前状态",closeIcon:!0,list:_,current:{value:t}}).then(({item:m})=>{e.onGTip("设置成功"),typeof s=="function"&&s.call(e,{[r]:m.value})}).catch(()=>{})}}}function tn({context:n,callback:i,cardStateMap:e,cardState:_,resultTypeMap:t,resultType:s,isNotSignUp:r}){const l=Object.keys(e).map(T=>({label:T,value:T})),m=Object.keys(t).map(T=>({label:T,value:T}));dt({context:n,title:"自定义设置",closeIcon:!0,cellList:[{label:"是否未报名",type:"switch",open:r,click:({context:T})=>{T.closeDialog(),n.onGTip("设置成功"),typeof i.changeParams=="function"&&i.changeParams.call(n,{isNotSignUp:!r})}},q({label:"卡片状态",value:e[_],context:n,statusList:l,current:_,callback:i.changeParams,paramKey:"cardState"}),q({label:"结果状态",value:t[s],context:n,statusList:m,current:s,callback:i.changeParams,paramKey:"resultType"})]})}const en=JSON.stringify({sche:{user_schedule:{game_id:"JMGHFu2rb364BhBUC7wgQt",site_id:"6E3A82ZZAGHcbssuAbszcS",game_status:100,game_start_time:1696212970,battle_list:[{battle_id:"a7cc4db5",circle_id:"a733f951",battle_no:1,battle_status:100,start_time:1696213273,can_battle:!0,battle_game_status:500,room_id:"23136"},{battle_id:"a8c3d2bf",circle_id:"a7413384",battle_no:2,battle_status:10,start_time:1696216570,battle_start_remain:916},{battle_id:"a8cf4169",circle_id:"a74754ac",battle_no:3,start_time:1696220170,battle_start_remain:4516,battle_status:0}],cur_battle_no:1,team_id:"EAE371B0",is_cap:!0,battle_user_list:[{uid:"o5P-Ojkgpg_hfFQhK6QvKwSBnH1M",is_cap:!0,head:"https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLSZ675tt9V8CKYpAbwHXBgTB6wKRzxRPMR2ViaNCeo70XicQ8NkrR1iczA9GuQiaaTMU1J7FMcMfgWUQ/132",nick:"wxtest4"}],total_battle_num:3},r:0}});function sn({gameStatus:n,battleList:i,curBattleNo:e,gameStateRemain:_}){if(n<=z.WILL_START)return{cardState:d.GAME_WILL_START,countdown:_};i.forEach(s=>{s.battle_status||(s.battle_status=0)});const t=s=>{const r=i[s];return r.battle_start_remain?r.battle_start_remain:(r.start_time||0)-parseInt(`${Date.now()/1e3}`,10)||0};if(n<=z.PLAYING)if(e===1){if(i[0].battle_status===N.PLAYING)return i[0].can_enter_game?{cardState:d.BATTLE_STARTED,roomId:i[0].room_id,roomPwd:i[0].room_pwd,buttonTip:"第一局已开赛"}:{cardState:d.BATTLE_PLAYING};if(i[0].battle_status<N.PLAYING)return{cardState:d.GAME_WILL_START,countdown:t(0)||_};if(i[0].battle_status>N.PLAYING)return i.length===1?{cardState:d.GAME_END}:{cardState:d.BATTLE_PLAYING}}else{const s=e-1;if(i[s].battle_status===N.PLAYING)return i[s].can_enter_game?{cardState:d.BATTLE_STARTED,roomId:i[s].room_id,roomPwd:i[s].room_pwd,buttonTip:`第${M[s+1]}局已开赛`}:{cardState:d.BATTLE_PLAYING};if(i[s].battle_status<N.PLAYING)return{cardState:d.BATTLE_NEXT_WILL_START,buttonCountDown:t(s)};if(i[s].battle_status>N.PLAYING)return{cardState:d.GAME_END}}else if(n<=z.EMD)return{cardState:d.GAME_END};return{cardState:d.GAME_WILL_START,countdown:_}}function nn(n={}){var _;const i=n.battle_mode_confs||"";let e;try{e=(_=JSON.parse(i)[0])==null?void 0:_.auto_start_time}catch{}return e}function on(n={},i={}){const{game_status:e=0,cur_battle_no:_,battle_list:t=[],game_start_remain:s,game_result:r=U.PENDING,game_rank:l="-",battle_user_list:m=[]}=n;let T=s;const b=nn(i.labels);b&&(T=Math.max(b-parseInt(`${Date.now()/1e3}`,10),0));const{cardState:P,countdown:F=0,buttonCountDown:H=0,roomId:j="",roomPwd:Y="",buttonTip:B}=sn({gameStatus:e,battleList:t,curBattleNo:_,gameStateRemain:T})||{},V=t.map((D,g)=>{const{start_time:_t}=D;return{title:`第${M[g+1]}局`,time:yt(_t,"hh:mm"),isCurrent:g===_-1}}),it=t.map((D,g)=>g>_?{title:`第${M[g+1]}局`,score:"--",isWinner:3}:{title:`第${M[g+1]}局`,score:D.score||"-",isWinner:D.isvictor}),ct=t.map((D,g)=>M[g+1]).join("/"),at=t.map(D=>D.score||"-").join("/"),rt=[{name:"总积分排名",num:l},{name:`单局积分(${ct})`,num:at}];return{...n,cardState:P,countdown:F*1e3,buttonCountDown:H*1e3,buttonTip:B||"",resultType:Ne[r],parsedBattleList:V,curBattleNo:_,stepList:V,scoreList:it,resultList:rt,roomId:j,roomPwd:Y,siteId:n.site_id||i.site_id||"",childId:n.child_id||n.game_id||i.child_id||i.game_id||"",teamList:m,actStartTime:b}}const K=1,O=1e3*60*60*26,cn={i18n:{"zh-CN":{custom:"自定义",mockData:"赛程数据"},"en-US":{custom:"Custom",mockData:"Schedule Data"}},components:{PressScheduleCard:Js,PressCell:Tt,PressPopupCell:St,PressPicker:ft,DemoInput:Ct},data(){return{sectionStyle:"margin: 0;background: #f7f8fa;",headerStyle:"background: #f7f8fa;",scheInfo:{userNick:"杨",deviceStr:"iOS微信",roleId:"123123123999",countdown:O,buttonCountDown:O,isNotSignUp:!1,cardState:d.BATTLE_STARTED,stepList:J({length:6,playingIndex:K}),gameStageList:J({length:3,isStage:!0,playingIndex:-1,curIndex:-1}),teamList:qs({length:6,readyList:[1,2,3]}),scoreList:Zs(),resultList:$s(),resultType:A.PENDING},FUNCTIONAL_ID_MAP:pt,autosize:{maxHeight:600,minHeight:50},MOCK_SCHEDULE_DATA:en}},methods:{onShowBasicPopupCell(){const{isNotSignUp:n,cardState:i,resultType:e}=this.scheInfo;tn({context:this,isNotSignUp:n,cardState:i,cardStateMap:d,resultTypeMap:A,resultType:e,callback:{changeParams:this.changeParams}})},changeParams(n={}){this.scheInfo={...this.scheInfo,countdown:O,buttonCountDown:O,...n},console.log("[scheInfo]",this.scheInfo)},clickCard(){this.onGTip("[clickCard]")},clickStep(n,i){if(console.log("[clickStep]",n,i),this.onGTip(`[clickStep] ${i}`),this.scheInfo.isNotSignUp)return;const{stepList:e}=this.scheInfo,_=e.map((t,s)=>({...t,isCurrent:i===s,playing:K===i?!1:K===s}));console.log("[newStepList]",_),this.scheInfo.stepList=_},clickButton(){this.onGTip("[clickButton]")},checkDataDetail(){this.onGTip("[checkDataDetail]")},countDownFinish(){this.onGTip("[countDownFinish]")},buttonCountDownFinish(){this.onGTip("[buttonCountDownFinish]")},exchange(){this.onGTip("[exchange]")},countDownChange(){},onConfirmInput(n){var e,_;let i={};try{const t=JSON.parse(n);i=on(((e=t.sche)==null?void 0:e.user_schedule)||t.user_schedule,((_=t.sche)==null?void 0:_.game_info)|t.game_info),console.log("[scheInfo]",i)}catch{this.onGTip("数据解析失败");return}this.scheInfo={...this.scheInfo,...i},this.onGTip("数据生成卡片成功")}}},an={class:"demo-wrap demo-wrap--gray"};function rn(n,i,e,_,t,s){const r=p("press-cell"),l=p("demo-block"),m=p("PressScheduleCard"),T=p("DemoInput"),b=p("PressPopupCell"),P=p("PressPicker");return c(),a("div",an,[h(l,{title:n.t("basicUsage"),"section-style":t.sectionStyle,"header-style":t.headerStyle},{default:R(()=>[h(r,{title:n.t("custom"),"is-link":"",onClick:s.onShowBasicPopupCell},null,8,["title","onClick"])]),_:1},8,["title","section-style","header-style"]),h(m,{"user-nick":t.scheInfo.userNick,"device-str":t.scheInfo.deviceStr,"role-id":t.scheInfo.roleId,"is-not-sign-up":t.scheInfo.isNotSignUp,"card-state":t.scheInfo.cardState,"countdown-time":t.scheInfo.countdown,"button-count-down":t.scheInfo.buttonCountDown,"step-list":t.scheInfo.stepList,"game-stage-list":t.scheInfo.gameStageList,"team-list":t.scheInfo.teamList,"score-list":t.scheInfo.scoreList,"result-list":t.scheInfo.resultList,"result-type":t.scheInfo.resultType,onClick:s.clickCard,onClickStep:s.clickStep,onClickButton:s.clickButton,onCheckDataDetail:s.checkDataDetail,onCountDownChange:s.countDownChange,onCountDownFinish:s.countDownFinish,onButtonCountDownFinish:s.buttonCountDownFinish,onExchange:s.exchange},null,8,["user-nick","device-str","role-id","is-not-sign-up","card-state","countdown-time","button-count-down","step-list","game-stage-list","team-list","score-list","result-list","result-type","onClick","onClickStep","onClickButton","onCheckDataDetail","onCountDownChange","onCountDownFinish","onButtonCountDownFinish","onExchange"]),h(T,{"section-style":t.sectionStyle,"header-style":t.headerStyle,autosize:t.autosize,value:t.MOCK_SCHEDULE_DATA,onConfirm:s.onConfirmInput},null,8,["section-style","header-style","autosize","value","onConfirm"]),h(b,{id:t.FUNCTIONAL_ID_MAP.POPUP_CELL,ref:t.FUNCTIONAL_ID_MAP.POPUP_CELL,mode:"functional"},null,8,["id"]),h(P,{id:t.FUNCTIONAL_ID_MAP.PICKER,ref:t.FUNCTIONAL_ID_MAP.PICKER,mode:"functional"},null,8,["id"])])}const Wn=C(cn,[["render",rn]]);export{Wn as default};
