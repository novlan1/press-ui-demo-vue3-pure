import{_ as f,c as n,o,b as i,R as _,k as C,ag as B,l as g,G as h,r as b,d as v,h as x,n as c,a as d,t as l,F as w,j as P,w as A,e as M}from"./index-BiwYslXk.js";import{P as I}from"./press-popup-DbV5DKmd.js";const V={name:"PressIconDelete"},T={class:"press-number-keyboard__delete-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 22"};function L(a,e,t,u,m,s){return o(),n("svg",T,e[0]||(e[0]=[i("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null,-1)]))}const S=f(V,[["render",L],["__scopeId","data-v-64acd9f4"]]),z={name:"PressNumberKeyboard",options:{...g,styleIsolation:"shared"},components:{PressPopup:I,PressIconDelete:S},mixins:[B],props:{...C,mode:{type:String,default:"number"},show:{type:Boolean,default:!1},toolbar:{type:Boolean,default:!1},cancelButtonText:{type:String,default:""},confirmButtonText:{type:String,default:_("confirm")},title:{type:String,default:""},decimalMark:{type:String,default:"."},random:{type:Boolean,default:!1},maxLength:{type:Number,default:-1},zIndex:{type:Number,default:100},round:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0}},emits:["change","backspace","close","cancel","confirm","update:modelValue"],data(){return{timer:null,refreshKeyOrder:1}},computed:{roundComputed(){return this.round||this.toolbar},keys(){let a;switch(this.mode){case"number":a=[1,2,3,4,5,6,7,8,9,0];break;case"accounting":a=[1,2,3,4,5,6,7,8,9,0,this.decimalMark];break;case"card":a=[1,2,3,4,5,6,7,8,9,"X",0];break;default:a=[]}return this.refreshKeyOrder,this.random&&(a=this.shuffleArray(a)),a},wrapClass(){return h.bem2("number-keyboard",{safe:this.safeAreaInsetBottom})},padClass(){return h.bem2("number-keyboard__pad",this.mode)}},watch:{show(a){this.random&&a&&(this.refreshKeyOrder=this.refreshKeyOrder===1?2:1)}},mounted(){},beforeDestroy(){},methods:{shuffleArray(a){const e=a;for(let t=e.length-1;t>0;t--){const u=Math.floor(Math.random()*(t+1)),m=e[t];e[t]=e[u],e[u]=m}return e},getButtonClass(a,e){const t=[a];switch(this.mode){case"number":e===this.keys.length-1&&t.push("wide");break;case"accounting":["backspace","confirm"].includes(a)?t.push("place-right"):e===this.keys.length-2&&t.push("wide");break}return h.bem2("number-keyboard__button",t)},onKeyboardClick(a){this.maxLength>=0&&this.realModelValue.length>=this.maxLength||(this.emitModelValue(this.realModelValue+a),this.$emit("change",a))},onBackspaceStart(){this.onBackspaceEnd(),this.onBackspaceClick(),this.timer=setInterval(()=>{this.onBackspaceClick()},250)},onBackspaceEnd(){clearInterval(this.timer),this.timer=null},onBackspaceClick(){this.$emit("backspace"),this.emitModelValue(this.realModelValue.slice(0,this.realModelValue.length-1))},onClose(){this.$emit("close")},onActionClick(a){const{action:e}=a.currentTarget.dataset;this.$emit(e)}}},K={key:0,class:"press-number-keyboard__toolbar"},N={class:"press-number-keyboard__title"},D=["onClick"];function E(a,e,t,u,m,s){const k=b("PressIconDelete"),y=b("PressPopup");return o(),v(y,{show:t.show,"z-index":t.zIndex,position:"bottom",round:s.roundComputed,"overlay-style":"background-color: transparent;","safe-area-inset-bottom":!1,onClose:s.onClose},{default:x(()=>[i("div",{class:c(s.wrapClass)},[t.toolbar?(o(),n("div",K,[t.cancelButtonText?(o(),n("button",{key:0,class:"press-number-keyboard__cancel","hover-class":"press-number-keyboard__cancel--hover","data-action":"cancel",onClick:e[0]||(e[0]=(...r)=>s.onActionClick&&s.onActionClick(...r))},l(t.cancelButtonText),1)):d("",!0),i("div",N,l(t.title),1),t.confirmButtonText?(o(),n("button",{key:1,class:"press-number-keyboard__confirm","hover-class":"press-number-keyboard__confirm--hover","data-action":"confirm",onClick:e[1]||(e[1]=(...r)=>s.onActionClick&&s.onActionClick(...r))},l(t.confirmButtonText),1)):d("",!0)])):d("",!0),i("div",{class:c(s.padClass)},[(o(!0),n(w,null,P(s.keys,(r,p)=>(o(),n("button",{key:r,class:c(s.getButtonClass(r,p)),"hover-class":"press-number-keyboard__button--hover",onClick:O=>s.onKeyboardClick(r)},l(r),11,D))),128)),i("button",{class:c(s.getButtonClass("backspace")),"hover-class":"press-number-keyboard__button--hover",onTouchstart:e[2]||(e[2]=A((...r)=>s.onBackspaceStart&&s.onBackspaceStart(...r),["stop"])),onTouchend:e[3]||(e[3]=(...r)=>s.onBackspaceEnd&&s.onBackspaceEnd(...r))},[M(k,{class:"press-number-keyboard__delete-icon"})],34),t.mode==="accounting"?(o(),n("button",{key:0,class:c(s.getButtonClass("confirm")),"hover-class":"press-number-keyboard__button--confirm-hover","data-action":"confirm",onClick:e[4]||(e[4]=(...r)=>s.onActionClick&&s.onActionClick(...r))},l(t.confirmButtonText),3)):d("",!0)],2)],2)]),_:1},8,["show","z-index","round","onClose"])}const F=f(z,[["render",E],["__scopeId","data-v-1cec0acd"]]);export{F as P};
