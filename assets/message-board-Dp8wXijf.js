import{P}from"./press-message-board-input-BVgBcw5d.js";import{d as k,a as b}from"./press-component-dqWuHZBn.js";import{_ as p,o,c as i,y as g,x as S,r as u,b as C,n as v,t as c,d as r,a as d,F as f,u as m,w,i as I,v as x,f as T}from"./index-C4ERlhP1.js";import{t as V}from"./index-Cf3Fo6l-.js";import"./validator-CnMMiRE6.js";const E={options:{...k},name:"ScrollViewWeb",components:{},props:{scrollOffset:{type:Number,default:()=>0},scrollToElementById:{type:String,default:""},lowerThreshold:{type:Number,default:()=>50},scrollViewId:{type:String,default:""},...b},emits:["scroll","scrolltolower"],data(){const t=`__scrollView_${new Date().getDate()}${Math.random()}`;return{randomId:t,identifier:t}},watch:{scrollOffset:{handler(t){const s=document.getElementById(this.identifier);s&&s.scrollTo({top:t})},immediate:!0},scrollToElementById:{handler(t){const s=document.getElementById(t);(t==null?void 0:t.length)>0&&s&&document.getElementById(this.identifier).scrollTo({top:s.offsetTop})},immediate:!0}},mounted(){this.$el.id&&(this.identifier=this.$el.id)},destroyed(){},methods:{onScroll(t){this.$emit("scroll",t);const{scrollTop:s,clientHeight:e,scrollHeight:_}=t.currentTarget;s+e>=_-this.lowerThreshold&&this.$emit("scrolltolower",t)}}},A=["id"];function L(t,s,e,_,a,l){return o(),i("div",{id:e.scrollViewId,style:{height:"100%","overflow-y":"auto"},class:S(t.customClass),onScroll:s[0]||(s[0]=(...n)=>l.onScroll&&l.onScroll(...n))},[g(t.$slots,"default")],42,A)}const O=p(E,[["render",L]]),N={name:"PressScrollView",components:{PlatScrollView:O},props:{scrollY:{type:Boolean,default:!1},enableFlex:{type:Boolean,default:!1},enhanced:{type:Boolean,default:!1},scrollWithAnimation:{type:Boolean,default:!1},enablePassive:{type:Boolean,default:!1},scrollAnchoring:{type:Boolean,default:!1},scrollOffset:{type:Number,default:()=>0},finished:{type:Boolean,default:()=>!1},hideLoading:{type:Boolean,default:!1},loading:{type:Boolean,default:()=>!1},scrollToElementById:{type:String,default:""},hideNoMoreText:{type:Boolean,default:()=>!0},finishedText:{type:String,default:()=>"没有更多了"},scrollViewId:{type:String,default:""}},emits:["scrolltolower","loadmore","scroll"],data(){return{}},mounted(){},methods:{scrolltolower(){this.finished||(this.$emit("scrolltolower"),this.$emit("loadmore"))},scroll(...t){this.$emit("scroll",...t)}}},R={key:0,class:"loading-bottom"},U={key:1,class:"loading-bottom"};function D(t,s,e,_,a,l){const n=u("PlatScrollView");return o(),C(n,{style:{height:"100%"},"scroll-view-id":e.scrollViewId,"scroll-y":e.scrollY,"scroll-with-animation":e.scrollWithAnimation,"scroll-anchoring":e.scrollAnchoring,enhanced:e.enhanced,"enable-flex":e.enableFlex,"enable-passive":e.enablePassive,"scroll-offset":e.scrollOffset,"scroll-to-element-by-id":e.scrollToElementById,onScrolltolower:l.scrolltolower,onScroll:l.scroll},{default:v(()=>[g(t.$slots,"default",{},void 0,!0),e.finished==!0&&!e.hideNoMoreText?(o(),i("p",R,c(e.finishedText),1)):r("",!0),e.loading&&!e.hideLoading?(o(),i("p",U," 加载中... ")):r("",!0)]),_:3},8,["scroll-view-id","scroll-y","scroll-with-animation","scroll-anchoring","enhanced","enable-flex","enable-passive","scroll-offset","scroll-to-element-by-id","onScrolltolower","onScroll"])}const F=p(N,[["render",D],["__scopeId","data-v-ce0cf09e"]]),G={name:"PressMessageBoardList",options:{...k,styleIsolation:"shared"},components:{PressScrollView:F},props:{...b},emits:["replyClick"],data(){return{scrollOffset:0}},mounted(){},methods:{replyClick(...t){this.$emit("replyClick",...t)}}};function W(t,s,e,_,a,l){const n=u("PressScrollView");return o(),C(n,{"scroll-view-id":"scrollViewId","scroll-offset":a.scrollOffset,"scroll-y":!0,"scroll-with-animation":!0,"scroll-anchoring":!0,enhanced:!0,"enable-flex":!0,"enable-passive":!0,style:{height:"100%"}},{default:v(()=>[g(t.$slots,"default")]),_:3},8,["scroll-offset"])}const H=p(G,[["render",W]]),z={name:"PressMessageBoardItem",options:{...k,styleIsolation:"shared"},components:{},props:{item:{type:Object,default:()=>({})},captainUid:{type:String,default:""},captionBadgeAtRight:{type:Boolean,default:!1},colon:{type:Boolean,default:!0},replyColon:{type:Boolean,default:!0},customStyle:{type:String,default:""},...b},emits:["replyClick"],data(){return{}},computed:{replyContent(){return V("reply")}},mounted(){},methods:{replyClick(...t){this.$emit("replyClick",...t)}}},Q={key:0,class:"press-message-board-item__normal-comment"},Y={class:"press-message-board-item__user"},j={class:"press-message-board-item__nick"},K={class:"press-message-board-item__comment-content"},q={class:"press-message-board-item__info"},J={class:"press-message-board-item__comment-time"},X={key:0,class:"press-message-board-item-reply"},Z=["onClick"],$={class:"press-message-board-item__reply-wrap"},ee={key:0,class:"press-message-board-item__reply-avatar"},te={key:1,class:"press-message-board-item__reply-nick"},oe={key:0,class:"press-message-board-item__reply-avatar"},se={class:"press-message-board-item__reply-word"},ne={key:2,class:"press-message-board-item__reply-nick"},ie={key:3,class:"press-message-board-item__reply-avatar"},le={class:"press-message-board-item__reply-content"},de=["id"],ce={key:1,class:"press-message-board-item__system-comment"},ae={class:"press-message-board-item__comment-content"},re={class:"press-message-board-item__comment-time"};function _e(t,s,e,_,a,l){return o(),i("div",{class:S(["press-message-board-item",t.customClass]),style:x(e.customStyle)},[e.item.msg_type===1?(o(),i("div",Q,[d("div",Y,[d("p",j,c(e.item.nick),1)]),d("div",K,[e.colon?(o(),i(f,{key:0},[m(" ： ")],64)):r("",!0),m(" "+c(e.item.content_info),1)]),g(t.$slots,"right-up-corner",{},void 0,!0),d("div",q,[d("div",J,c(e.item.create_time),1),d("p",{class:"press-message-board-item__reply-btn",onClick:s[0]||(s[0]=w(n=>l.replyClick(e.item),["stop"]))},c(l.replyContent),1)]),e.item.comm_list&&e.item.comm_list.length>0?(o(),i("div",X,[(o(!0),i(f,null,I(e.item.comm_list,(n,y)=>(o(),i("div",{key:y,class:"press-message-board-item__reply-item",onClick:w(B=>l.replyClick(n),["stop"])},[d("div",$,[e.captainUid&&n.uid===e.captainUid&&!e.captionBadgeAtRight?(o(),i("div",ee," 队长 ")):r("",!0),n.parent_comm_id?(o(),i("div",te,[m(c(n.nick)+" ",1),e.captainUid&&n.uid===e.captainUid&&e.captionBadgeAtRight?(o(),i("div",oe)):r("",!0),d("p",se,c(l.replyContent),1),m(" "+c(n.parent_nick),1)])):(o(),i("div",ne,c(n.nick),1)),e.captainUid&&n.uid===e.captainUid&&e.captionBadgeAtRight?(o(),i("div",ie," 队长 ")):r("",!0)]),d("p",le,[e.replyColon?(o(),i(f,{key:0},[m(" ： ")],64)):r("",!0),m(" "+c(n.content_info),1)])],8,Z))),128))])):r("",!0),d("div",{id:e.item.msg_id},null,8,de)])):(o(),i("div",ce,[g(t.$slots,"system-comment-left",{},void 0,!0),d("p",ae,c(e.item.content_info),1),d("div",re,c(e.item.create_time),1)]))],6)}const me=p(z,[["render",_e],["__scopeId","data-v-b1a1caa0"]]),ue=[{msg_id:"1670485673629351213",content_info:"test",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"15:50",comm_list:[]},{msg_id:"1670485668576858426",content_info:"110911",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"15:46"},{msg_id:"1670485588505754223",content_info:"Test Content",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"15:30"},{msg_id:"1670485583523443686",content_info:"test",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"15:20"},{msg_id:"1670481134496246346",content_info:"Test",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"15:10"},{msg_id:"1670481115967648602",content_info:"dddd",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"15:00",comm_list:[{comm_id:"1670481120121557488",content_info:"Test",content_type:1,msg_id:"1670481115967648602",level:1,uid:"good_uid",nick:"杨",create_time:"15:00",comm_list:[{comm_id:"1670481123933696154",content_info:"Hello",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"good_uid",nick:"杨",parent_uid:"good_uid",create_time:"15:00",parent_nick:"杨"},{comm_id:"1670481131496864773",content_info:"Test",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"good_uid",nick:"杨",parent_uid:"good_uid",create_time:"15:00",parent_nick:"杨"},{comm_id:"1670485592609623296",content_info:"Test",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"good_uid",nick:"杨",parent_uid:"good_uid",create_time:"15:00",parent_nick:"杨"},{comm_id:"1670485595478648922",content_info:"Test Content",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"good_uid",nick:"杨",parent_uid:"good_uid",create_time:"15:00",parent_nick:"杨"}]},{comm_id:"1670481123933696154",content_info:"Summer",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"xxx",nick:"QQ",create_time:"14:50",parent_uid:"good_uid",parent_nick:"杨"},{comm_id:"1670481131496864773",content_info:"Test",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"good_uid",nick:"杨",parent_uid:"good_uid",create_time:"14:30",parent_nick:"杨"},{comm_id:"1670485592609623296",content_info:"Test",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"good_uid",nick:"杨",parent_uid:"good_uid",create_time:"14:20",parent_nick:"杨"},{comm_id:"1670485595478648922",content_info:"Test Content Test Content Test Content Test Content Test Content Test Content Test Content Test Content",content_type:1,msg_id:"1670481115967648602",parent_comm_id:"1670481120121557488",level:2,uid:"good_uid",nick:"杨",parent_uid:"good_uid",create_time:"14:10",parent_nick:"杨"}]},{msg_id:"1670481108894319571",content_info:"123",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"14:00"},{msg_id:"1670481104059792043",content_info:"110911",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"13:50"},{msg_id:"1670481102986754195",content_info:"123",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"13:40"},{msg_id:"1670481101621544612",content_info:"123",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"13:30"},{msg_id:"1670481099293567941",content_info:"110911",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"13:20"},{msg_id:"1670481098433932835",content_info:"123",content_type:1,msg_type:1,uid:"good_uid",nick:"杨",create_time:"13:10"},{msg_id:"1670481095713238877",content_info:"欢迎 杨 进入房间",content_type:1,msg_type:2,uid:"good_uid",nick:"杨",create_time:"13:00"}],ge={components:{PressMessageBoardInput:P,PressMessageBoardList:H,PressMessageBoardItem:me},data(){return{msgContent:"",msgList:ue}},computed:{sendBtnEnable(){return!!(this.msgContent&&this.msgContent.trim().length>0)}},watch:{msgContent:{handler(t){console.log("[watch] msgContent: ",t)}}},methods:{clickInput(){this.onGTip("Click Input")},sendMsg(){console.log("[sendMsg]",this.msgContent),this.onGTip(this.msgContent)},replyClick(...t){console.log("[replyClick]",...t),this.onGTip("Click Reply")}}},pe={class:"demo-wrap demo-wrap--flex"},fe={class:"demo-list-wrap"},ye={class:"demo-input-wrap"};function he(t,s,e,_,a,l){const n=u("PressMessageBoardItem"),y=u("PressMessageBoardList"),B=u("PressMessageBoardInput");return o(),i("div",pe,[d("div",fe,[T(y,{"custom-class":"demo-message-list"},{default:v(()=>[(o(!0),i(f,null,I(a.msgList,(h,M)=>(o(),C(n,{key:M,item:h,"captain-uid":"good_uid","caption-badge-at-right":!1,"custom-style":"padding: 0 20px;",onReplyClick:l.replyClick},null,8,["item","onReplyClick"]))),128))]),_:1})]),d("div",ye,[T(B,{modelValue:a.msgContent,"onUpdate:modelValue":s[0]||(s[0]=h=>a.msgContent=h),"send-btn-enable":l.sendBtnEnable,onClickInput:l.clickInput,onSendMsg:l.sendMsg},null,8,["modelValue","send-btn-enable","onClickInput","onSendMsg"])])])}const we=p(ge,[["render",he]]);export{we as default};
