import{_ as p,C as o,R as c,o as r,c as n,F as h,q as m,m as a,t as f,d,a as g,n as y}from"./index-BC9YZb89.js";import{n as b}from"./test-CXO-MJ-T.js";const k={props:{adjustPosition:{type:Boolean,default:!0},maxLength:{type:[String,Number],default:6},dot:{type:Boolean,default:!1},mode:{type:String,default:"box"},hairline:{type:Boolean,default:!1},space:{type:[String,Number],default:10},value:{type:[String,Number],default:""},focus:{type:Boolean,default:!1},bold:{type:Boolean,default:!1},color:{type:String,default:"#606266"},fontSize:{type:[String,Number],default:18},size:{type:[String,Number],default:35},disabledKeyboard:{type:Boolean,default:!1},borderColor:{type:String,default:"#c9cacc"},disabledDot:{type:Boolean,default:!0}}};function S(e,t=!1){return b(`${e}`)?t?`${e}px`:Number(e):/(rpx|upx)$/.test(`${e}`)?t?`${uni.upx2px(parseInt(`${e}`))}px`:Number(uni.upx2px(parseInt(`${e}`))):t?`${parseInt(`${e}`)}px`:parseInt(`${e}`)}const B={name:"PressCodeInput",mixins:[k],emits:["change","finish","input","click","click-input"],data(){return{inputValue:"",isFocus:this.focus}},computed:{codeLength(){return new Array(Number(this.maxLength))},itemStyle(){return e=>{const t={width:o(this.size),height:o(this.size)};return this.mode==="box"&&(t.border=`${this.hairline?.5:1}px solid ${this.borderColor}`,S(this.space)===0&&(e===0&&(t.borderTopLeftRadius="3px",t.borderBottomLeftRadius="3px"),e===this.codeLength.length-1&&(t.borderTopRightRadius="3px",t.borderBottomRightRadius="3px"),e!==this.codeLength.length-1&&(t.borderRight="none"))),e!==this.codeLength.length-1?t.marginRight=o(this.space):t.marginRight=0,t}},codeArray(){return String(this.inputValue).split("")},lineStyle(){const e={};return e.height=this.hairline?"2px":"4px",e.width=o(this.size),e.backgroundColor=this.borderColor,e}},watch:{value:{immediate:!0,handler(e){this.inputValue=String(e).substring(0,this.maxLength)||""}}},methods:{addUnit:o,inputHandler(e){const{value:t}=e.detail||e.target;this.inputValue=t,this.disabledDot&&c(()=>{this.inputValue=t.replace(".","")}),this.$emit("change",t),this.$emit("input",t),String(t).length>=Number(this.maxLength)&&this.$emit("finish",t)},clickWrap(){this.$emit("click")},clickInput(){this.$emit("click-input")}}},L={key:0,class:"press-code-input__item__dot"},x=["disabled","focus","value","maxlength","adjustPosition"];function C(e,t,I,N,u,i){return r(),n("div",{class:"press-code-input",onClick:t[4]||(t[4]=(...s)=>i.clickWrap&&i.clickWrap(...s))},[(r(!0),n(h,null,m(i.codeLength,(s,l)=>(r(),n("div",{key:l,class:"press-code-input__item",style:a([i.itemStyle(l)])},[e.dot&&i.codeArray.length>l?(r(),n("div",L)):(r(),n("span",{key:1,style:a({fontSize:i.addUnit(e.fontSize),fontWeight:e.bold?"bold":"normal",color:e.color})},f(i.codeArray[l]||""),5)),e.mode==="line"?(r(),n("div",{key:2,class:"press-code-input__item__line",style:a([i.lineStyle])},null,4)):d("",!0),u.isFocus&&i.codeArray.length===l?(r(),n("div",{key:3,style:a({backgroundColor:e.color}),class:"press-code-input__item__cursor"},null,4)):d("",!0)],4))),128)),g("input",{disabled:e.disabledKeyboard,type:"number",focus:e.focus,value:u.inputValue,maxlength:e.maxLength,adjustPosition:e.adjustPosition,class:y(["press-code-input__input",{"press-code-input__input--disabled":e.disabledKeyboard}]),style:a({height:i.addUnit(e.size)}),onInput:t[0]||(t[0]=(...s)=>i.inputHandler&&i.inputHandler(...s)),onFocus:t[1]||(t[1]=s=>u.isFocus=!0),onBlur:t[2]||(t[2]=s=>u.isFocus=!1),onClick:t[3]||(t[3]=(...s)=>i.clickInput&&i.clickInput(...s))},null,46,x)])}const R=p(B,[["render",C],["__scopeId","data-v-234596f9"]]);export{R as P};
