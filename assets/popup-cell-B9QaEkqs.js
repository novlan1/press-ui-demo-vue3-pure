import{a as G}from"./press-datetime-picker-popup-DcV321tW.js";import{b as C,g as $,c as v,t as b,d as S,e as K,B as R,a as d,f as H,D as h,h as V,S as X,o as _,i as w,l as g,j as z,k as N,P as W,F as Z}from"./helper-DFCphh7x.js";import{P as j}from"./press-picker-BQuw-yOi.js";import{P as Q}from"./press-cell-DQI7GKjm.js";import{_ as q,o as J,c as ee,a as te,f as p,l as I,r as f}from"./index-4prF5mFA.js";import"./press-popup-BjrRY9bM.js";import"./press-button-BNvNLjda.js";import"./press-icon-plus-BKnDNWlW.js";import"./style-CpIyAjCl.js";import"./add-unit-CSy-4COV.js";import"./press-info-zFc1oCW_.js";import"./utils-6Uv3ickc.js";import"./press-component-Cv9kTz4A.js";import"./press-loading-plus-BuhRayzR.js";import"./press-loading-wKaN170k.js";import"./button-Dky8tJDD.js";import"./system-DmiJ0d78.js";import"./function-BV4CtTTe.js";import"./press-picker-plus-BOBUlyME.js";import"./number-CU9l-NjU.js";import"./parent-map-_1jD1UtF.js";import"./index-8SKntImH.js";import"./computed-jVh4moej.js";import"./functional-gQwSCE-6.js";import"./press-switch-Cy8l3HrA.js";import"./rect-7HbQQVQ8.js";import"./link-pPHzr9dz.js";import"./event-CZpnkkJH.js";import"./support-passive-CNRHRm4O.js";const oe=15*60*1e3,M=5;function E(t,e){return t==="year"?`${e}年`:t==="month"?`${e}月`:t==="day"?`${e}日`:t==="hour"?`${e}时`:t==="minute"?`${e}分`:e}function F({type:t,value:e,minDate:o,currentDate:c,otherOption:l="不启用"}){const i=new Date(o).getFullYear();if(t==="year"){if(e==i)return l}else if(new Date(c).getFullYear()===i)return"";return E(t,e)}const x=(t,e=M)=>t.filter(c=>c%e===0);function B(t,e,o,c=M){if(t==="minute"){const l=x(e,c);return!l.length&&(e!=null&&e[0])?[e[0]]:l}return e}function O({type:t,options:e,currentDate:o,delaySeconds:c=oe,distance:l=M}){const i=new Date().getFullYear(),a=new Date(o).getFullYear(),n=new Date(o).getMonth(),r=new Date(o).getDate(),u=new Date(o).getHours(),m=new Date(Date.now()+c).getMonth(),T=new Date(Date.now()+c).getDate(),D=new Date(Date.now()+c).getHours(),y=new Date(Date.now()+c).getMinutes();if(a===i&&t!=="year"){if(t==="month")return e.slice(m);if(t==="day"&&n===m)return e.slice(T-1);if(t==="hour"&&n===m&&r===T)return e.slice(D);if(t==="minute"&&n===m&&r===T&&u<=D)return x(e.slice(y),l)}return t==="minute"?x(e,l):e}const s={startBattleType:1,fixStartTime:parseInt(`${Date.now()/1e3}`,10),fixLatestReadyTime:0,boType:1,bpType:0},P=({context:t,type:e})=>{s.startBattleType=e,t.onGTip("设置成功")};function le(t){C({context:t,title:"开赛设置",closeIcon:!0,cellList:[{label:"开赛方式",value:$(s.startBattleType,s.fixStartTime),click:({context:e})=>{e.closeDialog(),v({context:t,title:"开赛方式",closeIcon:!0,cellList:[{label:"人满开赛",description:"参赛双方满10人准备就绪即可比赛。",type:"checkbox",checked:s.startBattleType===1,click:({context:o})=>{o.closeDialog(),P({type:1,context:t})}},{label:"手动开赛",description:"管理员手动点击开赛，选手才能进行比赛。",type:"checkbox",checked:s.startBattleType===2,click:({context:o})=>{o.closeDialog(),P({type:2,context:t})}},{label:"定时开赛",description:[{content:"本轮「32进16」将于"},{content:b(s.fixStartTime,"M月d日 hh:mm"),light:!0,click:o=>{const{context:c}=o;console.log("err",o),c.closeDialog(),S({context:t,title:"定时开赛时间",button:"确认",closeIcon:!0,datetimePicker:{minDate:h.ON_TIME_START.MIN,maxDate:h.ON_TIME_START.MAX,value:s.fixStartTime*1e3,immediateCheck:!0,formatter:E,filter:B}}).then(({value:l,context:i})=>{i.closeDialog(),s.fixStartTime=parseInt(`${l/1e3}`,10),P({type:3,context:t});const a=b(l,"yyyy-MM-dd hh:mm:ss");console.log("[confirm] value",l,new Date(l)),t.onGTip(`设置成功 ${a}`,3e3)}).catch(l=>{const{context:i}=l;console.log("err",l),i.closeDialog()})}},{content:"定时开赛。"}],type:"checkbox",checked:s.startBattleType===3,click:({context:o})=>{o.closeDialog(),P({type:3,context:t})}}],tip:"创建比赛后，可按比赛轮次精确设置。"}).then(()=>{}).catch(o=>{console.log("err",o);const{context:c}=o;c.closeDialog()})}},{label:"选手截止上场时间",value:K(s.fixLatestReadyTime),click:({context:e})=>{e.closeDialog();const o=s.fixLatestReadyTime===0?new Date:new Date(s.fixLatestReadyTime*1e3),c=h.LATEST_READY.MIN,l=h.LATEST_READY.MAX;S({context:t,title:"自动弃权设置",button:"确认",closeIcon:!0,datetimePicker:{minDate:c,maxDate:l,value:o.getTime(),immediateCheck:!0,filter:(i,a,n)=>O({type:i,options:a,currentDate:n}),formatter:(i,a,n)=>F({type:i,value:a,currentDate:n,minDate:c}),input:()=>{}}}).then(({value:i,context:a})=>{a.closeDialog();const n=b(new Date(c).getTime(),"yyyy"),u=b(i,"yyyy")===n,m=b(i,"yyyy-MM-dd hh:mm:ss");s.fixLatestReadyTime=u?0:parseInt(`${new Date(i).getTime()/1e3}`,10),console.log("[confirm] value",i,new Date(i)),t.onGTip(`设置成功 ${m}`,3e3)}).catch(i=>{const{context:a}=i;console.log("[showDateTimePicker] err",i),a.closeDialog()})}}]}).then(()=>{}).catch(e=>{const{context:o={}}=e||{};console.log("[startMatchSet] err",e),o.closeDialog()})}function ie(t){C({context:t,title:"对局设置",closeIcon:!0,cellList:[{label:"决胜方式",value:R[s.boType],click:({context:e})=>{e.closeDialog(),d({context:t,title:"决胜方式",closeIcon:!0,list:V,current:{label:R[s.boType],value:s.boType}}).then(({item:o})=>{s.boType=o.value,t.onGTip("设置成功")}).catch(()=>{})}},{label:"Ban位",value:H[s.bpType],click:({context:e})=>{e.closeDialog(),d({context:t,title:"Ban位设置",closeIcon:!0,list:X,current:{value:s.bpType}}).then(({item:o})=>{s.bpType=o.value,t.onGTip("设置成功")}).catch(()=>{})}}]}).then(e=>{const{context:o={}}=e||{};o.closeDialog()}).catch(e=>{const{context:o={}}=e||{};console.log("[battleSet] err",e),o.closeDialog()})}const k={fixStartTime:parseInt(`${Date.now()/1e3}`,10),fixLatestReadyTime:0,curRoundType:"winner"};function U(t){return t.map(e=>({label:e.round_name,value:e.round_id}))}function Y(t){return Array.from({length:10}).map((o,c)=>({round_id:c+1,round_name:`${t==="winner"?"胜者":"败者"}组第${c+1}轮`})).concat({round_id:11,round_name:"决赛"})}function A({valueList:t,pickerList:e,context:o,success:c,meta:l}){function i(n={}){A({valueList:t,pickerList:e,context:o,success:c,meta:l,...n||{}})}const a=[{label:"开始轮次",value:t[0].label,click:({context:n})=>{n.closeDialog(),d({context:o,title:"选择轮次",button:"确定",closeIcon:!0,list:e[0],current:t[0]}).then(({item:r})=>{i({valueList:[r,...t.slice(1)]})}).catch(()=>{})}},{label:l.timeLabel,value:t[1].label,click:({context:n})=>{n.closeDialog(),S({context:o,title:l.timePickerTitle,closeIcon:!0,button:"确认",datetimePicker:{minDate:l.minDate,maxDate:l.maxDate,value:t[1].value*1e3,formatter:l.timePickerFormatter,filter:l.timePickerFilter}}).then(({context:r,value:u})=>{r.closeDialog();const m=l.timerPickerParser(u);i({valueList:[t[0],{label:l.timeFormat(m),value:m},t[2]]})}).catch(({context:r})=>{r.closeDialog()})}}];if(l.showTab){const n=[{label:"胜者组",value:"winner"},{label:"败者组",value:"loser"}];a.unshift({type:"tab",label:"分组",active:k.curRoundType,tabList:n,click:r=>{const{tabItem:u,item:m}=r;if(!u||u.value===m.active)return;a[0].active=u.value,k.curRoundType=u.value;const T=Y(k.curRoundType),D=T[0]||{};if(e[0]=U(T),t[0].label=D.round_name,t[0].value=D.round_id,a[1].value=D.round_name,l.type===w.LAST_READY_TIME){const y=N();t[1].label=g(y),t[1].value=y,a[2].value=g(y)}else{const y=k.fixStartTime;t[1].label=_(y),t[1].value=y,a[2].value=_(y)}}})}t[1].value&&a.push({label:"后续轮次间隔时间",value:t[2].label,click:({context:n})=>{n.closeDialog(),d({context:o,title:"后续轮次间隔时间",button:"确定",closeIcon:!0,list:z(),current:{value:t[2].value}}).then(({item:r})=>{i({valueList:[...t.slice(0,2),r]})}).catch(()=>{})}}),v({context:o,title:l.title,closeIcon:!0,button:"确定",cellList:a}).then(({context:n})=>{n.closeDialog(),typeof c=="function"&&c()}).catch(n=>{console.log("[showBatchSetInnerPopup] err",n);const{context:r}=n;r.closeDialog()})}function ne(t){const e=Y(k.curRoundType),o=U(e),c=e[0],l=()=>{t.onGTip("设置成功")};C({context:t,bottomButton:"取消",showTitle:!1,arrowIcon:!0,cellList:[{label:"批量设置定时开赛",type:"button",click:({context:i})=>{i.closeDialog();const a=k.fixStartTime;A({meta:{showTab:!0,title:"批量设置定时开赛",timeLabel:"开赛时间",timePickerTitle:"定时开赛时间",timeFormat:_,minDate:h.ON_TIME_START.MIN,maxDate:h.ON_TIME_START.MAX,timePickerFormatter:E,timePickerFilter:B,timerPickerParser:n=>parseInt(`${n/1e3}`,10),type:w.ON_TIME_START},success:l,valueList:[{label:c.round_name,value:c.round_id},{label:_(a),value:a},{label:"60分钟",value:60}],pickerList:[o],context:t})}},{label:"批量设置截止上场时间",type:"button",click:({context:i})=>{i.closeDialog();const a=N();A({meta:{showTab:!0,title:"批量设置截止上场时间",timeLabel:"选手截止上场时间",timePickerTitle:"自动弃权设置",timeFormat:g,minDate:h.LATEST_READY.MIN,maxDate:h.LATEST_READY.MAX,timePickerFormatter:(n,r,u)=>F({type:n,value:r,minDate:h.LATEST_READY.MIN,currentDate:u}),timePickerFilter:(n,r,u)=>O({type:n,options:r,currentDate:u}),timerPickerParser:n=>{const r=b(h.LATEST_READY.MIN,"yyyy");return b(n,"yyyy")===r?0:parseInt(`${new Date(n).getTime()/1e3}`,10)},type:w.LAST_READY_TIME},success:l,valueList:[{label:c.round_name,value:c.round_id},{label:g(a),value:a},{label:"60分钟",value:60}],pickerList:[o],context:t})}}]}).then(()=>{}).catch(({context:i})=>{i.closeDialog()})}const L={activeRoundType:"winner"},ce={i18n:{"zh-CN":{customType:"自定义类型",examples:"案例",checkboxType:"Checkbox",multipleCheckboxType:"Multiple Checkbox",tabType:"Tab",switchType:"Switch",buttonType:"Button",wayToWin:"决胜方式",SomeContent:"一些内容",controlledPopup:"受控组件",functional:"函数式调用",check:"查看",closeIcon:"关闭图标",cancelIcon:"取消图标",noCloseOrCancel:"没有关闭/取消",plainButtonConfirm:"线框按钮",horizontal:"横版",matchSetting:"开赛设置",startType:"开赛方式",manualStart:"手动开赛",lastReadyTime:"选手截止上场时间",closed:"不启用",asyncConfirm:"异步确认中...",asyncConfirmSuccess:"异步确认后禁止关闭",asyncConfirmFail:"异步确认后禁止关闭",peakDuel:"巅峰对决",peakDuelDesc:"最后一局英雄不限，双方阵容互不可见",popupCellTip:"创建比赛后，可按比赛轮次精确设置。"},"en-US":{customType:"Custom Type",examples:"Examples",checkboxType:"Checkbox",multipleCheckboxType:"Multiple Checkbox",tabType:"Tab",switchType:"Switch",buttonType:"Button",wayToWin:"Bo Number",SomeContent:"Some Content",controlledPopup:"Controlled Popup",functional:"Functional Mode",check:"Check",closeIcon:"Close Ion",cancelIcon:"Cancel Icon",noCloseOrCancel:"No Close Or Cancel",plainButtonConfirm:"Plain Button",horizontal:"Horizontal Version",matchSetting:"Match Setting",startType:"Start Type",manualStart:"Manual Start",lastReadyTime:"Last Ready Time",closed:"Closed",asyncConfirm:"Async Confirm ...",asyncConfirmSuccess:"Async Confirm Success",asyncConfirmFail:"Async Confirm Fail",peakDuel:"Peak Duel",peakDuelDesc:"No limit to heroes in the last round",popupCellTip:"This is some tips."}},components:{PressPopupCell:W,PressDatetimePickerPopup:G,PressPicker:j,PressCell:Q},data(){const t=this;return{FUNCTIONAL_ID_MAP:Z,startMatchSet:le,battleSet:ie,batchSet:ne,customType:{checkboxType:{title:"Checkbox",cellList:[{label:"人满开赛",description:"参赛双方满10人准备就绪即可比赛。",type:"checkbox",click:({context:e})=>{e.closeDialog(),t.onGTip("修改成功")}},{label:"手动开赛",description:"管理员手动点击开赛，选手才能进行比赛。",type:"checkbox",checked:!0,click:({context:e})=>{e.closeDialog(),t.onGTip("修改成功")}}]},multipleCheckboxType:{title:"Checkbox",button:"确定",asyncConfirm:({checkedIndexList:e})=>{if(console.log("[checkedIndexList]...",e),!(e!=null&&e.length))return this.onGTip("必须选择一路"),!1;const o=this.customType.multipleCheckboxType.cellList.filter((c,l)=>e.indexOf(l)>-1).map(c=>c.label).join("、");return this.onGTip(`修改成功，${o}`),!0},cellList:[{label:"对抗路",type:"checkbox",click:()=>{}},{label:"中路",type:"checkbox",checked:!0,click:()=>{}},{label:"发育路",type:"checkbox",checked:!0,click:()=>{}}]},tabType:{title:"Tab",cellList:[{type:"tab",label:"分组",active:L.activeRoundType,tabList:[{label:"胜者组",value:"winner"},{label:"败者组",value:"loser"}],click:({tabItem:e,item:o})=>{!e||e.value===o.active||(console.log("[tabItem, item]: ",e,o),L.activeRoundType=e.value,this.customType.tabType.cellList[0].active=e.value,t.onGTip(`已切换至${e.label}`))}}]},switchType:{title:"Switch",cellList:[{label:"巅峰对决",description:"最后一局英雄不限，双方阵容互不可见",type:"switch",click:({context:e})=>{e.closeDialog(),t.onGTip("修改成功")}}]},buttonType:{title:"Button",bottomButton:"取消",cellList:[{label:"批量设置定时开赛",type:"button",click:({context:e})=>{e.closeDialog(),t.onGTip("修改成功")}},{label:"批量设置截止上场时间",type:"button",click:({context:e})=>{e.closeDialog(),t.onGTip("修改成功")}}]}}}},methods:{onShowBasicPopupCell(){C({context:this,closeIcon:!0,title:"Popup Cell",cellList:[{label:"决胜方式",value:"一局胜负",click:({context:t})=>{t.closeDialog()}},{label:"Ban位",value:"各禁4英雄",click:({context:t})=>{t.closeDialog()}}]}).catch(t=>{const{context:e}=t;e.closeDialog()})},onShowCustomType(t){const e=this.customType[t]||{};C({context:this,closeIcon:!0,...e}).then(({context:o,checkedIndexList:c})=>{console.log("[checkedIndexList]",c),o.closeDialog()}).catch(({context:o})=>{o.closeDialog()})},onShowPopupCell(t){t(this)}}},ae={class:"demo-wrap"};function re(t,e,o,c,l,i){const a=f("press-cell"),n=f("demo-block"),r=f("PressPopupCell"),u=f("PressPicker"),m=f("PressDatetimePickerPopup");return J(),ee("div",ae,[te("div",null,[p(n,{title:t.t("basicUsage")},{default:I(()=>[p(a,{title:t.t("check"),"is-link":"",onClick:i.onShowBasicPopupCell},null,8,["title","onClick"])]),_:1},8,["title"]),p(n,{title:t.t("customType")},{default:I(()=>[p(a,{title:t.t("checkboxType"),"is-link":"",onClick:e[0]||(e[0]=T=>i.onShowCustomType("checkboxType"))},null,8,["title"]),p(a,{title:t.t("multipleCheckboxType"),"is-link":"",onClick:e[1]||(e[1]=T=>i.onShowCustomType("multipleCheckboxType"))},null,8,["title"]),p(a,{title:t.t("tabType"),"is-link":"",onClick:e[2]||(e[2]=T=>i.onShowCustomType("tabType"))},null,8,["title"]),p(a,{title:t.t("switchType"),"is-link":"",onClick:e[3]||(e[3]=T=>i.onShowCustomType("switchType"))},null,8,["title"]),p(a,{title:t.t("buttonType"),"is-link":"",onClick:e[4]||(e[4]=T=>i.onShowCustomType("buttonType"))},null,8,["title"])]),_:1},8,["title"]),p(n,{title:t.t("examples")},{default:I(()=>[p(a,{title:"开赛设置","is-link":"",onClick:e[5]||(e[5]=T=>i.onShowPopupCell(l.startMatchSet))}),p(a,{title:"对局设置","is-link":"",onClick:e[6]||(e[6]=T=>i.onShowPopupCell(l.battleSet))}),p(a,{title:"批量设置","is-link":"",onClick:e[7]||(e[7]=T=>i.onShowPopupCell(l.batchSet))})]),_:1},8,["title"])]),p(r,{id:l.FUNCTIONAL_ID_MAP.POPUP_CELL,ref:l.FUNCTIONAL_ID_MAP.POPUP_CELL,mode:"functional"},null,8,["id"]),p(r,{id:l.FUNCTIONAL_ID_MAP.POPUP_CELL_2,ref:l.FUNCTIONAL_ID_MAP.POPUP_CELL_2,mode:"functional"},null,8,["id"]),p(u,{id:l.FUNCTIONAL_ID_MAP.PICKER,ref:l.FUNCTIONAL_ID_MAP.PICKER,mode:"functional"},null,8,["id"]),p(m,{id:l.FUNCTIONAL_ID_MAP.DATE_TIME_PICKER,ref:l.FUNCTIONAL_ID_MAP.DATE_TIME_PICKER,mode:"functional"},null,8,["id"])])}const Oe=q(ce,[["render",re],["__scopeId","data-v-147373bb"]]);export{Oe as default};
